import{r as Zs,o as Y,c as li,_ as et,a as J,b as q,F as Ut,d as Be,e as Cs,u as Dt,f as mt,w as ph,g as Te,h as T,n as ei,i as fh,j as Fl,T as mh,k as _e,l as Nl,p as Ul,m as kl,q as Ih,s as Gl,t as us,v as dt,x as Eh,L as yo,y as Lt,S as me,z as Ft,B as wo,A as je,C as Re,D as Ch,E as eo,G as Pl,H as to,I as Bh,P as Qo,J as Ol,M as We,K as It,V as xe,N as Ze,O as U,Q as yh,R as ci,U as Hl,W as wh,X as Qh,Y as kt,Z as mn,$ as ds,a0 as vh,a1 as Yi,a2 as xh,a3 as gs,a4 as Gt,a5 as ti,a6 as bh,a7 as P,a8 as Sh,a9 as _h,aa as Th,ab as Rh,ac as zi,ad as si,ae as an,af as vo,ag as Mh,ah as Dh,ai as Lh,aj as xo,ak as bo,al as $l,am as Vl,an as ql,ao as Kl,ap as Yl,aq as zl,ar as Jl,as as So,at as Fh,au as ii,av as Nh,aw as Vo,ax as qo,ay as Tt,az as _o,aA as Uh,aB as zs,aC as Je,aD as kh,aE as In,aF as ct,aG as Gh,aH as Ph,aI as Oh,aJ as Hh,aK as $h,aL as Vh,aM as qh,aN as Kh,aO as Yh,aP as Nt,aQ as Ne,aR as zh,aS as Jh,aT as fi,aU as mi,aV as hi,aW as En,aX as An,aY as jh,aZ as gt,a_ as jl,a$ as Wh,b0 as Xh,b1 as Wl,b2 as Zh,b3 as Ji,b4 as To,b5 as Xl,b6 as eu,b7 as Ii,b8 as Ro,b9 as Cn,ba as tu,bb as su,bc as Zl,bd as Ko,be as iu,bf as nu,bg as ru,bh as so,bi as ou,bj as au,bk as ec,bl as Au,bm as lu,bn as cu,bo as tc,bp as sc,bq as hu,br as uu,bs as du}from"./entry.223cdc3f.js";const gu={__name:"Light",props:{type:{type:String,default:"directional"},color:{type:String,default:"#FFF"},intensity:{type:String,default:"0.6"},distance:{type:String,default:0},position:{type:String,required:!0}},setup(o){return(e,t)=>{const s=Zs("a-light");return Y(),li(s,{type:o.type,color:o.color,intensity:o.intensity,distance:o.distance,castShadow:o.type!=="ambient",shadowBias:"-0.001",shadowCameraVisible:!0,position:o.position,helper:!1},null,8,["type","color","intensity","distance","castShadow","position"])}}},pu=gu,fu={};function mu(o,e){const t=pu;return Y(),J(Ut,null,[q(t,{position:"-0.5 0.5 0.5",color:"#fcf2d4",type:"ambient",intensity:"1"}),q(t,{position:"0 10 2.5",color:"#fcf7e6",type:"directional",distance:"12",intensity:"2.4"})],64)}const Iu=et(fu,[["render",mu]]),Eu=""+new URL("map.1655ec29.glb",import.meta.url).href,Cu={__name:"MapEntity",emits:["modelLoaded"],setup(o,{emit:e}){const t=Be(null),s=Be(!0),i=()=>{t.value.getObject3D("mesh").traverse(r=>{r.isMesh&&(r.frustumCulled=!1)})};return Cs(()=>{t.value&&t.value.addEventListener("model-loaded",()=>{i(),e("modelLoaded")}),s.value=window.innerWidth>=1024}),(n,r)=>{const a=Zs("a-entity");return Y(),li(a,{ref_key:"mapRef",ref:t,"animation-mixer":"",id:"target","gltf-model":Dt(Eu),position:s.value?"8 0 0":"1 0 0",rotation:s.value?"-18 10 10":"-15 30 0",scale:"1 1 1",shadow:"receive: true; cast: true"},null,8,["gltf-model","position","rotation"])}}},Bu=Cu,ic=mt({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(o,{slots:e,attrs:t}){const s=Be(!1);return Cs(()=>{s.value=!0}),i=>{var A;if(s.value)return(A=e.default)==null?void 0:A.call(e);const n=e.fallback||e.placeholder;if(n)return n();const r=i.fallback||i.placeholder||"",a=i.fallbackTag||i.placeholderTag||"span";return J(a,t,r)}}}),yu={__name:"Map",setup(o){const e=Be(!1),t=Be(!1),s=Be(!1),i=Be(!0),n={target:"0 -1.7 -0.5",initialPosition:"0 16 1.5",enabled:"false"};return Cs(()=>{var a,A;const r=(a=document.getElementsByTagName("html"))==null?void 0:a[0];(A=r==null?void 0:r.classList)==null||A.remove("a-fullscreen")}),ph(()=>{s.value&&t.value&&(i.value=!1)}),(r,a)=>{const A=Iu,l=Bu,h=Zs("a-entity"),c=Zs("a-scene"),d=ic;return Y(),li(d,null,{default:Te(()=>[T("div",{class:ei(["transition-opacity duration-1000 absolute h-full w-full pointer-events-none touch-none",Dt(i)?"opacity-0 invisible":"opacity-100 visible"])},[q(c,{ref:"sceneRef",embedded:"",visible:!0,fog:"type: exponential; color: #047C87; density: 0.036;",shadow:"type: pcf","device-orientation-permission-ui":"enabled: false","vr-mode-ui":"enabled: false",renderer:`antialias: true;
                    colorManagement: true;
                    sortObjects: false;
                    physicallyCorrectLights: true;
                    maxCanvasWidth: 1920;
                    maxCanvasHeight: 1920;`,onLoaded:a[1]||(a[1]=()=>s.value=!0)},{default:Te(()=>[q(A),q(l,{onModelLoaded:a[0]||(a[0]=()=>t.value=!0)}),q(h,{ref_key:"cameraRef",ref:e,id:"camera",camera:"","look-controls":"enabled:false","orbit-controls":n},null,512)]),_:1},512)],2)]),_:1})}}},wu=yu,Qu={},vu={class:"w-96 h-96 blur-3xl bg-yellow-200 rounded-full overflow-hidden mix-blend-lighten"};function xu(o,e){return Y(),J("div",vu)}const bu=et(Qu,[["render",xu]]),Su=o=>(Ul("data-v-aac78fdb"),o=o(),kl(),o),_u={class:"h-screen w-full transition-all pointer-events-none z-0 absolute overflow-x-hidden"},Tu={class:"container relative flex flex-col justify-center gap-12 lg:gap-20 z-10"},Ru=Su(()=>T("h2",{class:"cover__title text-4xl lg:text-5xl xl:text-6xl md:max-w-[75%] md:max-w-[50%] lg:leading-tight xl:leading-tight"}," Recorre Mallorca en realidad aumentada mientras visitas sus playas y mercados ",-1)),Mu=mt({__name:"Cover",setup(o){const e=Be(0),t=Be(0),s=Be(!0);Cs(()=>{});const i=n=>{setTimeout(()=>{e.value=n.clientX-15,t.value=n.clientY-15},100)};return(n,r)=>{const a=wu,A=bu,l=Nl;return Y(),J("section",{class:"cover relative flex text-white h-screen",onMousemove:i,onMouseenter:r[0]||(r[0]=h=>s.value=!0),onMouseleave:r[1]||(r[1]=h=>s.value=!1)},[T("div",_u,[q(a)]),q(mh,{name:"fade"},{default:Te(()=>[Dt(s)?(Y(),li(A,{key:0,class:"hidden lg:inline-block fixed z-10 -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:fh({top:Dt(t)+"px",left:Dt(e)+"px"})},null,8,["style"])):Fl("",!0)]),_:1}),T("div",Tu,[Ru,q(l,{type:"squared",class:"py-5 px-14 w-fit",bigSize:""},{default:Te(()=>[_e("Jugar ahora")]),_:1})])],32)}}});const Du=et(Mu,[["__scopeId","data-v-aac78fdb"]]),Lu={class:"font-bold uppercase text-2xl lg:text-3xl"},Fu={__name:"SectionHeading",props:{bigSize:{type:Boolean,default:!1}},setup(o){return(e,t)=>(Y(),J("h3",Lu,[Ih(e.$slots,"default")]))}},ui=Fu,Nu=mt({__name:"Divider",props:{dark:{type:Boolean,default:!1}},setup(o){return(e,t)=>(Y(),J("div",{class:ei(["w-1",o.dark?"bg-black":"bg-white"])},null,2))}}),Uu={},ku={id:"about",class:"container relative w-full flex flex-col lg:flex-row justify-center lg:text-xl text-cyan-600 gap-y-10 lg:gap-y-0 lg:gap-x-20 py-16 lg:py-40 scroll-mt-28"},Gu=T("div",{class:"lg:w-[35%] text-center lg:text-left"},[T("div",{class:"hidden lg:block text-sky-950 mb-8 text-xl lg:text-3xl font-bold"}," ¿Listo para disfrutar de una aventura única en la isla de Mallorca? "),T("p",null," Mallorca Urban Experience es un recorrido diferente por la isla de Mallorca. "),T("p",{class:"mt-4"}," En esta experiencia, accesible desde tu dispositivo móvil, explorarás diversos lugares en los que desbloquearás esculturas en realidad aumentada que revelarán historias únicas sobre la vida del lugar. "),T("p",{class:"mt-4"}," ¡A qué esperas para explorar la isla y descubrir su historia y las esculturas que en ella se ocultan en realidad aumentada! ")],-1);function Pu(o,e){const t=ui,s=Nu;return Y(),J("section",ku,[q(t,{class:"uppercase text-center lg:text-right lg:w-[20%]"},{default:Te(()=>[_e("¿Qué es Mallorca Urban experience?")]),_:1}),q(s,{class:"w-1/2 lg:w-1 h-1 lg:h-auto translate-x-1/2 lg:translate-x-0",dark:""}),Gu])}const Ou=et(Uu,[["render",Pu]]),Hu=""+new URL("mockups.3c4b3708.png",import.meta.url).href,$u={class:"bg-yellow-200 overflow-hidden"},Vu=T("img",{class:"absolute top-1/2 left-1/2 -translate-y-1/4 md:-translate-y-1/2 -translate-x-1/2 w-[1200px] max-w-[1200px] md:w-[1500px] md:max-w-[1500px] lg:w-[180vw] lg:max-w-[180vw]",src:Hu},null,-1),qu=[Vu],Ku=mt({__name:"Mockups",setup(o){const e=Be();return Cs(()=>{Gl.to(e.value,{y:-500,ease:"power1.easeInOut",scrollTrigger:{trigger:e.value,start:"top bottom",end:"bottom top",scrub:!0}})}),(t,s)=>(Y(),J("section",$u,[T("figure",{ref_key:"image",ref:e,class:"relative w-full h-[70vh] lg:h-[80vh]"},qu,512)]))}}),Yu=""+new URL("ar-experience.d8034f87.png",import.meta.url).href,zu=""+new URL("visit-locations.d16f0765.png",import.meta.url).href,Ju=""+new URL("unlock-information.266cc79c.png",import.meta.url).href,ju=""+new URL("collect-sculptures.1f0202f0.png",import.meta.url).href,Wu={class:"container py-12 lg:py-32 grid place-items-center"},Xu={class:"grid md:grid-cols-2 xl:grid-cols-4 gap-y-8 gap-x-8 mt-12"},Zu={class:"aspect-square bg-red-500 rounded-xl overflow-hidden"},ed=["src"],td={class:"mt-6"},sd={class:"text-xl lg:text-2xl font-bold"},id={class:"lg:text-base mt-4 lg:mt-6"},nd=mt({__name:"HowToPlay",setup(o){const e=[{title:"Una experiencia en Realidad Aumentada",image:Yu,description:"Para sumergirte en la aventura debes estar en la isla de Mallorca y acceder a la expericiencia desde este enlace. Desde allí, podrás comenzar a explorar la isla y descubrir las esculturas ocultas mientras cobran vida en tu dispositivo con la realidad aumentada."},{title:"Visita todas las localizaciones",image:zu,description:"Explora los diversos lugares emblemáticos de Mallorca. Cuando llegues a una ubicación escanea con tu dispositivo para verificar si estás en el lugar correcto. Cada ubicación tiene su propia historia por descubrir."},{title:"Desbloquea la información",image:Ju,description:"Al encontrar las localizaciones de la isla, desbloquearás la historia y la escultura del lugar. Utiliza la cámara de tu dispositivo para ver las esculturas en realidad aumentada y descubre lo que cada una de ellas tiene que mostrarte sobre la vida en Mallorca."},{title:"Colecciona todas las esculturas",image:ju,description:"Tu misión es coleccionar todas las esculturas mientras exploras la isla. Cada una representa una pieza importante de la cultura y la tradición mallorquina. ¿Podrás encontrarlas todas?"}];return(t,s)=>{const i=ui;return Y(),J("section",Wu,[q(i,{class:"uppercase"},{default:Te(()=>[_e("Cómo jugar")]),_:1}),T("section",Xu,[(Y(),J(Ut,null,us(e,(n,r)=>T("div",null,[T("figure",Zu,[T("img",{class:"object-cover w-full h-full",src:n.image},null,8,ed)]),T("div",td,[T("div",sd,dt(n.title),1),T("div",id,dt(n.description),1)])])),64))])])}}}),rd=o=>(Ul("data-v-737aaab9"),o=o(),kl(),o),od={class:"relative flex lg:flex-col justify-between items-between w-full lg:w-auto lg:h-full mt-6 lg:mt-0"},ad=rd(()=>T("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white w-full h-[3px] lg:w-1 lg:h-full"},null,-1)),Ad={class:"absolute left-1/2 -translate-x-1/2 -top-[24px] lg:top-1/2 lg:-translate-y-1/2 lg:-left-[40px] h-fit w-fit text-white lg:text-xl leading-none"},ld=mt({__name:"StepProgressBar",props:{steps:{type:Number,default:0,required:!0},activeStep:{type:Number,default:0,required:!0}},setup(o){return(e,t)=>(Y(),J("div",od,[ad,(Y(!0),J(Ut,null,us(o.steps,(s,i)=>(Y(),J("div",{class:ei(["relative h-3 w-3 lg:h-7 lg:w-7 border-[2px] lg:border-[3px] border-white rounded-full transition-all",{"bg-cyan-900":o.activeStep<i,"bg-white":o.activeStep>=i}]),key:`step-${i+1}`},[T("div",Ad," 0"+dt(i+1),1)],2))),128))]))}});const cd=et(ld,[["__scopeId","data-v-737aaab9"]]),hd=""+new URL("phone-case.faf776c6.png",import.meta.url).href,ud={id:"guide",class:"test bg-cyan-gradient py-10 md:py-32"},dd={id:"guideSection",class:"container h-screen text-white flex flex-col items-center gap-6 xl:gap-20"},gd={class:"flex flex-col lg:flex-row w-full justify-center items-center lg:items-stretch gap-6 lg:gap-10 xl:gap-20"},pd={class:"relative w-[120px] min-w-[120px] md:w-[240px] md:min-w-[240px] xl:w-[350px] xl:min-w-[350px] lg:order-1"},fd={class:"absolute w-[96%] h-[98%] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex overflow-hidden rounded-[32px] lg:rounded-[40px]"},md={class:"images flex"},Id=["src"],Ed=T("img",{class:"relative w-full",src:hd,alt:"Carcasa de móvil",loading:"lazy"},null,-1),Cd={class:"flex justify-end items-end w-full px-10 lg:px-0 lg:order-0"},Bd={class:"relative w-full lg:order-2"},yd={class:"text-xl lg:text-3xl font-bold"},wd=["innerHTML"],Qd=["src"],vd={__name:"Guide",setup(o){const e=Be(0),t=[{title:"Usa tu móvil",image:"app-home.svg",description:{text:"Para poder jugar necesitarás abrir esta página en tu teléfono móvil. <br><br>Para poder jugar necesitarás abrir esta página en tu teléfono móvil.  Para poder jugar necesitarás abrir esta página en tu teléfono móvil. Para poder jugar necesitarás abrir esta página en tu teléfono móvil. ",image:"qr.svg"}},{title:"Usa tu móvil",image:"app-home.svg",description:{text:"Para poder jugar necesitarás abrir esta página en tu teléfono móvil. <br><br>Para poder jugar necesitarás abrir esta página en tu teléfono móvil.  Para poder jugar necesitarás abrir esta página en tu teléfono móvil. Para poder jugar necesitarás abrir esta página en tu teléfono móvil. ",image:"qr.svg"}},{title:"Usa tu móvil",image:"app-home.svg",description:{text:"Para poder jugar necesitarás abrir esta página en tu teléfono móvil. <br><br>Para poder jugar necesitarás abrir esta página en tu teléfono móvil.  Para poder jugar necesitarás abrir esta página en tu teléfono móvil. Para poder jugar necesitarás abrir esta página en tu teléfono móvil. ",image:"qr.svg"}},{title:"Usa tu móvil",image:"app-home.svg",description:{text:"Para poder jugar necesitarás abrir esta página en tu teléfono móvil. <br><br>Para poder jugar necesitarás abrir esta página en tu teléfono móvil.  Para poder jugar necesitarás abrir esta página en tu teléfono móvil. Para poder jugar necesitarás abrir esta página en tu teléfono móvil. ",image:"qr.svg"}},{title:"Usa tu móvil",image:"app-home.svg",description:{text:"Para poder jugar necesitarás abrir esta página en tu teléfono móvil. <br><br>Para poder jugar necesitarás abrir esta página en tu teléfono móvil.  Para poder jugar necesitarás abrir esta página en tu teléfono móvil. Para poder jugar necesitarás abrir esta página en tu teléfono móvil. ",image:"qr.svg"}}];Cs(()=>{Eh(()=>{s()})});const s=()=>{const i=Gl.timeline({scrollTrigger:{trigger:"#guide",start:(window.innerWidth>=1024,"top top"),end:()=>"+="+window.innerHeight*t.length,pin:"#guideSection",pinSpacing:!0,snap:{inertia:!0,snapTo:"labels",duration:.1,delay:.25,ease:"Power1.none"},scrub:.5,fastScrollEnd:!0,preventOverlaps:!1,onUpdate:n=>{const r=n.progress*(t.length-1);e.value=Math.round(r)}}});t.forEach((n,r)=>{r<t.length-1?i.addLabel(`step-${r}`).add(`step-${r}`).to(".images",{x:`${(r+1)*-100}%`,ease:"expo.inOut"},`step-${r}`).to(`.content-${r}`,{autoAlpha:0,y:"-120%",ease:"expo.inOut"},`step-${r}`).from(`.content-${r+1}`,{autoAlpha:0,y:"120%",ease:"expo.inOut"},`step-${r}`).to(`.content-${r+1}`,{y:0,ease:"expo.inOut"},`step-${r}`):i.addLabel(`step-${r}`)})};return(i,n)=>{const r=ui,a=cd;return Y(),J("div",ud,[T("section",dd,[q(r,null,{default:Te(()=>[_e("Paso a paso")]),_:1}),T("div",gd,[T("div",pd,[T("div",fd,[T("div",md,[(Y(),J(Ut,null,us(t,(A,l)=>T("img",{key:l+`__${A.title}`,class:ei(["image object-cover",`image-${l+1} image-fade-out-${l+1}`]),src:`/_nuxt/assets/images/mockups/${A.image}`,alt:""},null,10,Id)),64))])]),Ed]),T("div",Cd,[q(a,{class:"",steps:t.length,activeStep:Dt(e)},null,8,["steps","activeStep"])]),T("div",Bd,[(Y(),J(Ut,null,us(t,(A,l)=>T("div",{class:ei(["absolute flex flex-col gap-4 xl:gap-8 text-white items-center lg:items-start text-center lg:text-left w-full lg:w-[270px]",{[`content content-${l}`]:!0}])},[T("div",yd,dt(A.title),1),T("p",{class:"text-sm xl:text-base",innerHTML:A.description.text},null,8,wd),A.description.image?(Y(),J("img",{key:0,src:`/_nuxt/assets/images/${A.description.image}`,class:"w-20",alt:"",loading:"lazy"},null,8,Qd)):Fl("",!0)],2)),64))])])])])}}},xd=vd;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bd=(o,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(t){t.createProperty(e.key,o)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(t){t.createProperty(e.key,o)}},Sd=(o,e,t)=>{e.constructor.createProperty(t,o)};function F(o){return(e,t)=>t!==void 0?Sd(o,e,t):bd(o,e)}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var bn;((bn=window.HTMLSlotElement)===null||bn===void 0?void 0:bn.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ji=window,Mo=ji.ShadowRoot&&(ji.ShadyCSS===void 0||ji.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,nc=Symbol(),Yo=new WeakMap;let _d=class{constructor(e,t,s){if(this._$cssResult$=!0,s!==nc)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Mo&&e===void 0){const s=t!==void 0&&t.length===1;s&&(e=Yo.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&Yo.set(t,e))}return e}toString(){return this.cssText}};const Td=o=>new _d(typeof o=="string"?o:o+"",void 0,nc),Rd=(o,e)=>{Mo?o.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const s=document.createElement("style"),i=ji.litNonce;i!==void 0&&s.setAttribute("nonce",i),s.textContent=t.cssText,o.appendChild(s)})},zo=Mo?o=>o:o=>o instanceof CSSStyleSheet?(e=>{let t="";for(const s of e.cssRules)t+=s.cssText;return Td(t)})(o):o;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Sn;const ln=window,Jo=ln.trustedTypes,Md=Jo?Jo.emptyScript:"",jo=ln.reactiveElementPolyfillSupport,io={toAttribute(o,e){switch(e){case Boolean:o=o?Md:null;break;case Object:case Array:o=o==null?o:JSON.stringify(o)}return o},fromAttribute(o,e){let t=o;switch(e){case Boolean:t=o!==null;break;case Number:t=o===null?null:Number(o);break;case Object:case Array:try{t=JSON.parse(o)}catch{t=null}}return t}},rc=(o,e)=>e!==o&&(e==e||o==o),_n={attribute:!0,type:String,converter:io,reflect:!1,hasChanged:rc},no="finalized";let Rt=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,s)=>{const i=this._$Ep(s,t);i!==void 0&&(this._$Ev.set(i,s),e.push(i))}),e}static createProperty(e,t=_n){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const s=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,s,t);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,s){return{get(){return this[t]},set(i){const n=this[e];this[t]=i,this.requestUpdate(e,n,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||_n}static finalize(){if(this.hasOwnProperty(no))return!1;this[no]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,s=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of s)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const i of s)t.unshift(zo(i))}else e!==void 0&&t.push(zo(e));return t}static _$Ep(e,t){const s=t.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,s;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((s=e.hostConnected)===null||s===void 0||s.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Rd(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var s;return(s=t.hostConnected)===null||s===void 0?void 0:s.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var s;return(s=t.hostDisconnected)===null||s===void 0?void 0:s.call(t)})}attributeChangedCallback(e,t,s){this._$AK(e,s)}_$EO(e,t,s=_n){var i;const n=this.constructor._$Ep(e,s);if(n!==void 0&&s.reflect===!0){const r=(((i=s.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?s.converter:io).toAttribute(t,s.type);this._$El=e,r==null?this.removeAttribute(n):this.setAttribute(n,r),this._$El=null}}_$AK(e,t){var s;const i=this.constructor,n=i._$Ev.get(e);if(n!==void 0&&this._$El!==n){const r=i.getPropertyOptions(n),a=typeof r.converter=="function"?{fromAttribute:r.converter}:((s=r.converter)===null||s===void 0?void 0:s.fromAttribute)!==void 0?r.converter:io;this._$El=n,this[n]=a.fromAttribute(t,r.type),this._$El=null}}requestUpdate(e,t,s){let i=!0;e!==void 0&&(((s=s||this.constructor.getPropertyOptions(e)).hasChanged||rc)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),s.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,s))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,n)=>this[n]=i),this._$Ei=void 0);let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var n;return(n=i.hostUpdate)===null||n===void 0?void 0:n.call(i)}),this.update(s)):this._$Ek()}catch(i){throw t=!1,this._$Ek(),i}t&&this._$AE(s)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(s=>{var i;return(i=s.hostUpdated)===null||i===void 0?void 0:i.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,s)=>this._$EO(s,this[s],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Rt[no]=!0,Rt.elementProperties=new Map,Rt.elementStyles=[],Rt.shadowRootOptions={mode:"open"},jo==null||jo({ReactiveElement:Rt}),((Sn=ln.reactiveElementVersions)!==null&&Sn!==void 0?Sn:ln.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Tn;const cn=window,ps=cn.trustedTypes,Wo=ps?ps.createPolicy("lit-html",{createHTML:o=>o}):void 0,ro="$lit$",at=`lit$${(Math.random()+"").slice(9)}$`,oc="?"+at,Dd=`<${oc}>`,Pt=document,ni=()=>Pt.createComment(""),ri=o=>o===null||typeof o!="object"&&typeof o!="function",ac=Array.isArray,Ld=o=>ac(o)||typeof(o==null?void 0:o[Symbol.iterator])=="function",Rn=`[ 	
\f\r]`,ys=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Xo=/-->/g,Zo=/>/g,Et=RegExp(`>|${Rn}(?:([^\\s"'>=/]+)(${Rn}*=${Rn}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ea=/'/g,ta=/"/g,Ac=/^(?:script|style|textarea|title)$/i,Fd=o=>(e,...t)=>({_$litType$:o,strings:e,values:t}),Bn=Fd(1),fs=Symbol.for("lit-noChange"),re=Symbol.for("lit-nothing"),sa=new WeakMap,Mt=Pt.createTreeWalker(Pt,129,null,!1);function lc(o,e){if(!Array.isArray(o)||!o.hasOwnProperty("raw"))throw Error("invalid template strings array");return Wo!==void 0?Wo.createHTML(e):e}const Nd=(o,e)=>{const t=o.length-1,s=[];let i,n=e===2?"<svg>":"",r=ys;for(let a=0;a<t;a++){const A=o[a];let l,h,c=-1,d=0;for(;d<A.length&&(r.lastIndex=d,h=r.exec(A),h!==null);)d=r.lastIndex,r===ys?h[1]==="!--"?r=Xo:h[1]!==void 0?r=Zo:h[2]!==void 0?(Ac.test(h[2])&&(i=RegExp("</"+h[2],"g")),r=Et):h[3]!==void 0&&(r=Et):r===Et?h[0]===">"?(r=i??ys,c=-1):h[1]===void 0?c=-2:(c=r.lastIndex-h[2].length,l=h[1],r=h[3]===void 0?Et:h[3]==='"'?ta:ea):r===ta||r===ea?r=Et:r===Xo||r===Zo?r=ys:(r=Et,i=void 0);const u=r===Et&&o[a+1].startsWith("/>")?" ":"";n+=r===ys?A+Dd:c>=0?(s.push(l),A.slice(0,c)+ro+A.slice(c)+at+u):A+at+(c===-2?(s.push(void 0),a):u)}return[lc(o,n+(o[t]||"<?>")+(e===2?"</svg>":"")),s]};class oi{constructor({strings:e,_$litType$:t},s){let i;this.parts=[];let n=0,r=0;const a=e.length-1,A=this.parts,[l,h]=Nd(e,t);if(this.el=oi.createElement(l,s),Mt.currentNode=this.el.content,t===2){const c=this.el.content,d=c.firstChild;d.remove(),c.append(...d.childNodes)}for(;(i=Mt.nextNode())!==null&&A.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const c=[];for(const d of i.getAttributeNames())if(d.endsWith(ro)||d.startsWith(at)){const u=h[r++];if(c.push(d),u!==void 0){const g=i.getAttribute(u.toLowerCase()+ro).split(at),p=/([.?@])?(.*)/.exec(u);A.push({type:1,index:n,name:p[2],strings:g,ctor:p[1]==="."?kd:p[1]==="?"?Pd:p[1]==="@"?Od:yn})}else A.push({type:6,index:n})}for(const d of c)i.removeAttribute(d)}if(Ac.test(i.tagName)){const c=i.textContent.split(at),d=c.length-1;if(d>0){i.textContent=ps?ps.emptyScript:"";for(let u=0;u<d;u++)i.append(c[u],ni()),Mt.nextNode(),A.push({type:2,index:++n});i.append(c[d],ni())}}}else if(i.nodeType===8)if(i.data===oc)A.push({type:2,index:n});else{let c=-1;for(;(c=i.data.indexOf(at,c+1))!==-1;)A.push({type:7,index:n}),c+=at.length-1}n++}}static createElement(e,t){const s=Pt.createElement("template");return s.innerHTML=e,s}}function ms(o,e,t=o,s){var i,n,r,a;if(e===fs)return e;let A=s!==void 0?(i=t._$Co)===null||i===void 0?void 0:i[s]:t._$Cl;const l=ri(e)?void 0:e._$litDirective$;return(A==null?void 0:A.constructor)!==l&&((n=A==null?void 0:A._$AO)===null||n===void 0||n.call(A,!1),l===void 0?A=void 0:(A=new l(o),A._$AT(o,t,s)),s!==void 0?((r=(a=t)._$Co)!==null&&r!==void 0?r:a._$Co=[])[s]=A:t._$Cl=A),A!==void 0&&(e=ms(o,A._$AS(o,e.values),A,s)),e}class Ud{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:s},parts:i}=this._$AD,n=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:Pt).importNode(s,!0);Mt.currentNode=n;let r=Mt.nextNode(),a=0,A=0,l=i[0];for(;l!==void 0;){if(a===l.index){let h;l.type===2?h=new di(r,r.nextSibling,this,e):l.type===1?h=new l.ctor(r,l.name,l.strings,this,e):l.type===6&&(h=new Hd(r,this,e)),this._$AV.push(h),l=i[++A]}a!==(l==null?void 0:l.index)&&(r=Mt.nextNode(),a++)}return Mt.currentNode=Pt,n}v(e){let t=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,t),t+=s.strings.length-2):s._$AI(e[t])),t++}}class di{constructor(e,t,s,i){var n;this.type=2,this._$AH=re,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=s,this.options=i,this._$Cp=(n=i==null?void 0:i.isConnected)===null||n===void 0||n}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ms(this,e,t),ri(e)?e===re||e==null||e===""?(this._$AH!==re&&this._$AR(),this._$AH=re):e!==this._$AH&&e!==fs&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Ld(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==re&&ri(this._$AH)?this._$AA.nextSibling.data=e:this.$(Pt.createTextNode(e)),this._$AH=e}g(e){var t;const{values:s,_$litType$:i}=e,n=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=oi.createElement(lc(i.h,i.h[0]),this.options)),i);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===n)this._$AH.v(s);else{const r=new Ud(n,this),a=r.u(this.options);r.v(s),this.$(a),this._$AH=r}}_$AC(e){let t=sa.get(e.strings);return t===void 0&&sa.set(e.strings,t=new oi(e)),t}T(e){ac(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let s,i=0;for(const n of e)i===t.length?t.push(s=new di(this.k(ni()),this.k(ni()),this,this.options)):s=t[i],s._$AI(n),i++;i<t.length&&(this._$AR(s&&s._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var s;for((s=this._$AP)===null||s===void 0||s.call(this,!1,!0,t);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var t;this._$AM===void 0&&(this._$Cp=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class yn{constructor(e,t,s,i,n){this.type=1,this._$AH=re,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=re}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,s,i){const n=this.strings;let r=!1;if(n===void 0)e=ms(this,e,t,0),r=!ri(e)||e!==this._$AH&&e!==fs,r&&(this._$AH=e);else{const a=e;let A,l;for(e=n[0],A=0;A<n.length-1;A++)l=ms(this,a[s+A],t,A),l===fs&&(l=this._$AH[A]),r||(r=!ri(l)||l!==this._$AH[A]),l===re?e=re:e!==re&&(e+=(l??"")+n[A+1]),this._$AH[A]=l}r&&!i&&this.j(e)}j(e){e===re?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class kd extends yn{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===re?void 0:e}}const Gd=ps?ps.emptyScript:"";class Pd extends yn{constructor(){super(...arguments),this.type=4}j(e){e&&e!==re?this.element.setAttribute(this.name,Gd):this.element.removeAttribute(this.name)}}class Od extends yn{constructor(e,t,s,i,n){super(e,t,s,i,n),this.type=5}_$AI(e,t=this){var s;if((e=(s=ms(this,e,t,0))!==null&&s!==void 0?s:re)===fs)return;const i=this._$AH,n=e===re&&i!==re||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==re&&(i===re||n);n&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,s;typeof this._$AH=="function"?this._$AH.call((s=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&s!==void 0?s:this.element,e):this._$AH.handleEvent(e)}}class Hd{constructor(e,t,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){ms(this,e)}}const ia=cn.litHtmlPolyfillSupport;ia==null||ia(oi,di),((Tn=cn.litHtmlVersions)!==null&&Tn!==void 0?Tn:cn.litHtmlVersions=[]).push("2.8.0");const cc=(o,e,t)=>{var s,i;const n=(s=t==null?void 0:t.renderBefore)!==null&&s!==void 0?s:e;let r=n._$litPart$;if(r===void 0){const a=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:null;n._$litPart$=r=new di(e.insertBefore(ni(),a),a,void 0,t??{})}return r._$AI(o),r};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Mn,Dn;class Wi extends Rt{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const s=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=s.firstChild),s}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=cc(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return fs}}Wi.finalized=!0,Wi._$litElement$=!0,(Mn=globalThis.litElementHydrateSupport)===null||Mn===void 0||Mn.call(globalThis,{LitElement:Wi});const na=globalThis.litElementPolyfillSupport;na==null||na({LitElement:Wi});((Dn=globalThis.litElementVersions)!==null&&Dn!==void 0?Dn:globalThis.litElementVersions=[]).push("3.3.3");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,uc=hc&&self.XRSession.prototype.requestHitTestSource!=null,Ln=self.ResizeObserver!=null,Fn=self.IntersectionObserver!=null,dc=uc;(()=>{const o=navigator.userAgent||navigator.vendor||self.opera;let e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4)))&&(e=!0),e})();const $d=/android/i.test(navigator.userAgent),Vd=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,qd=/firefox/i.test(navigator.userAgent),Kd=/OculusBrowser/.test(navigator.userAgent),Yd=$d&&!qd&&!Kd,zd=!!(window.webkit&&window.webkit.messageHandlers),ra=(()=>{if(Vd){if(zd)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const o=document.createElement("a");return!!(o.relList&&o.relList.supports&&o.relList.supports("ar"))}}else return!1})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=o=>o&&o!=="null"?Jd(o):null,oa=()=>{if(dc)return;const o=[];throw hc||o.push("WebXR Device API"),uc||o.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${o.join(", ")}`)},Jd=o=>new URL(o,window.location.toString()).toString(),jd=(o,e)=>{let t=null;const s=(...i)=>{t==null&&(o(...i),t=self.setTimeout(()=>t=null,e))};return s.flush=()=>{t!=null&&(self.clearTimeout(t),t=null)},s},aa=(o,e)=>{let t=null;return(...s)=>{t!=null&&self.clearTimeout(t),t=self.setTimeout(()=>{t=null,o(...s)},e)}},Fe=(o,e,t)=>Math.max(e,Math.min(t,o)),Wd=1,oo=(()=>{const o=(()=>{var e;if(!((e=document.documentElement.getAttribute("itemtype"))===null||e===void 0)&&e.includes("schema.org/SearchResultsPage"))return!0;const t=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[];for(const s of t)if(s.name==="viewport")return!0;return!1})();return o||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>o?window.devicePixelRatio:Wd})(),pc=(()=>{const o="model-viewer-debug-mode",e=new RegExp(`[?&]${o}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})(),Xd=(o=0)=>new Promise(e=>setTimeout(e,o)),Zd=(o,e,t=null)=>new Promise(s=>{function i(n){(!t||t(n))&&(s(n),o.removeEventListener(e,i))}o.addEventListener(e,i)});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws=globalThis&&globalThis.__decorate||function(o,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,s);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(n=(i<3?r(n):i>3?r(e,t,n):r(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const eg=.5,tg=0,sg=1,ig=1,Os=Symbol("currentEnvironmentMap"),Hs=Symbol("currentBackground"),hn=Symbol("updateEnvironment"),Ei=Symbol("cancelEnvironmentUpdate"),ng=o=>{var e,t,s;class i extends o{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=tg,this.shadowSoftness=sg,this.exposure=ig,this[e]=null,this[t]=null,this[s]=null}updated(r){super.updated(r),r.has("shadowIntensity")&&(this[x].setShadowIntensity(this.shadowIntensity*eg),this[Ie]()),r.has("shadowSoftness")&&(this[x].setShadowSoftness(this.shadowSoftness),this[Ie]()),r.has("exposure")&&(this[x].exposure=this.exposure,this[Ie]()),(r.has("environmentImage")||r.has("skyboxImage"))&&this[Is]()&&this[hn]()}hasBakedShadow(){return this[x].bakedShadows.size>0}async[(e=Os,t=Hs,s=Ei,hn)](){const{skyboxImage:r,environmentImage:a}=this;this[Ei]!=null&&(this[Ei](),this[Ei]=null);const{textureUtils:A}=this[K];if(A==null)return;const l=this[Ot].beginActivity();try{const{environmentMap:h,skybox:c}=await A.generateEnvironmentMapAndSkybox(gc(r),a,d=>l(Fe(d,0,1)));this[Os]!==h&&(this[Os]=h,this.dispatchEvent(new CustomEvent("environment-change"))),c!=null?this[Hs]=c.name===h.name?h:c:this[Hs]=null,this[x].setEnvironmentAndSkybox(this[Os],this[Hs]),this[x].dispatchEvent({type:"envmap-update"})}catch(h){if(h instanceof Error)throw this[x].setEnvironmentAndSkybox(null,null),h}finally{l(1)}}}return ws([F({type:String,attribute:"environment-image"})],i.prototype,"environmentImage",void 0),ws([F({type:String,attribute:"skybox-image"})],i.prototype,"skyboxImage",void 0),ws([F({type:Number,attribute:"shadow-intensity"})],i.prototype,"shadowIntensity",void 0),ws([F({type:Number,attribute:"shadow-softness"})],i.prototype,"shadowSoftness",void 0),ws([F({type:Number})],i.prototype,"exposure",void 0),i};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=Bn`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=Bn`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=Bn`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=Bn`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View in your space">
        ${ag}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${og}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${rg}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,lg=o=>{cc(Ag,o)},Nn=new WeakMap;class cg extends yo{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,s,i){const n=new Lt(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,r=>{this.parse(r,t,i)},s,i)}parse(e,t,s){this.decodeDracoFile(e,t,null,null,me).catch(s)}decodeDracoFile(e,t,s,i,n=Ft){const r={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!s,vertexColorSpace:n};return this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){const s=JSON.stringify(t);if(Nn.has(e)){const A=Nn.get(e);if(A.key===s)return A.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const n=this.workerNextTaskID++,r=e.byteLength,a=this._getWorker(n,r).then(A=>(i=A,new Promise((l,h)=>{i._callbacks[n]={resolve:l,reject:h},i.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(A=>this._createGeometry(A.geometry));return a.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),Nn.set(e,{key:s,promise:a}),a}_createGeometry(e){const t=new wo;e.index&&t.setIndex(new je(e.index.array,1));for(let s=0;s<e.attributes.length;s++){const i=e.attributes[s],n=i.name,r=i.array,a=i.itemSize,A=new je(r,a);n==="color"&&(this._assignVertexColorSpace(A,i.vertexColorSpace),A.normalized=!(r instanceof Float32Array)),t.setAttribute(n,A)}return t}_assignVertexColorSpace(e,t){if(t!==me)return;const s=new Re;for(let i=0,n=e.count;i<n;i++)s.fromBufferAttribute(e,i).convertSRGBToLinear(),e.setXYZ(i,s.r,s.g,s.b)}_loadLibrary(e,t){const s=new Lt(this.manager);return s.setPath(this.decoderPath),s.setResponseType(t),s.setWithCredentials(this.withCredentials),new Promise((i,n)=>{s.load(e,i,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(s=>{const i=s[0];e||(this.decoderConfig.wasmBinary=s[1]);const n=hg.toString(),r=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(n){const r=n.data;switch(r.type){case"decode":i._callbacks[r.id].resolve(r);break;case"error":i._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,n){return i._taskLoad>n._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[e]=t,s._taskLoad+=t,s})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function hg(){let o,e;onmessage=function(r){const a=r.data;switch(a.type){case"init":o=a.decoderConfig,e=new Promise(function(h){o.onModuleLoaded=function(c){h({draco:c})},DracoDecoderModule(o)});break;case"decode":const A=a.buffer,l=a.taskConfig;e.then(h=>{const c=h.draco,d=new c.Decoder;try{const u=t(c,d,new Int8Array(A),l),g=u.attributes.map(p=>p.array.buffer);u.index&&g.push(u.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:u},g)}catch(u){console.error(u),self.postMessage({type:"error",id:a.id,error:u.message})}finally{c.destroy(d)}});break}};function t(r,a,A,l){const h=l.attributeIDs,c=l.attributeTypes;let d,u;const g=a.GetEncodedGeometryType(A);if(g===r.TRIANGULAR_MESH)d=new r.Mesh,u=a.DecodeArrayToMesh(A,A.byteLength,d);else if(g===r.POINT_CLOUD)d=new r.PointCloud,u=a.DecodeArrayToPointCloud(A,A.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!u.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());const p={index:null,attributes:[]};for(const f in h){const I=self[c[f]];let C,E;if(l.useUniqueIDs)E=h[f],C=a.GetAttributeByUniqueId(d,E);else{if(E=a.GetAttributeId(d,r[h[f]]),E===-1)continue;C=a.GetAttribute(d,E)}const m=i(r,a,d,f,I,C);f==="color"&&(m.vertexColorSpace=l.vertexColorSpace),p.attributes.push(m)}return g===r.TRIANGULAR_MESH&&(p.index=s(r,a,d)),r.destroy(d),p}function s(r,a,A){const h=A.num_faces()*3,c=h*4,d=r._malloc(c);a.GetTrianglesUInt32Array(A,c,d);const u=new Uint32Array(r.HEAPF32.buffer,d,h).slice();return r._free(d),{array:u,itemSize:1}}function i(r,a,A,l,h,c){const d=c.num_components(),g=A.num_points()*d,p=g*h.BYTES_PER_ELEMENT,f=n(r,h),I=r._malloc(p);a.GetAttributeDataArrayForAllPoints(A,c,f,p,I);const C=new h(r.HEAPF32.buffer,I,g).slice();return r._free(I),{name:l,array:C,itemSize:d}}function n(r,a){switch(a){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}function Aa(o,e){if(e===Ch)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),o;if(e===eo||e===Pl){let t=o.getIndex();if(t===null){const r=[],a=o.getAttribute("position");if(a!==void 0){for(let A=0;A<a.count;A++)r.push(A);o.setIndex(r),t=o.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),o}const s=t.count-2,i=[];if(e===eo)for(let r=1;r<=s;r++)i.push(t.getX(0)),i.push(t.getX(r)),i.push(t.getX(r+1));else for(let r=0;r<s;r++)r%2===0?(i.push(t.getX(r)),i.push(t.getX(r+1)),i.push(t.getX(r+2))):(i.push(t.getX(r+2)),i.push(t.getX(r+1)),i.push(t.getX(r)));i.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const n=o.clone();return n.setIndex(i),n.clearGroups(),n}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),o}class ug extends yo{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new mg(t)}),this.register(function(t){return new vg(t)}),this.register(function(t){return new xg(t)}),this.register(function(t){return new bg(t)}),this.register(function(t){return new Eg(t)}),this.register(function(t){return new Cg(t)}),this.register(function(t){return new Bg(t)}),this.register(function(t){return new yg(t)}),this.register(function(t){return new fg(t)}),this.register(function(t){return new wg(t)}),this.register(function(t){return new Ig(t)}),this.register(function(t){return new Qg(t)}),this.register(function(t){return new gg(t)}),this.register(function(t){return new Sg(t)}),this.register(function(t){return new _g(t)})}load(e,t,s,i){const n=this;let r;this.resourcePath!==""?r=this.resourcePath:this.path!==""?r=this.path:r=to.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){i?i(l):console.error(l),n.manager.itemError(e),n.manager.itemEnd(e)},A=new Lt(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(l){try{n.parse(l,r,function(h){t(h),n.manager.itemEnd(e)},a)}catch(h){a(h)}},s,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,s,i){let n;const r={},a={},A=new TextDecoder;if(typeof e=="string")n=JSON.parse(e);else if(e instanceof ArrayBuffer)if(A.decode(new Uint8Array(e,0,4))===fc){try{r[H.KHR_BINARY_GLTF]=new Tg(e)}catch(c){i&&i(c);return}n=JSON.parse(r[H.KHR_BINARY_GLTF].content)}else n=JSON.parse(A.decode(e));else n=e;if(n.asset===void 0||n.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new $g(n,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const c=this.pluginCallbacks[h](l);a[c.name]=c,r[c.name]=!0}if(n.extensionsUsed)for(let h=0;h<n.extensionsUsed.length;++h){const c=n.extensionsUsed[h],d=n.extensionsRequired||[];switch(c){case H.KHR_MATERIALS_UNLIT:r[c]=new pg;break;case H.KHR_DRACO_MESH_COMPRESSION:r[c]=new Rg(n,this.dracoLoader);break;case H.KHR_TEXTURE_TRANSFORM:r[c]=new Mg;break;case H.KHR_MESH_QUANTIZATION:r[c]=new Dg;break;default:d.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(r),l.setPlugins(a),l.parse(s,i)}parseAsync(e,t){const s=this;return new Promise(function(i,n){s.parse(e,t,i,n)})}}function dg(){let o={};return{get:function(e){return o[e]},add:function(e,t){o[e]=t},remove:function(e){delete o[e]},removeAll:function(){o={}}}}const H={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class gg{constructor(e){this.parser=e,this.name=H.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let s=0,i=t.length;s<i;s++){const n=t[s];n.extensions&&n.extensions[this.name]&&n.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,s="light:"+e;let i=t.cache.get(s);if(i)return i;const n=t.json,A=((n.extensions&&n.extensions[this.name]||{}).lights||[])[e];let l;const h=new Re(16777215);A.color!==void 0&&h.fromArray(A.color);const c=A.range!==void 0?A.range:0;switch(A.type){case"directional":l=new Ol(h),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new Qo(h),l.distance=c;break;case"spot":l=new Bh(h),l.distance=c,A.spot=A.spot||{},A.spot.innerConeAngle=A.spot.innerConeAngle!==void 0?A.spot.innerConeAngle:0,A.spot.outerConeAngle=A.spot.outerConeAngle!==void 0?A.spot.outerConeAngle:Math.PI/4,l.angle=A.spot.outerConeAngle,l.penumbra=1-A.spot.innerConeAngle/A.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+A.type)}return l.position.set(0,0,0),l.decay=2,rt(l,A),A.intensity!==void 0&&(l.intensity=A.intensity),l.name=t.createUniqueName(A.name||"light_"+e),i=Promise.resolve(l),t.cache.add(s,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,s=this.parser,n=s.json.nodes[e],a=(n.extensions&&n.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(A){return s._getNodeRef(t.cache,a,A)})}}let pg=class{constructor(){this.name=H.KHR_MATERIALS_UNLIT}getMaterialType(){return We}extendParams(e,t,s){const i=[];e.color=new Re(1,1,1),e.opacity=1;const n=t.pbrMetallicRoughness;if(n){if(Array.isArray(n.baseColorFactor)){const r=n.baseColorFactor;e.color.fromArray(r),e.opacity=r[3]}n.baseColorTexture!==void 0&&i.push(s.assignTexture(e,"map",n.baseColorTexture,me))}return Promise.all(i)}},fg=class{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name].emissiveStrength;return n!==void 0&&(t.emissiveIntensity=n),Promise.resolve()}},mg=class{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:It}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],r=i.extensions[this.name];if(r.clearcoatFactor!==void 0&&(t.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&n.push(s.assignTexture(t,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&n.push(s.assignTexture(t,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(n.push(s.assignTexture(t,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const a=r.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new xe(a,a)}return Promise.all(n)}},Ig=class{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:It}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],r=i.extensions[this.name];return r.iridescenceFactor!==void 0&&(t.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&n.push(s.assignTexture(t,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(t.iridescenceIOR=r.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&n.push(s.assignTexture(t,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(n)}},Eg=class{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_SHEEN}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:It}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[];t.sheenColor=new Re(0,0,0),t.sheenRoughness=0,t.sheen=1;const r=i.extensions[this.name];return r.sheenColorFactor!==void 0&&t.sheenColor.fromArray(r.sheenColorFactor),r.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&n.push(s.assignTexture(t,"sheenColorMap",r.sheenColorTexture,me)),r.sheenRoughnessTexture!==void 0&&n.push(s.assignTexture(t,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(n)}},Cg=class{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:It}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],r=i.extensions[this.name];return r.transmissionFactor!==void 0&&(t.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&n.push(s.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(n)}},Bg=class{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_VOLUME}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:It}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],r=i.extensions[this.name];t.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&n.push(s.assignTexture(t,"thicknessMap",r.thicknessTexture)),t.attenuationDistance=r.attenuationDistance||1/0;const a=r.attenuationColor||[1,1,1];return t.attenuationColor=new Re(a[0],a[1],a[2]),Promise.all(n)}},yg=class{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_IOR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:It}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.ior=n.ior!==void 0?n.ior:1.5,Promise.resolve()}},wg=class{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_SPECULAR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:It}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],r=i.extensions[this.name];t.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&n.push(s.assignTexture(t,"specularIntensityMap",r.specularTexture));const a=r.specularColorFactor||[1,1,1];return t.specularColor=new Re(a[0],a[1],a[2]),r.specularColorTexture!==void 0&&n.push(s.assignTexture(t,"specularColorMap",r.specularColorTexture,me)),Promise.all(n)}},Qg=class{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:It}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],r=i.extensions[this.name];return r.anisotropyStrength!==void 0&&(t.anisotropy=r.anisotropyStrength),r.anisotropyRotation!==void 0&&(t.anisotropyRotation=r.anisotropyRotation),r.anisotropyTexture!==void 0&&n.push(s.assignTexture(t,"anisotropyMap",r.anisotropyTexture)),Promise.all(n)}};class vg{constructor(e){this.parser=e,this.name=H.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,s=t.json,i=s.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const n=i.extensions[this.name],r=t.options.ktx2Loader;if(!r){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,n.source,r)}}class xg{constructor(e){this.parser=e,this.name=H.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,s=this.parser,i=s.json,n=i.textures[e];if(!n.extensions||!n.extensions[t])return null;const r=n.extensions[t],a=i.images[r.source];let A=s.textureLoader;if(a.uri){const l=s.options.manager.getHandler(a.uri);l!==null&&(A=l)}return this.detectSupport().then(function(l){if(l)return s.loadTextureImage(e,r.source,A);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class bg{constructor(e){this.parser=e,this.name=H.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,s=this.parser,i=s.json,n=i.textures[e];if(!n.extensions||!n.extensions[t])return null;const r=n.extensions[t],a=i.images[r.source];let A=s.textureLoader;if(a.uri){const l=s.options.manager.getHandler(a.uri);l!==null&&(A=l)}return this.detectSupport().then(function(l){if(l)return s.loadTextureImage(e,r.source,A);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Sg{constructor(e){this.name=H.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,s=t.bufferViews[e];if(s.extensions&&s.extensions[this.name]){const i=s.extensions[this.name],n=this.parser.getDependency("buffer",i.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return n.then(function(a){const A=i.byteOffset||0,l=i.byteLength||0,h=i.count,c=i.byteStride,d=new Uint8Array(a,A,l);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(h,c,d,i.mode,i.filter).then(function(u){return u.buffer}):r.ready.then(function(){const u=new ArrayBuffer(h*c);return r.decodeGltfBuffer(new Uint8Array(u),h,c,d,i.mode,i.filter),u})})}else return null}}class _g{constructor(e){this.name=H.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,s=t.nodes[e];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const i=t.meshes[s.mesh];for(const l of i.primitives)if(l.mode!==Qe.TRIANGLES&&l.mode!==Qe.TRIANGLE_STRIP&&l.mode!==Qe.TRIANGLE_FAN&&l.mode!==void 0)return null;const r=s.extensions[this.name].attributes,a=[],A={};for(const l in r)a.push(this.parser.getDependency("accessor",r[l]).then(h=>(A[l]=h,A[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const h=l.pop(),c=h.isGroup?h.children:[h],d=l[0].count,u=[];for(const g of c){const p=new Ze,f=new U,I=new bo,C=new U(1,1,1),E=new yh(g.geometry,g.material,d);for(let m=0;m<d;m++)A.TRANSLATION&&f.fromBufferAttribute(A.TRANSLATION,m),A.ROTATION&&I.fromBufferAttribute(A.ROTATION,m),A.SCALE&&C.fromBufferAttribute(A.SCALE,m),E.setMatrixAt(m,p.compose(f,I,C));for(const m in A)m!=="TRANSLATION"&&m!=="ROTATION"&&m!=="SCALE"&&g.geometry.setAttribute(m,A[m]);ci.prototype.copy.call(E,g),this.parser.assignFinalMaterial(E),u.push(E)}return h.isGroup?(h.clear(),h.add(...u),h):u[0]}))}}const fc="glTF",Qs=12,la={JSON:1313821514,BIN:5130562};class Tg{constructor(e){this.name=H.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Qs),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==fc)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Qs,n=new DataView(e,Qs);let r=0;for(;r<i;){const a=n.getUint32(r,!0);r+=4;const A=n.getUint32(r,!0);if(r+=4,A===la.JSON){const l=new Uint8Array(e,Qs+r,a);this.content=s.decode(l)}else if(A===la.BIN){const l=Qs+r;this.body=e.slice(l,l+a)}r+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Rg{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=H.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const s=this.json,i=this.dracoLoader,n=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,a={},A={},l={};for(const h in r){const c=ao[h]||h.toLowerCase();a[c]=r[h]}for(const h in e.attributes){const c=ao[h]||h.toLowerCase();if(r[h]!==void 0){const d=s.accessors[e.attributes[h]],u=cs[d.componentType];l[c]=u.name,A[c]=d.normalized===!0}}return t.getDependency("bufferView",n).then(function(h){return new Promise(function(c){i.decodeDracoFile(h,function(d){for(const u in d.attributes){const g=d.attributes[u],p=A[u];p!==void 0&&(g.normalized=p)}c(d)},a,l)})})}}class Mg{constructor(){this.name=H.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Dg{constructor(){this.name=H.KHR_MESH_QUANTIZATION}}class mc extends Uh{constructor(e,t,s,i){super(e,t,s,i)}copySampleValue_(e){const t=this.resultBuffer,s=this.sampleValues,i=this.valueSize,n=e*i*3+i;for(let r=0;r!==i;r++)t[r]=s[n+r];return t}interpolate_(e,t,s,i){const n=this.resultBuffer,r=this.sampleValues,a=this.valueSize,A=a*2,l=a*3,h=i-t,c=(s-t)/h,d=c*c,u=d*c,g=e*l,p=g-l,f=-2*u+3*d,I=u-d,C=1-f,E=I-d+c;for(let m=0;m!==a;m++){const B=r[p+m+a],y=r[p+m+A]*h,w=r[g+m+a],Q=r[g+m]*h;n[m]=C*B+E*y+f*w+I*Q}return n}}const Lg=new bo;class Fg extends mc{interpolate_(e,t,s,i){const n=super.interpolate_(e,t,s,i);return Lg.fromArray(n).normalize().toArray(n),n}}const Qe={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},cs={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ca={9728:$l,9729:kt,9984:Vl,9985:ql,9986:Kl,9987:mn},ha={33071:Yl,33648:zl,10497:ds},Un={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ao={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},tt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ng={CUBICSPLINE:void 0,LINEAR:xo,STEP:Jl},kn={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ug(o){return o.DefaultMaterial===void 0&&(o.DefaultMaterial=new gs({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:So})),o.DefaultMaterial}function Ct(o,e,t){for(const s in t.extensions)o[s]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[s]=t.extensions[s])}function rt(o,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(o.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function kg(o,e,t){let s=!1,i=!1,n=!1;for(let l=0,h=e.length;l<h;l++){const c=e[l];if(c.POSITION!==void 0&&(s=!0),c.NORMAL!==void 0&&(i=!0),c.COLOR_0!==void 0&&(n=!0),s&&i&&n)break}if(!s&&!i&&!n)return Promise.resolve(o);const r=[],a=[],A=[];for(let l=0,h=e.length;l<h;l++){const c=e[l];if(s){const d=c.POSITION!==void 0?t.getDependency("accessor",c.POSITION):o.attributes.position;r.push(d)}if(i){const d=c.NORMAL!==void 0?t.getDependency("accessor",c.NORMAL):o.attributes.normal;a.push(d)}if(n){const d=c.COLOR_0!==void 0?t.getDependency("accessor",c.COLOR_0):o.attributes.color;A.push(d)}}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(A)]).then(function(l){const h=l[0],c=l[1],d=l[2];return s&&(o.morphAttributes.position=h),i&&(o.morphAttributes.normal=c),n&&(o.morphAttributes.color=d),o.morphTargetsRelative=!0,o})}function Gg(o,e){if(o.updateMorphTargets(),e.weights!==void 0)for(let t=0,s=e.weights.length;t<s;t++)o.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(o.morphTargetInfluences.length===t.length){o.morphTargetDictionary={};for(let s=0,i=t.length;s<i;s++)o.morphTargetDictionary[t[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Pg(o){let e;const t=o.extensions&&o.extensions[H.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Gn(t.attributes):e=o.indices+":"+Gn(o.attributes)+":"+o.mode,o.targets!==void 0)for(let s=0,i=o.targets.length;s<i;s++)e+=":"+Gn(o.targets[s]);return e}function Gn(o){let e="";const t=Object.keys(o).sort();for(let s=0,i=t.length;s<i;s++)e+=t[s]+":"+o[t[s]]+";";return e}function Ao(o){switch(o){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Og(o){return o.search(/\.jpe?g($|\?)/i)>0||o.search(/^data\:image\/jpeg/)===0?"image/jpeg":o.search(/\.webp($|\?)/i)>0||o.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Hg=new Ze;class $g{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new dg,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,i=!1,n=-1;typeof navigator<"u"&&(s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,n=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||s||i&&n<98?this.textureLoader=new Hl(this.options.manager):this.textureLoader=new wh(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Lt(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const s=this,i=this.json,n=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(r){const a={scene:r[0][i.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:i.asset,parser:s,userData:{}};Ct(n,a,i),rt(a,i),Promise.all(s._invokeAll(function(A){return A.afterRoot&&A.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],s=this.json.meshes||[];for(let i=0,n=t.length;i<n;i++){const r=t[i].joints;for(let a=0,A=r.length;a<A;a++)e[r[a]].isBone=!0}for(let i=0,n=e.length;i<n;i++){const r=e[i];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(s[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,s){if(e.refs[t]<=1)return s;const i=s.clone(),n=(r,a)=>{const A=this.associations.get(r);A!=null&&this.associations.set(a,A);for(const[l,h]of r.children.entries())n(h,a.children[l])};return n(s,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let s=0;s<t.length;s++){const i=e(t[s]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const s=[];for(let i=0;i<t.length;i++){const n=e(t[i]);n&&s.push(n)}return s}getDependency(e,t){const s=e+":"+t;let i=this.cache.get(s);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(n){return n.loadNode&&n.loadNode(t)});break;case"mesh":i=this._invokeOne(function(n){return n.loadMesh&&n.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(n){return n.loadBufferView&&n.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(n){return n.loadMaterial&&n.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(n){return n.loadTexture&&n.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(n){return n.loadAnimation&&n.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(s,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const s=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(n,r){return s.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],s=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[H.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(n,r){s.load(to.resolveURL(t.uri,i.path),n,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(s){const i=t.byteLength||0,n=t.byteOffset||0;return s.slice(n,n+i)})}loadAccessor(e){const t=this,s=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const r=Un[i.type],a=cs[i.componentType],A=i.normalized===!0,l=new a(i.count*r);return Promise.resolve(new je(l,r,A))}const n=[];return i.bufferView!==void 0?n.push(this.getDependency("bufferView",i.bufferView)):n.push(null),i.sparse!==void 0&&(n.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),n.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(n).then(function(r){const a=r[0],A=Un[i.type],l=cs[i.componentType],h=l.BYTES_PER_ELEMENT,c=h*A,d=i.byteOffset||0,u=i.bufferView!==void 0?s.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let p,f;if(u&&u!==c){const I=Math.floor(d/u),C="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+I+":"+i.count;let E=t.cache.get(C);E||(p=new l(a,I*u,i.count*u/h),E=new Qh(p,u/h),t.cache.add(C,E)),f=new Fh(E,A,d%u/h,g)}else a===null?p=new l(i.count*A):p=new l(a,d,i.count*A),f=new je(p,A,g);if(i.sparse!==void 0){const I=Un.SCALAR,C=cs[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,m=i.sparse.values.byteOffset||0,B=new C(r[1],E,i.sparse.count*I),y=new l(r[2],m,i.sparse.count*A);a!==null&&(f=new je(f.array.slice(),f.itemSize,f.normalized));for(let w=0,Q=B.length;w<Q;w++){const v=B[w];if(f.setX(v,y[w*A]),A>=2&&f.setY(v,y[w*A+1]),A>=3&&f.setZ(v,y[w*A+2]),A>=4&&f.setW(v,y[w*A+3]),A>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f})}loadTexture(e){const t=this.json,s=this.options,n=t.textures[e].source,r=t.images[n];let a=this.textureLoader;if(r.uri){const A=s.manager.getHandler(r.uri);A!==null&&(a=A)}return this.loadTextureImage(e,n,a)}loadTextureImage(e,t,s){const i=this,n=this.json,r=n.textures[e],a=n.images[t],A=(a.uri||a.bufferView)+":"+r.sampler;if(this.textureCache[A])return this.textureCache[A];const l=this.loadImageSource(t,s).then(function(h){h.flipY=!1,h.name=r.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const d=(n.samplers||{})[r.sampler]||{};return h.magFilter=ca[d.magFilter]||kt,h.minFilter=ca[d.minFilter]||mn,h.wrapS=ha[d.wrapS]||ds,h.wrapT=ha[d.wrapT]||ds,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[A]=l,l}loadImageSource(e,t){const s=this,i=this.json,n=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(c=>c.clone());const r=i.images[e],a=self.URL||self.webkitURL;let A=r.uri||"",l=!1;if(r.bufferView!==void 0)A=s.getDependency("bufferView",r.bufferView).then(function(c){l=!0;const d=new Blob([c],{type:r.mimeType});return A=a.createObjectURL(d),A});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(A).then(function(c){return new Promise(function(d,u){let g=d;t.isImageBitmapLoader===!0&&(g=function(p){const f=new ii(p);f.needsUpdate=!0,d(f)}),t.load(to.resolveURL(c,n.path),g,void 0,u)})}).then(function(c){return l===!0&&a.revokeObjectURL(A),c.userData.mimeType=r.mimeType||Og(r.uri),c}).catch(function(c){throw console.error("THREE.GLTFLoader: Couldn't load texture",A),c});return this.sourceCache[e]=h,h}assignTexture(e,t,s,i){const n=this;return this.getDependency("texture",s.index).then(function(r){if(!r)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(r=r.clone(),r.channel=s.texCoord),n.extensions[H.KHR_TEXTURE_TRANSFORM]){const a=s.extensions!==void 0?s.extensions[H.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const A=n.associations.get(r);r=n.extensions[H.KHR_TEXTURE_TRANSFORM].extendTexture(r,a),n.associations.set(r,A)}}return i!==void 0&&(r.colorSpace=i),e[t]=r,r})}assignFinalMaterial(e){const t=e.geometry;let s=e.material;const i=t.attributes.tangent===void 0,n=t.attributes.color!==void 0,r=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+s.uuid;let A=this.cache.get(a);A||(A=new vh,Yi.prototype.copy.call(A,s),A.color.copy(s.color),A.map=s.map,A.sizeAttenuation=!1,this.cache.add(a,A)),s=A}else if(e.isLine){const a="LineBasicMaterial:"+s.uuid;let A=this.cache.get(a);A||(A=new xh,Yi.prototype.copy.call(A,s),A.color.copy(s.color),A.map=s.map,this.cache.add(a,A)),s=A}if(i||n||r){let a="ClonedMaterial:"+s.uuid+":";i&&(a+="derivative-tangents:"),n&&(a+="vertex-colors:"),r&&(a+="flat-shading:");let A=this.cache.get(a);A||(A=s.clone(),n&&(A.vertexColors=!0),r&&(A.flatShading=!0),i&&(A.normalScale&&(A.normalScale.y*=-1),A.clearcoatNormalScale&&(A.clearcoatNormalScale.y*=-1)),this.cache.add(a,A),this.associations.set(A,this.associations.get(s))),s=A}e.material=s}getMaterialType(){return gs}loadMaterial(e){const t=this,s=this.json,i=this.extensions,n=s.materials[e];let r;const a={},A=n.extensions||{},l=[];if(A[H.KHR_MATERIALS_UNLIT]){const c=i[H.KHR_MATERIALS_UNLIT];r=c.getMaterialType(),l.push(c.extendParams(a,n,t))}else{const c=n.pbrMetallicRoughness||{};if(a.color=new Re(1,1,1),a.opacity=1,Array.isArray(c.baseColorFactor)){const d=c.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}c.baseColorTexture!==void 0&&l.push(t.assignTexture(a,"map",c.baseColorTexture,me)),a.metalness=c.metallicFactor!==void 0?c.metallicFactor:1,a.roughness=c.roughnessFactor!==void 0?c.roughnessFactor:1,c.metallicRoughnessTexture!==void 0&&(l.push(t.assignTexture(a,"metalnessMap",c.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",c.metallicRoughnessTexture))),r=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}n.doubleSided===!0&&(a.side=Gt);const h=n.alphaMode||kn.OPAQUE;if(h===kn.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===kn.MASK&&(a.alphaTest=n.alphaCutoff!==void 0?n.alphaCutoff:.5)),n.normalTexture!==void 0&&r!==We&&(l.push(t.assignTexture(a,"normalMap",n.normalTexture)),a.normalScale=new xe(1,1),n.normalTexture.scale!==void 0)){const c=n.normalTexture.scale;a.normalScale.set(c,c)}return n.occlusionTexture!==void 0&&r!==We&&(l.push(t.assignTexture(a,"aoMap",n.occlusionTexture)),n.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=n.occlusionTexture.strength)),n.emissiveFactor!==void 0&&r!==We&&(a.emissive=new Re().fromArray(n.emissiveFactor)),n.emissiveTexture!==void 0&&r!==We&&l.push(t.assignTexture(a,"emissiveMap",n.emissiveTexture,me)),Promise.all(l).then(function(){const c=new r(a);return n.name&&(c.name=n.name),rt(c,n),t.associations.set(c,{materials:e}),n.extensions&&Ct(i,c,n),c})}createUniqueName(e){const t=ti.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,s=this.extensions,i=this.primitiveCache;function n(a){return s[H.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(A){return ua(A,a,t)})}const r=[];for(let a=0,A=e.length;a<A;a++){const l=e[a],h=Pg(l),c=i[h];if(c)r.push(c.promise);else{let d;l.extensions&&l.extensions[H.KHR_DRACO_MESH_COMPRESSION]?d=n(l):d=ua(new wo,l,t),i[h]={primitive:l,promise:d},r.push(d)}}return Promise.all(r)}loadMesh(e){const t=this,s=this.json,i=this.extensions,n=s.meshes[e],r=n.primitives,a=[];for(let A=0,l=r.length;A<l;A++){const h=r[A].material===void 0?Ug(this.cache):this.getDependency("material",r[A].material);a.push(h)}return a.push(t.loadGeometries(r)),Promise.all(a).then(function(A){const l=A.slice(0,A.length-1),h=A[A.length-1],c=[];for(let u=0,g=h.length;u<g;u++){const p=h[u],f=r[u];let I;const C=l[u];if(f.mode===Qe.TRIANGLES||f.mode===Qe.TRIANGLE_STRIP||f.mode===Qe.TRIANGLE_FAN||f.mode===void 0)I=n.isSkinnedMesh===!0?new bh(p,C):new P(p,C),I.isSkinnedMesh===!0&&I.normalizeSkinWeights(),f.mode===Qe.TRIANGLE_STRIP?I.geometry=Aa(I.geometry,Pl):f.mode===Qe.TRIANGLE_FAN&&(I.geometry=Aa(I.geometry,eo));else if(f.mode===Qe.LINES)I=new Sh(p,C);else if(f.mode===Qe.LINE_STRIP)I=new _h(p,C);else if(f.mode===Qe.LINE_LOOP)I=new Th(p,C);else if(f.mode===Qe.POINTS)I=new Rh(p,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);Object.keys(I.geometry.morphAttributes).length>0&&Gg(I,n),I.name=t.createUniqueName(n.name||"mesh_"+e),rt(I,n),f.extensions&&Ct(i,I,f),t.assignFinalMaterial(I),c.push(I)}for(let u=0,g=c.length;u<g;u++)t.associations.set(c[u],{meshes:e,primitives:u});if(c.length===1)return n.extensions&&Ct(i,c[0],n),c[0];const d=new zi;n.extensions&&Ct(i,d,n),t.associations.set(d,{meshes:e});for(let u=0,g=c.length;u<g;u++)d.add(c[u]);return d})}loadCamera(e){let t;const s=this.json.cameras[e],i=s[s.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?t=new si(an.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):s.type==="orthographic"&&(t=new vo(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),s.name&&(t.name=this.createUniqueName(s.name)),rt(t,s),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],s=[];for(let i=0,n=t.joints.length;i<n;i++)s.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",t.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(i){const n=i.pop(),r=i,a=[],A=[];for(let l=0,h=r.length;l<h;l++){const c=r[l];if(c){a.push(c);const d=new Ze;n!==null&&d.fromArray(n.array,l*16),A.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new Mh(a,A)})}loadAnimation(e){const t=this.json,s=this,i=t.animations[e],n=i.name?i.name:"animation_"+e,r=[],a=[],A=[],l=[],h=[];for(let c=0,d=i.channels.length;c<d;c++){const u=i.channels[c],g=i.samplers[u.sampler],p=u.target,f=p.node,I=i.parameters!==void 0?i.parameters[g.input]:g.input,C=i.parameters!==void 0?i.parameters[g.output]:g.output;p.node!==void 0&&(r.push(this.getDependency("node",f)),a.push(this.getDependency("accessor",I)),A.push(this.getDependency("accessor",C)),l.push(g),h.push(p))}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(A),Promise.all(l),Promise.all(h)]).then(function(c){const d=c[0],u=c[1],g=c[2],p=c[3],f=c[4],I=[];for(let C=0,E=d.length;C<E;C++){const m=d[C],B=u[C],y=g[C],w=p[C],Q=f[C];if(m===void 0)continue;m.updateMatrix&&(m.updateMatrix(),m.matrixAutoUpdate=!0);const v=s._createAnimationTracks(m,B,y,w,Q);if(v)for(let S=0;S<v.length;S++)I.push(v[S])}return new Dh(n,void 0,I)})}createNodeMesh(e){const t=this.json,s=this,i=t.nodes[e];return i.mesh===void 0?null:s.getDependency("mesh",i.mesh).then(function(n){const r=s._getNodeRef(s.meshCache,i.mesh,n);return i.weights!==void 0&&r.traverse(function(a){if(a.isMesh)for(let A=0,l=i.weights.length;A<l;A++)a.morphTargetInfluences[A]=i.weights[A]}),r})}loadNode(e){const t=this.json,s=this,i=t.nodes[e],n=s._loadNodeShallow(e),r=[],a=i.children||[];for(let l=0,h=a.length;l<h;l++)r.push(s.getDependency("node",a[l]));const A=i.skin===void 0?Promise.resolve(null):s.getDependency("skin",i.skin);return Promise.all([n,Promise.all(r),A]).then(function(l){const h=l[0],c=l[1],d=l[2];d!==null&&h.traverse(function(u){u.isSkinnedMesh&&u.bind(d,Hg)});for(let u=0,g=c.length;u<g;u++)h.add(c[u]);return h})}_loadNodeShallow(e){const t=this.json,s=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const n=t.nodes[e],r=n.name?i.createUniqueName(n.name):"",a=[],A=i._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return A&&a.push(A),n.camera!==void 0&&a.push(i.getDependency("camera",n.camera).then(function(l){return i._getNodeRef(i.cameraCache,n.camera,l)})),i._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let h;if(n.isBone===!0?h=new Lh:l.length>1?h=new zi:l.length===1?h=l[0]:h=new ci,h!==l[0])for(let c=0,d=l.length;c<d;c++)h.add(l[c]);if(n.name&&(h.userData.name=n.name,h.name=r),rt(h,n),n.extensions&&Ct(s,h,n),n.matrix!==void 0){const c=new Ze;c.fromArray(n.matrix),h.applyMatrix4(c)}else n.translation!==void 0&&h.position.fromArray(n.translation),n.rotation!==void 0&&h.quaternion.fromArray(n.rotation),n.scale!==void 0&&h.scale.fromArray(n.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,s=this.json.scenes[e],i=this,n=new zi;s.name&&(n.name=i.createUniqueName(s.name)),rt(n,s),s.extensions&&Ct(t,n,s);const r=s.nodes||[],a=[];for(let A=0,l=r.length;A<l;A++)a.push(i.getDependency("node",r[A]));return Promise.all(a).then(function(A){for(let h=0,c=A.length;h<c;h++)n.add(A[h]);const l=h=>{const c=new Map;for(const[d,u]of i.associations)(d instanceof Yi||d instanceof ii)&&c.set(d,u);return h.traverse(d=>{const u=i.associations.get(d);u!=null&&c.set(d,u)}),c};return i.associations=l(n),n})}_createAnimationTracks(e,t,s,i,n){const r=[],a=e.name?e.name:e.uuid,A=[];tt[n.path]===tt.weights?e.traverse(function(d){d.morphTargetInfluences&&A.push(d.name?d.name:d.uuid)}):A.push(a);let l;switch(tt[n.path]){case tt.weights:l=Vo;break;case tt.rotation:l=qo;break;case tt.position:case tt.scale:default:switch(s.itemSize){case 1:l=Vo;break;case 2:case 3:l=Nh;break}break}const h=i.interpolation!==void 0?Ng[i.interpolation]:xo,c=this._getArrayFromAccessor(s);for(let d=0,u=A.length;d<u;d++){const g=new l(A[d]+"."+tt[n.path],t.array,c,h);h==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),r.push(g)}return r}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const s=Ao(t.constructor),i=new Float32Array(t.length);for(let n=0,r=t.length;n<r;n++)i[n]=t[n]*s;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(s){const i=this instanceof qo?Fg:mc;return new i(this.times,this.values,this.getValueSize()/3,s)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Vg(o,e,t){const s=e.attributes,i=new Tt;if(s.POSITION!==void 0){const a=t.json.accessors[s.POSITION],A=a.min,l=a.max;if(A!==void 0&&l!==void 0){if(i.set(new U(A[0],A[1],A[2]),new U(l[0],l[1],l[2])),a.normalized){const h=Ao(cs[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const n=e.targets;if(n!==void 0){const a=new U,A=new U;for(let l=0,h=n.length;l<h;l++){const c=n[l];if(c.POSITION!==void 0){const d=t.json.accessors[c.POSITION],u=d.min,g=d.max;if(u!==void 0&&g!==void 0){if(A.setX(Math.max(Math.abs(u[0]),Math.abs(g[0]))),A.setY(Math.max(Math.abs(u[1]),Math.abs(g[1]))),A.setZ(Math.max(Math.abs(u[2]),Math.abs(g[2]))),d.normalized){const p=Ao(cs[d.componentType]);A.multiplyScalar(p)}a.max(A)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}o.boundingBox=i;const r=new _o;i.getCenter(r.center),r.radius=i.min.distanceTo(i.max)/2,o.boundingSphere=r}function ua(o,e,t){const s=e.attributes,i=[];function n(r,a){return t.getDependency("accessor",r).then(function(A){o.setAttribute(a,A)})}for(const r in s){const a=ao[r]||r.toLowerCase();a in o.attributes||i.push(n(s[r],a))}if(e.indices!==void 0&&!o.index){const r=t.getDependency("accessor",e.indices).then(function(a){o.setIndex(a)});i.push(r)}return rt(o,e),Vg(o,e,t),Promise.all(i).then(function(){return e.targets!==void 0?kg(o,e.targets,t):o})}class qg{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const s=this.workersResolve[e];if(s&&s(t),this.queue.length){const{resolve:i,msg:n,transfer:r}=this.queue.shift();this.workersResolve[e]=i,this.workers[e].postMessage(n,r)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(s=>{const i=this._getIdleWorker();i!==-1?(this._initWorker(i),this.workerStatus|=1<<i,this.workersResolve[i]=s,this.workers[i].postMessage(e,t)):this.queue.push({resolve:s,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Kg=0,Yg=2,zg=1,Jg=2,jg=0,Ic=9,Do=15,Ec=16,Lo=22,Cc=37,Fo=43,Bc=76,yc=83,wc=97,Qc=100,vc=103,xc=109;class Wg{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class vs{constructor(e,t,s,i){this._dataView=new DataView(e.buffer,e.byteOffset+t,s),this._littleEndian=i,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const s=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==t&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+s,i)}}const he=[171,75,84,88,32,50,48,187,13,10,26,10];function da(o){return typeof TextDecoder<"u"?new TextDecoder().decode(o):Buffer.from(o).toString("utf8")}function Xg(o){const e=new Uint8Array(o.buffer,o.byteOffset,he.length);if(e[0]!==he[0]||e[1]!==he[1]||e[2]!==he[2]||e[3]!==he[3]||e[4]!==he[4]||e[5]!==he[5]||e[6]!==he[6]||e[7]!==he[7]||e[8]!==he[8]||e[9]!==he[9]||e[10]!==he[10]||e[11]!==he[11])throw new Error("Missing KTX 2.0 identifier.");const t=new Wg,s=17*Uint32Array.BYTES_PER_ELEMENT,i=new vs(o,he.length,s,!0);t.vkFormat=i._nextUint32(),t.typeSize=i._nextUint32(),t.pixelWidth=i._nextUint32(),t.pixelHeight=i._nextUint32(),t.pixelDepth=i._nextUint32(),t.layerCount=i._nextUint32(),t.faceCount=i._nextUint32();const n=i._nextUint32();t.supercompressionScheme=i._nextUint32();const r=i._nextUint32(),a=i._nextUint32(),A=i._nextUint32(),l=i._nextUint32(),h=i._nextUint64(),c=i._nextUint64(),d=new vs(o,he.length+s,3*n*8,!0);for(let M=0;M<n;M++)t.levels.push({levelData:new Uint8Array(o.buffer,o.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const u=new vs(o,r,a,!0),g={vendorId:u._skip(4)._nextUint16(),descriptorType:u._nextUint16(),versionNumber:u._nextUint16(),descriptorBlockSize:u._nextUint16(),colorModel:u._nextUint8(),colorPrimaries:u._nextUint8(),transferFunction:u._nextUint8(),flags:u._nextUint8(),texelBlockDimension:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],bytesPlane:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],samples:[]},p=(g.descriptorBlockSize/4-6)/4;for(let M=0;M<p;M++){const L={bitOffset:u._nextUint16(),bitLength:u._nextUint8(),channelType:u._nextUint8(),samplePosition:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&L.channelType?(L.sampleLower=u._nextInt32(),L.sampleUpper=u._nextInt32()):(L.sampleLower=u._nextUint32(),L.sampleUpper=u._nextUint32()),g.samples[M]=L}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(g);const f=new vs(o,A,l,!0);for(;f._offset<l;){const M=f._nextUint32(),L=f._scan(M),W=da(L),ie=f._scan(M-L.byteLength);t.keyValue[W]=W.match(/^ktx/i)?da(ie):ie,f._offset%4&&f._skip(4-f._offset%4)}if(c<=0)return t;const I=new vs(o,h,c,!0),C=I._nextUint16(),E=I._nextUint16(),m=I._nextUint32(),B=I._nextUint32(),y=I._nextUint32(),w=I._nextUint32(),Q=[];for(let M=0;M<n;M++)Q.push({imageFlags:I._nextUint32(),rgbSliceByteOffset:I._nextUint32(),rgbSliceByteLength:I._nextUint32(),alphaSliceByteOffset:I._nextUint32(),alphaSliceByteLength:I._nextUint32()});const v=h+I._offset,S=v+m,_=S+B,k=_+y,j=new Uint8Array(o.buffer,o.byteOffset+v,m),D=new Uint8Array(o.buffer,o.byteOffset+S,B),O=new Uint8Array(o.buffer,o.byteOffset+_,y),$=new Uint8Array(o.buffer,o.byteOffset+k,w);return t.globalData={endpointCount:C,selectorCount:E,imageDescs:Q,endpointsData:j,selectorsData:D,tablesData:O,extendedData:$},t}let Pn,ze,lo;const On={env:{emscripten_notify_memory_growth:function(o){lo=new Uint8Array(ze.exports.memory.buffer)}}};class Zg{init(){return Pn||(Pn=typeof fetch<"u"?fetch("data:application/wasm;base64,"+ga).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,On)).then(this._init):WebAssembly.instantiate(Buffer.from(ga,"base64"),On).then(this._init),Pn)}_init(e){ze=e.instance,On.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!ze)throw new Error("ZSTDDecoder: Await .init() before decoding.");const s=e.byteLength,i=ze.exports.malloc(s);lo.set(e,i),t=t||Number(ze.exports.ZSTD_findDecompressedSize(i,s));const n=ze.exports.malloc(t),r=ze.exports.ZSTD_decompress(n,t,i,s),a=lo.slice(n,n+r);return ze.exports.free(i),ze.exports.free(n),a}}const ga="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",Hn=new WeakMap;let $n=0,Vn;class Ue extends yo{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new qg,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),etc1Supported:!1,etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:!1,pvrtcSupported:!1}:(this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1)),this}init(){if(!this.transcoderPending){const e=new Lt(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),s=new Lt(this.manager);s.setPath(this.transcoderPath),s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials);const i=s.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,i]).then(([n,r])=>{const a=Ue.BasisWorker.toString(),A=["/* constants */","let _EngineFormat = "+JSON.stringify(Ue.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Ue.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Ue.BasisFormat),"/* basis_transcoder.js */",n,"/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([A])),this.transcoderBinary=r,this.workerPool.setWorkerCreator(()=>{const l=new Worker(this.workerSourceURL),h=this.transcoderBinary.slice(0);return l.postMessage({type:"init",config:this.workerConfig,transcoderBinary:h},[h]),l})}),$n>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),$n++}return this.transcoderPending}load(e,t,s,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const n=new Lt(this.manager);n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials),n.load(e,r=>{if(Hn.has(r))return Hn.get(r).promise.then(t).catch(i);this._createTexture(r).then(a=>t?t(a):null).catch(i)},s,i)}_createTextureFrom(e,t){const{faces:s,width:i,height:n,format:r,type:a,error:A,dfdTransferFn:l,dfdFlags:h}=e;if(a==="error")return Promise.reject(A);let c;if(t.faceCount===6)c=new zs,c.image=s,c.format=r,c.type=Je;else{const d=s[0].mipmaps;c=t.layerCount>1?new kh(d,i,n,t.layerCount,r,Je):new zs(d,i,n,r,Je)}return c.minFilter=s[0].mipmaps.length===1?kt:mn,c.magFilter=kt,c.generateMipmaps=!1,c.needsUpdate=!0,c.colorSpace=l===Jg?me:In,c.premultiplyAlpha=!!(h&zg),c}async _createTexture(e,t={}){const s=Xg(new Uint8Array(e));if(s.vkFormat!==jg){const r=[],a=[];for(let l=0;l<s.levels.length;l++)a.push(tp(s,l).then(function(h){r[l]=h}));await Promise.all(a);const A=r[0];return A.mipmaps=r.map(l=>({data:l.source.data,width:l.source.data.width,height:l.source.data.height,depth:l.source.data.depth})),A}const i=t,n=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:i},[e])).then(r=>this._createTextureFrom(r.data,s));return Hn.set(e,{promise:n}),n}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),$n--,this}}Ue.BasisFormat={ETC1S:0,UASTC_4x4:1};Ue.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};Ue.EngineFormat={RGBAFormat:ct,RGBA_ASTC_4x4_Format:Gh,RGBA_BPTC_Format:Ph,RGBA_ETC2_EAC_Format:Oh,RGBA_PVRTC_4BPPV1_Format:Hh,RGBA_S3TC_DXT5_Format:$h,RGB_ETC1_Format:Vh,RGB_ETC2_Format:qh,RGB_PVRTC_4BPPV1_Format:Kh,RGB_S3TC_DXT1_Format:Yh};Ue.BasisWorker=function(){let o,e,t;const s=_EngineFormat,i=_TranscoderFormat,n=_BasisFormat;self.addEventListener("message",function(g){const p=g.data;switch(p.type){case"init":o=p.config,r(p.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:f,buffers:I,width:C,height:E,hasAlpha:m,format:B,dfdTransferFn:y,dfdFlags:w}=a(p.buffer);self.postMessage({type:"transcode",id:p.id,faces:f,width:C,height:E,hasAlpha:m,format:B,dfdTransferFn:y,dfdFlags:w},I)}catch(f){console.error(f),self.postMessage({type:"error",id:p.id,error:f.message})}});break}});function r(g){e=new Promise(p=>{t={wasmBinary:g,onRuntimeInitialized:p},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function a(g){const p=new t.KTX2File(new Uint8Array(g));function f(){p.close(),p.delete()}if(!p.isValid())throw f(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const I=p.isUASTC()?n.UASTC_4x4:n.ETC1S,C=p.getWidth(),E=p.getHeight(),m=p.getLayers()||1,B=p.getLevels(),y=p.getFaces(),w=p.getHasAlpha(),Q=p.getDFDTransferFunc(),v=p.getDFDFlags(),{transcoderFormat:S,engineFormat:_}=c(I,C,E,w);if(!C||!E||!B)throw f(),new Error("THREE.KTX2Loader:	Invalid texture");if(!p.startTranscoding())throw f(),new Error("THREE.KTX2Loader: .startTranscoding failed");const k=[],j=[];for(let D=0;D<y;D++){const O=[];for(let $=0;$<B;$++){const M=[];let L,W;for(let ee=0;ee<m;ee++){const pe=p.getImageLevelInfo($,ee,D);D===0&&$===0&&ee===0&&(pe.origWidth%4!==0||pe.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),B>1?(L=pe.origWidth,W=pe.origHeight):(L=pe.width,W=pe.height);const Pe=new Uint8Array(p.getImageTranscodedSizeInBytes($,ee,0,S));if(!p.transcodeImage(Pe,$,ee,D,S,0,-1,-1))throw f(),new Error("THREE.KTX2Loader: .transcodeImage failed.");M.push(Pe)}const ie=u(M);O.push({data:ie,width:L,height:W}),j.push(ie.buffer)}k.push({mipmaps:O,width:C,height:E,format:_})}return f(),{faces:k,buffers:j,width:C,height:E,hasAlpha:w,format:_,dfdTransferFn:Q,dfdFlags:v}}const A=[{if:"astcSupported",basisFormat:[n.UASTC_4x4],transcoderFormat:[i.ASTC_4x4,i.ASTC_4x4],engineFormat:[s.RGBA_ASTC_4x4_Format,s.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.BC7_M5,i.BC7_M5],engineFormat:[s.RGBA_BPTC_Format,s.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.BC1,i.BC3],engineFormat:[s.RGB_S3TC_DXT1_Format,s.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.ETC1,i.ETC2],engineFormat:[s.RGB_ETC2_Format,s.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.ETC1],engineFormat:[s.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.PVRTC1_4_RGB,i.PVRTC1_4_RGBA],engineFormat:[s.RGB_PVRTC_4BPPV1_Format,s.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],l=A.sort(function(g,p){return g.priorityETC1S-p.priorityETC1S}),h=A.sort(function(g,p){return g.priorityUASTC-p.priorityUASTC});function c(g,p,f,I){let C,E;const m=g===n.ETC1S?l:h;for(let B=0;B<m.length;B++){const y=m[B];if(o[y.if]&&y.basisFormat.includes(g)&&!(I&&y.transcoderFormat.length<2)&&!(y.needsPowerOfTwo&&!(d(p)&&d(f))))return C=y.transcoderFormat[I?1:0],E=y.engineFormat[I?1:0],{transcoderFormat:C,engineFormat:E}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),C=i.RGBA32,E=s.RGBAFormat,{transcoderFormat:C,engineFormat:E}}function d(g){return g<=2?!0:(g&g-1)===0&&g!==0}function u(g){if(g.length===1)return g[0];let p=0;for(let C=0;C<g.length;C++){const E=g[C];p+=E.byteLength}const f=new Uint8Array(p);let I=0;for(let C=0;C<g.length;C++){const E=g[C];f.set(E,I),I+=E.byteLength}return f}};const pa={[xc]:ct,[wc]:ct,[Cc]:ct,[Fo]:ct,[vc]:fi,[yc]:fi,[Ec]:fi,[Lo]:fi,[Qc]:mi,[Bc]:mi,[Do]:mi,[Ic]:mi},qn={[xc]:Nt,[wc]:Ne,[Cc]:Je,[Fo]:Je,[vc]:Nt,[yc]:Ne,[Ec]:Je,[Lo]:Je,[Qc]:Nt,[Bc]:Ne,[Do]:Je,[Ic]:Je},ep={[Fo]:me,[Lo]:me,[Do]:me};async function tp(o,e=0){const{vkFormat:t}=o,s=Math.max(1,o.pixelWidth>>e),i=Math.max(1,o.pixelHeight>>e),n=Math.max(1,o.pixelDepth>>e);if(pa[t]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const r=o.levels[e];let a,A;if(o.supercompressionScheme===Kg)a=r.levelData;else if(o.supercompressionScheme===Yg)Vn||(Vn=new Promise(async h=>{const c=new Zg;await c.init(),h(c)})),a=(await Vn).decode(r.levelData,r.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");qn[t]===Nt?A=new Float32Array(a.buffer,a.byteOffset,a.byteLength/Float32Array.BYTES_PER_ELEMENT):qn[t]===Ne?A=new Uint16Array(a.buffer,a.byteOffset,a.byteLength/Uint16Array.BYTES_PER_ELEMENT):A=a;const l=n===0?new zh(A,s,i):new Jh(A,s,i,n);return l.type=qn[t],l.format=pa[t],l.colorSpace=ep[t]||In,l.needsUpdate=!0,Promise.resolve(l)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fa,ma;const Se=Symbol("retainerCount"),Oe=Symbol("recentlyUsed"),Ci=Symbol("evict"),xs=Symbol("evictionThreshold"),Kn=Symbol("cache");class sp{constructor(e,t=5){this[fa]=new Map,this[ma]=[],this[Kn]=e,this[xs]=t}set evictionThreshold(e){this[xs]=e,this[Ci]()}get evictionThreshold(){return this[xs]}get cache(){return this[Kn]}retainerCount(e){return this[Se].get(e)||0}reset(){this[Se].clear(),this[Oe]=[]}retain(e){this[Se].has(e)||this[Se].set(e,0),this[Se].set(e,this[Se].get(e)+1);const t=this[Oe].indexOf(e);t!==-1&&this[Oe].splice(t,1),this[Oe].unshift(e),this[Ci]()}release(e){this[Se].has(e)&&this[Se].set(e,Math.max(this[Se].get(e)-1,0)),this[Ci]()}[(fa=Se,ma=Oe,Ci)](){if(!(this[Oe].length<this[xs]))for(let e=this[Oe].length-1;e>=this[xs];--e){const t=this[Oe][e];this[Se].get(t)===0&&(this[Kn].delete(t),this[Oe].splice(e,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=o=>{const e=[],t=new Set;for(const s of o){let i=s,n=0;for(;t.has(i);)i=s+"."+ ++n;t.add(i),e.push(i)}return e},np=o=>{const e=new Map;for(const t of o.mappings)for(const s of t.variants)e.set(s,{material:null,gltfMaterialIndex:t.material});return e};class rp{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){const t=this.parser,s=t.json;if(s.extensions===void 0||s.extensions[this.name]===void 0)return null;const n=s.extensions[this.name].variants||[],r=ip(n.map(a=>a.name));for(const a of e.scenes)a.traverse(A=>{const l=A;if(!l.material)return;const h=t.associations.get(l);if(h==null||h.meshes==null||h.primitives==null)return;const g=s.meshes[h.meshes].primitives[h.primitives].extensions;!g||!g[this.name]||(l.userData.variantMaterials=np(g[this.name]))});return e.userData.variants=r,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bc,Ia;ii.DEFAULT_ANISOTROPY=4;const op=(o,e,t=()=>{})=>{const s=i=>{const n=i.loaded/i.total;t(Math.max(0,Math.min(1,isFinite(n)?n:1)))};return new Promise((i,n)=>{e.load(o,i,s,n)})},ap=o=>new Promise((e,t)=>{const s=document.createElement("script");document.body.appendChild(s),s.onload=e,s.onerror=t,s.async=!0,s.src=o}),He=new Map,Yn=new Map;let Ea;const Ca=new cg;let Ba;const zn=new Ue;let Jn,jn;const vt=Symbol("loader"),ot=Symbol("evictionPolicy"),ya=Symbol("GLTFInstance");class ne extends hi{constructor(e){super(),this[Ia]=new ug().register(t=>new rp(t)),this[ya]=e,this[vt].setDRACOLoader(Ca),this[vt].setKTX2Loader(zn)}static setDRACODecoderLocation(e){Ea=e,Ca.setDecoderPath(e)}static getDRACODecoderLocation(){return Ea}static setKTX2TranscoderLocation(e){Ba=e,zn.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return Ba}static setMeshoptDecoderLocation(e){Jn!==e&&(Jn=e,jn=ap(e).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return Jn}static initializeKTX2Loader(e){zn.detectSupport(e)}static get cache(){return He}static clearCache(){He.forEach((e,t)=>{this.delete(t)}),this[ot].reset()}static has(e){return He.has(e)}static async delete(e){if(!this.has(e))return;const t=He.get(e);Yn.delete(e),He.delete(e),(await t).dispose()}static hasFinishedLoading(e){return!!Yn.get(e)}get[(bc=ot,Ia=vt,ot)](){return this.constructor[ot]}async preload(e,t,s=()=>{}){if(this[vt].setWithCredentials(ne.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!He.has(e)){jn!=null&&this[vt].setMeshoptDecoder(await jn);const i=op(e,this[vt],a=>{s(a*.8)}),n=this[ya],r=i.then(a=>n.prepare(a)).then(a=>(s(.9),new n(a))).catch(a=>(console.error(a),new n));He.set(e,r)}await He.get(e),Yn.set(e,!0),s&&s(1)}async load(e,t,s=()=>{}){await this.preload(e,t,s);const n=await(await He.get(e)).clone();return this[ot].retain(e),n.dispose=()=>{this[ot].release(e)},n}}ne[bc]=new sp(ne);class Ap extends ci{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new xe(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const Vt=new U,wa=new Ze,Qa=new Ze,va=new U,xa=new U;class lp{constructor(e={}){const t=this;let s,i,n,r;const a={objects:new WeakMap},A=e.element!==void 0?e.element:document.createElement("div");A.style.overflow="hidden",this.domElement=A,this.getSize=function(){return{width:s,height:i}},this.render=function(u,g){u.matrixWorldAutoUpdate===!0&&u.updateMatrixWorld(),g.parent===null&&g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld(),wa.copy(g.matrixWorldInverse),Qa.multiplyMatrices(g.projectionMatrix,wa),l(u,u,g),d(u)},this.setSize=function(u,g){s=u,i=g,n=s/2,r=i/2,A.style.width=u+"px",A.style.height=g+"px"};function l(u,g,p){if(u.isCSS2DObject){Vt.setFromMatrixPosition(u.matrixWorld),Vt.applyMatrix4(Qa);const f=u.visible===!0&&Vt.z>=-1&&Vt.z<=1&&u.layers.test(p.layers)===!0;if(u.element.style.display=f===!0?"":"none",f===!0){u.onBeforeRender(t,g,p);const C=u.element;C.style.transform="translate("+-100*u.center.x+"%,"+-100*u.center.y+"%)translate("+(Vt.x*n+n)+"px,"+(-Vt.y*r+r)+"px)",C.parentNode!==A&&A.appendChild(C),u.onAfterRender(t,g,p)}const I={distanceToCameraSquared:h(p,u)};a.objects.set(u,I)}for(let f=0,I=u.children.length;f<I;f++)l(u.children[f],g,p)}function h(u,g){return va.setFromMatrixPosition(u.matrixWorld),xa.setFromMatrixPosition(g.matrixWorld),va.distanceToSquared(xa)}function c(u){const g=[];return u.traverse(function(p){p.isCSS2DObject&&g.push(p)}),g}function d(u){const g=c(u).sort(function(f,I){if(f.renderOrder!==I.renderOrder)return I.renderOrder-f.renderOrder;const C=a.objects.get(f).distanceToCameraSquared,E=a.objects.get(I).distanceToCameraSquared;return C-E}),p=g.length;for(let f=0,I=g.length;f<I;f++)g[f].element.style.zIndex=p-f}}}function Bi(o,e,t){let s=t;const i=new U;return o.updateWorldMatrix(!0,!0),o.traverseVisible(n=>{const{geometry:r}=n;if(r!==void 0){const{position:a}=r.attributes;if(a!==void 0)for(let A=0,l=a.count;A<l;A++)n.isMesh?n.getVertexPosition(A,i):i.fromBufferAttribute(a,A),n.isSkinnedMesh||i.applyMatrix4(n.matrixWorld),s=e(s,i)}}),s}let yi,Wn,qt,wi;function Xn(o,e=1/0,t=null){Wn||(Wn=new En(2,2,1,1)),qt||(qt=new An({uniforms:{blitTexture:new jh(o)},vertexShader:`
            varying vec2 vUv;
            void main(){
                vUv = uv;
                gl_Position = vec4(position.xy * 1.0,0.,.999999);
            }`,fragmentShader:`
            uniform sampler2D blitTexture; 
            varying vec2 vUv;

            void main(){ 
                gl_FragColor = vec4(vUv.xy, 0, 1);
                
                #ifdef IS_SRGB
                gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );
                #else
                gl_FragColor = texture2D( blitTexture, vUv);
                #endif
            }`})),qt.uniforms.blitTexture.value=o,qt.defines.IS_SRGB=o.colorSpace==me,qt.needsUpdate=!0,wi||(wi=new P(Wn,qt),wi.frustrumCulled=!1);const s=new si,i=new gt;i.add(wi),t||(t=yi=new jl({antialias:!1})),t.setSize(Math.min(o.image.width,e),Math.min(o.image.height,e)),t.clear(),t.render(i,s);const n=new ii(t.domElement);return n.minFilter=o.minFilter,n.magFilter=o.magFilter,n.wrapS=o.wrapS,n.wrapT=o.wrapT,n.name=o.name,yi&&(yi.dispose(),yi=null),n}const ba={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class No{constructor(){this.pluginCallbacks=[],this.register(function(e){return new Ep(e)}),this.register(function(e){return new Cp(e)}),this.register(function(e){return new wp(e)}),this.register(function(e){return new Qp(e)}),this.register(function(e){return new vp(e)}),this.register(function(e){return new xp(e)}),this.register(function(e){return new Bp(e)}),this.register(function(e){return new yp(e)}),this.register(function(e){return new bp(e)}),this.register(function(e){return new Sp(e)}),this.register(function(e){return new _p(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,s,i){const n=new Ip,r=[];for(let a=0,A=this.pluginCallbacks.length;a<A;a++)r.push(this.pluginCallbacks[a](n));n.setPlugins(r),n.write(e,t,i).catch(s)}parseAsync(e,t){const s=this;return new Promise(function(i,n){s.parse(e,i,n,t)})}}const G={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},Zn="KHR_mesh_quantization",ye={};ye[$l]=G.NEAREST;ye[Vl]=G.NEAREST_MIPMAP_NEAREST;ye[Kl]=G.NEAREST_MIPMAP_LINEAR;ye[kt]=G.LINEAR;ye[ql]=G.LINEAR_MIPMAP_NEAREST;ye[mn]=G.LINEAR_MIPMAP_LINEAR;ye[Yl]=G.CLAMP_TO_EDGE;ye[ds]=G.REPEAT;ye[zl]=G.MIRRORED_REPEAT;const Sa={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},cp=new Re,_a=12,hp=1179937895,up=2,Ta=8,dp=1313821514,gp=5130562;function $s(o,e){return o.length===e.length&&o.every(function(t,s){return t===e[s]})}function pp(o){return new TextEncoder().encode(o).buffer}function fp(o){return $s(o.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function mp(o,e,t){const s={min:new Array(o.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(o.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let n=0;n<o.itemSize;n++){let r;o.itemSize>4?r=o.array[i*o.itemSize+n]:(n===0?r=o.getX(i):n===1?r=o.getY(i):n===2?r=o.getZ(i):n===3&&(r=o.getW(i)),o.normalized===!0&&(r=an.normalize(r,o.array))),s.min[n]=Math.min(s.min[n],r),s.max[n]=Math.max(s.max[n],r)}return s}function Sc(o){return Math.ceil(o/4)*4}function er(o,e=0){const t=Sc(o.byteLength);if(t!==o.byteLength){const s=new Uint8Array(t);if(s.set(new Uint8Array(o)),e!==0)for(let i=o.byteLength;i<t;i++)s[i]=e;return s.buffer}return o}function Ra(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function Ma(o,e){if(o.toBlob!==void 0)return new Promise(s=>o.toBlob(s,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),o.convertToBlob({type:e,quality:t})}class Ip{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,s={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},s),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,n=i.buffers,r=i.json;s=i.options;const a=i.extensionsUsed,A=i.extensionsRequired,l=new Blob(n,{type:"application/octet-stream"}),h=Object.keys(a),c=Object.keys(A);if(h.length>0&&(r.extensionsUsed=h),c.length>0&&(r.extensionsRequired=c),r.buffers&&r.buffers.length>0&&(r.buffers[0].byteLength=l.size),s.binary===!0){const d=new FileReader;d.readAsArrayBuffer(l),d.onloadend=function(){const u=er(d.result),g=new DataView(new ArrayBuffer(Ta));g.setUint32(0,u.byteLength,!0),g.setUint32(4,gp,!0);const p=er(pp(JSON.stringify(r)),32),f=new DataView(new ArrayBuffer(Ta));f.setUint32(0,p.byteLength,!0),f.setUint32(4,dp,!0);const I=new ArrayBuffer(_a),C=new DataView(I);C.setUint32(0,hp,!0),C.setUint32(4,up,!0);const E=_a+f.byteLength+p.byteLength+g.byteLength+u.byteLength;C.setUint32(8,E,!0);const m=new Blob([I,f,p,g,u],{type:"application/octet-stream"}),B=new FileReader;B.readAsArrayBuffer(m),B.onloadend=function(){t(B.result)}}}else if(r.buffers&&r.buffers.length>0){const d=new FileReader;d.readAsDataURL(l),d.onloadend=function(){const u=d.result;r.buffers[0].uri=u,t(r)}}else t(r)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const s=this.options,i=this.extensionsUsed;try{const n=JSON.parse(JSON.stringify(e.userData));if(s.includeCustomExtensions&&n.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const r in n.gltfExtensions)t.extensions[r]=n.gltfExtensions[r],i[r]=!0;delete n.gltfExtensions}Object.keys(n).length>0&&(t.extras=n)}catch(n){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+n.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const s=new U;for(let i=0,n=e.count;i<n;i++)if(Math.abs(s.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const s=e.clone(),i=new U;for(let n=0,r=s.count;n<r;n++)i.fromBufferAttribute(s,n),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),s.setXYZ(n,i.x,i.y,i.z);return t.attributesNormalized.set(e,s),s}applyTextureTransform(e,t){let s=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),s=!0),t.rotation!==0&&(i.rotation=t.rotation,s=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),s=!0),s&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function s(u){return u.colorSpace===me?function(p){return p<.04045?p*.0773993808:Math.pow(p*.9478672986+.0521327014,2.4)}:function(p){return p}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof zs&&(e=Xn(e)),t instanceof zs&&(t=Xn(t));const i=e?e.image:null,n=t?t.image:null,r=Math.max(i?i.width:0,n?n.width:0),a=Math.max(i?i.height:0,n?n.height:0),A=Ra();A.width=r,A.height=a;const l=A.getContext("2d");l.fillStyle="#00ffff",l.fillRect(0,0,r,a);const h=l.getImageData(0,0,r,a);if(i){l.drawImage(i,0,0,r,a);const u=s(e),g=l.getImageData(0,0,r,a).data;for(let p=2;p<g.length;p+=4)h.data[p]=u(g[p]/256)*256}if(n){l.drawImage(n,0,0,r,a);const u=s(t),g=l.getImageData(0,0,r,a).data;for(let p=1;p<g.length;p+=4)h.data[p]=u(g[p]/256)*256}l.putImageData(h,0,0);const d=(e||t).clone();return d.source=new Wh(A),d.colorSpace=In,d.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),d}processBuffer(e){const t=this.json,s=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),s.push(e),0}processBufferView(e,t,s,i,n){const r=this.json;r.bufferViews||(r.bufferViews=[]);let a;switch(t){case G.BYTE:case G.UNSIGNED_BYTE:a=1;break;case G.SHORT:case G.UNSIGNED_SHORT:a=2;break;default:a=4}const A=Sc(i*e.itemSize*a),l=new DataView(new ArrayBuffer(A));let h=0;for(let u=s;u<s+i;u++)for(let g=0;g<e.itemSize;g++){let p;e.itemSize>4?p=e.array[u*e.itemSize+g]:(g===0?p=e.getX(u):g===1?p=e.getY(u):g===2?p=e.getZ(u):g===3&&(p=e.getW(u)),e.normalized===!0&&(p=an.normalize(p,e.array))),t===G.FLOAT?l.setFloat32(h,p,!0):t===G.INT?l.setInt32(h,p,!0):t===G.UNSIGNED_INT?l.setUint32(h,p,!0):t===G.SHORT?l.setInt16(h,p,!0):t===G.UNSIGNED_SHORT?l.setUint16(h,p,!0):t===G.BYTE?l.setInt8(h,p):t===G.UNSIGNED_BYTE&&l.setUint8(h,p),h+=a}const c={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:A};return n!==void 0&&(c.target=n),n===G.ARRAY_BUFFER&&(c.byteStride=e.itemSize*a),this.byteOffset+=A,r.bufferViews.push(c),{id:r.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,s=t.json;return s.bufferViews||(s.bufferViews=[]),new Promise(function(i){const n=new FileReader;n.readAsArrayBuffer(e),n.onloadend=function(){const r=er(n.result),a={buffer:t.processBuffer(r),byteOffset:t.byteOffset,byteLength:r.byteLength};t.byteOffset+=r.byteLength,i(s.bufferViews.push(a)-1)}})}processAccessor(e,t,s,i){const n=this.json,r={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=G.FLOAT;else if(e.array.constructor===Int32Array)a=G.INT;else if(e.array.constructor===Uint32Array)a=G.UNSIGNED_INT;else if(e.array.constructor===Int16Array)a=G.SHORT;else if(e.array.constructor===Uint16Array)a=G.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)a=G.BYTE;else if(e.array.constructor===Uint8Array)a=G.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(s===void 0&&(s=0),i===void 0&&(i=e.count),i===0)return null;const A=mp(e,s,i);let l;t!==void 0&&(l=e===t.index?G.ELEMENT_ARRAY_BUFFER:G.ARRAY_BUFFER);const h=this.processBufferView(e,a,s,i,l),c={bufferView:h.id,byteOffset:h.byteOffset,componentType:a,count:i,max:A.max,min:A.min,type:r[e.itemSize]};return e.normalized===!0&&(c.normalized=!0),n.accessors||(n.accessors=[]),n.accessors.push(c)-1}processImage(e,t,s,i="image/png"){if(e!==null){const n=this,r=n.cache,a=n.json,A=n.options,l=n.pending;r.images.has(e)||r.images.set(e,{});const h=r.images.get(e),c=i+":flipY/"+s.toString();if(h[c]!==void 0)return h[c];a.images||(a.images=[]);const d={mimeType:i},u=Ra();u.width=Math.min(e.width,A.maxTextureSize),u.height=Math.min(e.height,A.maxTextureSize);const g=u.getContext("2d");if(s===!0&&(g.translate(0,u.height),g.scale(1,-1)),e.data!==void 0){t!==ct&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>A.maxTextureSize||e.height>A.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const f=new Uint8ClampedArray(e.height*e.width*4);for(let I=0;I<f.length;I+=4)f[I+0]=e.data[I+0],f[I+1]=e.data[I+1],f[I+2]=e.data[I+2],f[I+3]=e.data[I+3];g.putImageData(new ImageData(f,e.width,e.height),0,0)}else g.drawImage(e,0,0,u.width,u.height);A.binary===!0?l.push(Ma(u,i).then(f=>n.processBufferViewImage(f)).then(f=>{d.bufferView=f})):u.toDataURL!==void 0?d.uri=u.toDataURL(i):l.push(Ma(u,i).then(f=>new FileReader().readAsDataURL(f)).then(f=>{d.uri=f}));const p=a.images.push(d)-1;return h[c]=p,p}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const s={magFilter:ye[e.magFilter],minFilter:ye[e.minFilter],wrapS:ye[e.wrapS],wrapT:ye[e.wrapT]};return t.samplers.push(s)-1}processTexture(e){const s=this.options,i=this.cache,n=this.json;if(i.textures.has(e))return i.textures.get(e);n.textures||(n.textures=[]),e instanceof zs&&(e=Xn(e,s.maxTextureSize));let r=e.userData.mimeType;r==="image/webp"&&(r="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,r)};e.name&&(a.name=e.name),this._invokeAll(function(l){l.writeTexture&&l.writeTexture(e,a)});const A=n.textures.push(a)-1;return i.textures.set(e,A),A}processMaterial(e){const t=this.cache,s=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;s.materials||(s.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const n=e.color.toArray().concat([e.opacity]);if($s(n,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=n),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),A={index:this.processTexture(a),channel:a.channel};this.applyTextureTransform(A,a),i.pbrMetallicRoughness.metallicRoughnessTexture=A}if(e.map){const a={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive;if(Math.max(a.r,a.g,a.b)>0&&(i.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const l={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(l,e.emissiveMap),i.emissiveTexture=l}}if(e.normalMap){const a={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){const a={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Gt&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});const r=s.materials.push(i)-1;return t.materials.set(e,r),r}processMesh(e){const t=this.cache,s=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let E=0,m=e.material.length;E<m;E++)i.push(e.material[E].uuid);else i.push(e.material.uuid);const n=i.join(":");if(t.meshes.has(n))return t.meshes.get(n);const r=e.geometry;let a;e.isLineSegments?a=G.LINES:e.isLineLoop?a=G.LINE_LOOP:e.isLine?a=G.LINE_STRIP:e.isPoints?a=G.POINTS:a=e.material.wireframe?G.LINES:G.TRIANGLES;const A={},l={},h=[],c=[],d={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},u=r.getAttribute("normal");u!==void 0&&!this.isNormalizedNormalAttribute(u)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),r.setAttribute("normal",this.createNormalizedNormalAttribute(u)));let g=null;for(let E in r.attributes){if(E.slice(0,5)==="morph")continue;const m=r.attributes[E];if(E=d[E]||E.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(E)||(E="_"+E),t.attributes.has(this.getUID(m))){l[E]=t.attributes.get(this.getUID(m));continue}g=null;const y=m.array;E==="JOINTS_0"&&!(y instanceof Uint16Array)&&!(y instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),g=new je(new Uint16Array(y),m.itemSize,m.normalized));const w=this.processAccessor(g||m,r);w!==null&&(E.startsWith("_")||this.detectMeshQuantization(E,m),l[E]=w,t.attributes.set(this.getUID(m),w))}if(u!==void 0&&r.setAttribute("normal",u),Object.keys(l).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const E=[],m=[],B={};if(e.morphTargetDictionary!==void 0)for(const y in e.morphTargetDictionary)B[e.morphTargetDictionary[y]]=y;for(let y=0;y<e.morphTargetInfluences.length;++y){const w={};let Q=!1;for(const v in r.morphAttributes){if(v!=="position"&&v!=="normal"){Q||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),Q=!0);continue}const S=r.morphAttributes[v][y],_=v.toUpperCase(),k=r.attributes[v];if(t.attributes.has(this.getUID(S,!0))){w[_]=t.attributes.get(this.getUID(S,!0));continue}const j=S.clone();if(!r.morphTargetsRelative)for(let D=0,O=S.count;D<O;D++)for(let $=0;$<S.itemSize;$++)$===0&&j.setX(D,S.getX(D)-k.getX(D)),$===1&&j.setY(D,S.getY(D)-k.getY(D)),$===2&&j.setZ(D,S.getZ(D)-k.getZ(D)),$===3&&j.setW(D,S.getW(D)-k.getW(D));w[_]=this.processAccessor(j,r),t.attributes.set(this.getUID(k,!0),w[_])}c.push(w),E.push(e.morphTargetInfluences[y]),e.morphTargetDictionary!==void 0&&m.push(B[y])}A.weights=E,m.length>0&&(A.extras={},A.extras.targetNames=m)}const p=Array.isArray(e.material);if(p&&r.groups.length===0)return null;const f=p?e.material:[e.material],I=p?r.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let E=0,m=I.length;E<m;E++){const B={mode:a,attributes:l};if(this.serializeUserData(r,B),c.length>0&&(B.targets=c),r.index!==null){let w=this.getUID(r.index);(I[E].start!==void 0||I[E].count!==void 0)&&(w+=":"+I[E].start+":"+I[E].count),t.attributes.has(w)?B.indices=t.attributes.get(w):(B.indices=this.processAccessor(r.index,r,I[E].start,I[E].count),t.attributes.set(w,B.indices)),B.indices===null&&delete B.indices}const y=this.processMaterial(f[I[E].materialIndex]);y!==null&&(B.material=y),h.push(B)}A.primitives=h,s.meshes||(s.meshes=[]),this._invokeAll(function(E){E.writeMesh&&E.writeMesh(e,A)});const C=s.meshes.push(A)-1;return t.meshes.set(n,C),C}detectMeshQuantization(e,t){if(this.extensionsUsed[Zn])return;let s;switch(t.array.constructor){case Int8Array:s="byte";break;case Uint8Array:s="unsigned byte";break;case Int16Array:s="short";break;case Uint16Array:s="unsigned short";break;default:return}t.normalized&&(s+=" normalized");const i=e.split("_",1)[0];ba[i]&&ba[i].includes(s)&&(this.extensionsUsed[Zn]=!0,this.extensionsRequired[Zn]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const s=e.isOrthographicCamera,i={type:s?"orthographic":"perspective"};return s?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:an.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const s=this.json,i=this.nodeMap;s.animations||(s.animations=[]),e=No.Utils.mergeMorphTargetTracks(e.clone(),t);const n=e.tracks,r=[],a=[];for(let A=0;A<n.length;++A){const l=n[A],h=ti.parseTrackName(l.name);let c=ti.findNode(t,h.nodeName);const d=Sa[h.propertyName];if(h.objectName==="bones"&&(c.isSkinnedMesh===!0?c=c.skeleton.getBoneByName(h.objectIndex):c=void 0),!c||!d)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',l.name),null;const u=1;let g=l.values.length/l.times.length;d===Sa.morphTargetInfluences&&(g/=c.morphTargetInfluences.length);let p;l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(p="CUBICSPLINE",g/=3):l.getInterpolation()===Jl?p="STEP":p="LINEAR",a.push({input:this.processAccessor(new je(l.times,u)),output:this.processAccessor(new je(l.values,g)),interpolation:p}),r.push({sampler:a.length-1,target:{node:i.get(c),path:d}})}return s.animations.push({name:e.name||"clip_"+s.animations.length,samplers:a,channels:r}),s.animations.length-1}processSkin(e){const t=this.json,s=this.nodeMap,i=t.nodes[s.get(e)],n=e.skeleton;if(n===void 0)return null;const r=e.skeleton.bones[0];if(r===void 0)return null;const a=[],A=new Float32Array(n.bones.length*16),l=new Ze;for(let c=0;c<n.bones.length;++c)a.push(s.get(n.bones[c])),l.copy(n.boneInverses[c]),l.multiply(e.bindMatrix).toArray(A,c*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new je(A,16)),joints:a,skeleton:s.get(r)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,s=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const n={};if(s.trs){const a=e.quaternion.toArray(),A=e.position.toArray(),l=e.scale.toArray();$s(a,[0,0,0,1])||(n.rotation=a),$s(A,[0,0,0])||(n.translation=A),$s(l,[1,1,1])||(n.scale=l)}else e.matrixAutoUpdate&&e.updateMatrix(),fp(e.matrix)===!1&&(n.matrix=e.matrix.elements);if(e.name!==""&&(n.name=String(e.name)),this.serializeUserData(e,n),e.isMesh||e.isLine||e.isPoints){const a=this.processMesh(e);a!==null&&(n.mesh=a)}else e.isCamera&&(n.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let A=0,l=e.children.length;A<l;A++){const h=e.children[A];if(h.visible||s.onlyVisible===!1){const c=this.processNode(h);c!==null&&a.push(c)}}a.length>0&&(n.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,n)});const r=t.nodes.push(n)-1;return i.set(e,r),r}processScene(e){const t=this.json,s=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const n=[];for(let r=0,a=e.children.length;r<a;r++){const A=e.children[r];if(A.visible||s.onlyVisible===!1){const l=this.processNode(A);l!==null&&n.push(l)}}n.length>0&&(i.nodes=n),this.serializeUserData(e,i)}processObjects(e){const t=new gt;t.name="AuxScene";for(let s=0;s<e.length;s++)t.children.push(e[s]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const s=[];for(let i=0;i<e.length;i++)e[i]instanceof gt?this.processScene(e[i]):s.push(e[i]);s.length>0&&this.processObjects(s);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,s=this.plugins.length;t<s;t++)e(this.plugins[t])}}class Ep{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const s=this.writer,i=s.json,n=s.extensionsUsed,r={};e.name&&(r.name=e.name),r.color=e.color.toArray(),r.intensity=e.intensity,e.isDirectionalLight?r.type="directional":e.isPointLight?(r.type="point",e.distance>0&&(r.range=e.distance)):e.isSpotLight&&(r.type="spot",e.distance>0&&(r.range=e.distance),r.spot={},r.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,r.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),n[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},n[this.name]=!0);const a=i.extensions[this.name].lights;a.push(r),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class Cp{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class Bp{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const s=this.writer,i=s.extensionsUsed,n={};if(n.clearcoatFactor=e.clearcoat,e.clearcoatMap){const r={index:s.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};s.applyTextureTransform(r,e.clearcoatMap),n.clearcoatTexture=r}if(n.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const r={index:s.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};s.applyTextureTransform(r,e.clearcoatRoughnessMap),n.clearcoatRoughnessTexture=r}if(e.clearcoatNormalMap){const r={index:s.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};s.applyTextureTransform(r,e.clearcoatNormalMap),n.clearcoatNormalTexture=r}t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class yp{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const s=this.writer,i=s.extensionsUsed,n={};if(n.iridescenceFactor=e.iridescence,e.iridescenceMap){const r={index:s.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};s.applyTextureTransform(r,e.iridescenceMap),n.iridescenceTexture=r}if(n.iridescenceIor=e.iridescenceIOR,n.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],n.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const r={index:s.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};s.applyTextureTransform(r,e.iridescenceThicknessMap),n.iridescenceThicknessTexture=r}t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class wp{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const s=this.writer,i=s.extensionsUsed,n={};if(n.transmissionFactor=e.transmission,e.transmissionMap){const r={index:s.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};s.applyTextureTransform(r,e.transmissionMap),n.transmissionTexture=r}t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class Qp{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const s=this.writer,i=s.extensionsUsed,n={};if(n.thicknessFactor=e.thickness,e.thicknessMap){const r={index:s.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};s.applyTextureTransform(r,e.thicknessMap),n.thicknessTexture=r}n.attenuationDistance=e.attenuationDistance,n.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class vp{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const i=this.writer.extensionsUsed,n={};n.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class xp{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(cp)&&!e.specularIntensityMap&&!e.specularColorTexture)return;const s=this.writer,i=s.extensionsUsed,n={};if(e.specularIntensityMap){const r={index:s.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};s.applyTextureTransform(r,e.specularIntensityMap),n.specularTexture=r}if(e.specularColorMap){const r={index:s.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};s.applyTextureTransform(r,e.specularColorMap),n.specularColorTexture=r}n.specularFactor=e.specularIntensity,n.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class bp{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const s=this.writer,i=s.extensionsUsed,n={};if(e.sheenRoughnessMap){const r={index:s.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};s.applyTextureTransform(r,e.sheenRoughnessMap),n.sheenRoughnessTexture=r}if(e.sheenColorMap){const r={index:s.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};s.applyTextureTransform(r,e.sheenColorMap),n.sheenColorTexture=r}n.sheenRoughnessFactor=e.sheenRoughness,n.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class Sp{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const s=this.writer,i=s.extensionsUsed,n={};if(e.anisotropyMap){const r={index:s.processTexture(e.anisotropyMap)};s.applyTextureTransform(r,e.anisotropyMap),n.anisotropyTexture=r}n.anisotropyStrength=e.anisotropy,n.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}class _p{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const i=this.writer.extensionsUsed,n={};n.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=n,i[this.name]=!0}}No.Utils={insertKeyframe:function(o,e){const s=o.getValueSize(),i=new o.TimeBufferType(o.times.length+1),n=new o.ValueBufferType(o.values.length+s),r=o.createInterpolant(new o.ValueBufferType(s));let a;if(o.times.length===0){i[0]=e;for(let A=0;A<s;A++)n[A]=0;a=0}else if(e<o.times[0]){if(Math.abs(o.times[0]-e)<.001)return 0;i[0]=e,i.set(o.times,1),n.set(r.evaluate(e),0),n.set(o.values,s),a=0}else if(e>o.times[o.times.length-1]){if(Math.abs(o.times[o.times.length-1]-e)<.001)return o.times.length-1;i[i.length-1]=e,i.set(o.times,0),n.set(o.values,0),n.set(r.evaluate(e),o.values.length),a=i.length-1}else for(let A=0;A<o.times.length;A++){if(Math.abs(o.times[A]-e)<.001)return A;if(o.times[A]<e&&o.times[A+1]>e){i.set(o.times.slice(0,A+1),0),i[A+1]=e,i.set(o.times.slice(A+1),A+2),n.set(o.values.slice(0,(A+1)*s),0),n.set(r.evaluate(e),(A+1)*s),n.set(o.values.slice((A+1)*s),(A+2)*s),a=A+1;break}}return o.times=i,o.values=n,a},mergeMorphTargetTracks:function(o,e){const t=[],s={},i=o.tracks;for(let n=0;n<i.length;++n){let r=i[n];const a=ti.parseTrackName(r.name),A=ti.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(r);continue}if(r.createInterpolant!==r.InterpolantFactoryMethodDiscrete&&r.createInterpolant!==r.InterpolantFactoryMethodLinear){if(r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),r=r.clone(),r.setInterpolation(xo)}const l=A.morphTargetInfluences.length,h=A.morphTargetDictionary[a.propertyIndex];if(h===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let c;if(s[A.uuid]===void 0){c=r.clone();const u=new c.ValueBufferType(l*c.times.length);for(let g=0;g<c.times.length;g++)u[g*l+h]=c.values[g];c.name=(a.nodeName||"")+".morphTargetInfluences",c.values=u,s[A.uuid]=c,t.push(c);continue}const d=r.createInterpolant(new r.ValueBufferType(1));c=s[A.uuid];for(let u=0;u<c.times.length;u++)c.values[u*l+h]=d.evaluate(c.times[u]);for(let u=0;u<r.times.length;u++){const g=this.insertKeyframe(c,r.times[u]);c.values[g*l+h]=r.values[u]}}return o.tracks=t,o}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=o=>o.material!==void 0&&o.userData&&o.userData.variantMaterials&&!!Array.from(o.userData.variantMaterials.values()).filter(e=>Xi(e.material)),Xi=o=>o&&o.isMaterial&&!Array.isArray(o);class Tp{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){const t=new Set;for(const s of e)s.traverse(i=>{if(!Da(i))return;const n=i.userData.variantMaterials,r=i.userData.variantData;for(const[a,A]of r){const l=n.get(A.index);l&&Xi(l.material)&&t.add(a)}});t.forEach(s=>this.variantNames.push(s))}writeMesh(e,t){if(!Da(e))return;const s=e.userData,i=s.variantMaterials,n=s.variantData,r=new Map,a=new Map,A=Array.from(n.values()).sort((c,d)=>c.index-d.index);for(const[c,d]of A.entries())a.set(d.index,c);for(const c of n.values()){const d=i.get(c.index);if(!d||!Xi(d.material))continue;const u=this.writer.processMaterial(d.material);r.has(u)||r.set(u,{material:u,variants:[]}),r.get(u).variants.push(a.get(c.index))}const l=Array.from(r.values()).map(c=>c.variants.sort((d,u)=>d-u)&&c).sort((c,d)=>c.material-d.material);if(l.length===0)return;const h=Xi(s.originalMaterial)?this.writer.processMaterial(s.originalMaterial):-1;for(const c of t.primitives)h>=0&&(c.material=h),c.extensions=c.extensions||{},c.extensions[this.name]={mappings:l}}afterParse(){if(this.variantNames.length===0)return;const e=this.writer.json;e.extensions=e.extensions||{};const t=this.variantNames.map(s=>({name:s}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}class Rp{constructor(e,t,s,i,n){this.xrLight=e,this.renderer=t,this.lightProbe=s,this.xrWebGLBinding=null,this.estimationStartCallback=n,this.frameCallback=this.onXRFrame.bind(this);const r=t.xr.getSession();if(i&&"XRWebGLBinding"in window){const a=new Wl(16);e.environment=a.texture;const A=t.getContext();switch(r.preferredReflectionFormat){case"srgba8":A.getExtension("EXT_sRGB");break;case"rgba16f":A.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(r,A),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}r.requestAnimationFrame(this.frameCallback)}updateReflection(){const e=this.renderer.properties.get(this.xrLight.environment);if(e){const t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);const i=t.getLightEstimate(this.lightProbe);if(i){this.xrLight.lightProbe.sh.fromArray(i.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const n=Math.max(1,Math.max(i.primaryLightIntensity.x,Math.max(i.primaryLightIntensity.y,i.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(i.primaryLightIntensity.x/n,i.primaryLightIntensity.y/n,i.primaryLightIntensity.z/n),this.xrLight.directionalLight.intensity=n,this.xrLight.directionalLight.position.copy(i.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class Mp extends zi{constructor(e,t=!0){super(),this.lightProbe=new Xh,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new Ol,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let s=null,i=!1;e.xr.addEventListener("sessionstart",()=>{const n=e.xr.getSession();"requestLightProbe"in n&&n.requestLightProbe({reflectionFormat:n.preferredReflectionFormat}).then(r=>{s=new Rp(this,e,r,t,()=>{i=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{s&&(s.dispose(),s=null),i&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{s&&(s.dispose(),s=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=1e4,Dp=.001,Tc=50;class Ce{constructor(e=Tc){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max(Dp,e)}update(e,t,s,i){const n=2e-4*this.naturalFrequency;if(e==null||i===0||e===t&&this.velocity===0)return t;if(s<0)return e;const r=e-t,a=this.velocity+this.naturalFrequency*r,A=r+s*a,l=Math.exp(-this.naturalFrequency*s),h=(a-this.naturalFrequency*A)*l,c=-this.naturalFrequency*(h+a*l);return Math.abs(h)<n*Math.abs(i)&&c*r>=0?(this.velocity=0,t):(this.velocity=h,t+A*l)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=.2,La=.03,Lp=.75,Rc=12,Fp=Math.PI/(2*Rc),Fa=new xe,Qi=(o,e,t)=>{let s=e>0?t>0?0:-Math.PI/2:t>0?Math.PI/2:Math.PI;for(let i=0;i<=Rc;++i)o.push(e+(as-La)*Math.cos(s),t+(as-La)*Math.sin(s),0,e+as*Math.cos(s),t+as*Math.sin(s),0),s+=Fp};class Na extends P{constructor(e,t){const s=new wo,i=[],n=[],{size:r,boundingBox:a}=e,A=r.x/2,l=(t==="back"?r.y:r.z)/2;Qi(n,A,l),Qi(n,-A,l),Qi(n,-A,-l),Qi(n,A,-l);const h=n.length/3;for(let u=0;u<h-2;u+=2)i.push(u,u+1,u+3,u,u+3,u+2);const c=h-2;i.push(c,c+1,1,c,1,0),s.setAttribute("position",new Zh(n,3)),s.setIndex(i),super(s),this.side=t;const d=this.material;switch(d.side=Gt,d.transparent=!0,d.opacity=0,this.goalOpacity=0,this.opacityDamper=new Ce,this.hitPlane=new P(new En(2*(A+as),2*(l+as))),this.hitPlane.visible=!1,this.hitPlane.material.side=Gt,this.add(this.hitPlane),a.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=a.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=a.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.offsetHeight=0}getHit(e,t,s){Fa.set(t,-s),this.hitPlane.visible=!0;const i=e.positionAndNormalFromPoint(Fa,this.hitPlane);return this.hitPlane.visible=!1,i==null?null:i.position}getExpandedHit(e,t,s){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const i=this.getHit(e,t,s);return this.hitPlane.scale.set(1,1,1),i}set offsetHeight(e){e-=.001,this.side==="back"?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?Lp:0}updateOpacity(e){const t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){var e;const{geometry:t,material:s}=this.hitPlane;t.dispose(),s.dispose(),this.geometry.dispose(),this.material.dispose(),(e=this.parent)===null||e===void 0||e.remove(this)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=(o,e)=>({type:"number",number:o,unit:e}),ut=(()=>{const o={};return t=>{const s=t;if(s in o)return o[s];const i=[];let n=0;for(;t;){if(++n>1e3){t="";break}const r=Mc(t),a=r.nodes[0];if(a==null||a.terms.length===0)break;i.push(a),t=r.remainingInput}return o[s]=i}})(),Mc=(()=>{const o=/^(\-\-|[a-z\u0240-\uffff])/i,e=/^([\*\+\/]|[\-]\s)/i,t=/^[\),]/,s="(",i="#";return n=>{const r=[];for(;n.length&&(n=n.trim(),!t.test(n));)if(n[0]===s){const{nodes:a,remainingInput:A}=Ua(n);n=A,r.push({type:"function",name:{type:"ident",value:"calc"},arguments:a})}else if(o.test(n)){const a=Np(n),A=a.nodes[0];if(n=a.remainingInput,n[0]===s){const{nodes:l,remainingInput:h}=Ua(n);r.push({type:"function",name:A,arguments:l}),n=h}else r.push(A)}else if(e.test(n))r.push({type:"operator",value:n[0]}),n=n.slice(1);else{const{nodes:a,remainingInput:A}=n[0]===i?kp(n):Up(n);if(a.length===0)break;r.push(a[0]),n=A}return{nodes:[{type:"expression",terms:r}],remainingInput:n}}})(),Np=(()=>{const o=/[^a-z0-9_\-\u0240-\uffff]/i;return e=>{const t=e.match(o),s=t==null?e:e.substr(0,t.index),i=t==null?"":e.substr(t.index);return{nodes:[{type:"ident",value:s}],remainingInput:i}}})(),Up=(()=>{const o=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,e=/^[a-z%]+/i,t=/^(m|mm|cm|rad|deg|[%])$/;return s=>{const i=s.match(o),n=i==null?"0":i[0];s=n==null?s:s.slice(n.length);const r=s.match(e);let a=r!=null&&r[0]!==""?r[0]:null;const A=r==null?s:s.slice(a.length);return a!=null&&!t.test(a)&&(a=null),{nodes:[{type:"number",number:parseFloat(n)||0,unit:a}],remainingInput:A}}})(),kp=(()=>{const o=/^[a-f0-9]*/i;return e=>{e=e.slice(1).trim();const t=e.match(o);return{nodes:t==null?[]:[{type:"hex",value:t[0]}],remainingInput:t==null?e:e.slice(t[0].length)}}})(),Ua=o=>{const e=[];for(o=o.slice(1).trim();o.length;){const t=Mc(o);if(e.push(t.nodes[0]),o=t.remainingInput.trim(),o[0]===",")o=o.slice(1).trim();else if(o[0]===")"){o=o.slice(1);break}}return{nodes:e,remainingInput:o}},ka=Symbol("visitedTypes");class Gp{constructor(e){this[ka]=e}walk(e,t){const s=e.slice();for(;s.length;){const i=s.shift();switch(this[ka].indexOf(i.type)>-1&&t(i),i.type){case"expression":s.unshift(...i.terms);break;case"function":s.unshift(i.name,...i.arguments);break}}}}const pt=Object.freeze({type:"number",number:0,unit:null});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=(o,e=0)=>{let{number:t,unit:s}=o;if(!isFinite(t))t=e,s="rad";else if(o.unit==="rad"||o.unit==null)return o;return{type:"number",number:(s==="deg"&&t!=null?t:0)*Math.PI/180,unit:"rad"}},Ga=(o,e=0)=>{let{number:t,unit:s}=o;if(!isFinite(t))t=e,s="m";else if(o.unit==="m")return o;let i;switch(s){default:i=1;break;case"cm":i=1/100;break;case"mm":i=1/1e3;break}return{type:"number",number:i*t,unit:"m"}},Xe=(()=>{const o=t=>t,e={rad:o,deg:wn,m:o,mm:Ga,cm:Ga};return(t,s=pt)=>{isFinite(t.number)||(t.number=s.number,t.unit=s.unit);const{unit:i}=t;if(i==null)return t;const n=e[i];return n==null?s:n(t)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dc,Pa,Oa;const Bs=Symbol("evaluate"),Zi=Symbol("lastValue");class te{constructor(){this[Dc]=null}static evaluatableFor(e,t=pt){if(e instanceof te)return e;if(e.type==="number")return e.unit==="%"?new Pp(e,t):e;switch(e.name.value){case"calc":return new $p(e,t);case"env":return new Op(e)}return pt}static evaluate(e){return e instanceof te?e.evaluate():e}static isConstant(e){return e instanceof te?e.isConstant:!0}static applyIntrinsics(e,t){const{basis:s,keywords:i}=t,{auto:n}=i;return s.map((r,a)=>{const A=n[a]==null?r:n[a];let l=e[a]?e[a]:A;if(l.type==="ident"){const h=l.value;h in i&&(l=i[h][a])}return(l==null||l.type==="ident")&&(l=A),l.unit==="%"?ce(l.number/100*r.number,r.unit):(l=Xe(l,r),l.unit!==r.unit?r:l)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[Zi]==null)&&(this[Zi]=this[Bs]()),this[Zi]}}Dc=Zi;const Ha=Symbol("percentage"),tr=Symbol("basis");class Pp extends te{constructor(e,t){super(),this[Ha]=e,this[tr]=t}get isConstant(){return!0}[Bs](){return ce(this[Ha].number/100*this[tr].number,this[tr].unit)}}const vi=Symbol("identNode");class Op extends te{constructor(e){super(),this[Pa]=null;const t=e.arguments.length?e.arguments[0].terms[0]:null;t!=null&&t.type==="ident"&&(this[vi]=t)}get isConstant(){return!1}[(Pa=vi,Bs)](){if(this[vi]!=null)switch(this[vi].value){case"window-scroll-y":const e=window.pageYOffset,t=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:e/(t-window.innerHeight)||0,unit:null}}return pt}}const Hp=/[\*\/]/,Kt=Symbol("evaluator");class $p extends te{constructor(e,t=pt){if(super(),this[Oa]=null,e.arguments.length!==1)return;const s=e.arguments[0].terms.slice(),i=[];for(;s.length;){const n=s.shift();if(i.length>0){const r=i[i.length-1];if(r.type==="operator"&&Hp.test(r.value)){const a=i.pop(),A=i.pop();if(A==null)return;i.push(new Va(a,te.evaluatableFor(A,t),te.evaluatableFor(n,t)));continue}}i.push(n.type==="operator"?n:te.evaluatableFor(n,t))}for(;i.length>2;){const[n,r,a]=i.splice(0,3);if(r.type!=="operator")return;i.unshift(new Va(r,te.evaluatableFor(n,t),te.evaluatableFor(a,t)))}i.length===1&&(this[Kt]=i[0])}get isConstant(){return this[Kt]==null||te.isConstant(this[Kt])}[(Oa=Kt,Bs)](){return this[Kt]!=null?te.evaluate(this[Kt]):pt}}const $a=Symbol("operator"),sr=Symbol("left"),ir=Symbol("right");class Va extends te{constructor(e,t,s){super(),this[$a]=e,this[sr]=t,this[ir]=s}get isConstant(){return te.isConstant(this[sr])&&te.isConstant(this[ir])}[Bs](){const e=Xe(te.evaluate(this[sr])),t=Xe(te.evaluate(this[ir])),{number:s,unit:i}=e,{number:n,unit:r}=t;if(r!=null&&i!=null&&r!=i)return pt;const a=i||r;let A;switch(this[$a].value){case"+":A=s+n;break;case"-":A=s-n;break;case"/":A=s/n;break;case"*":A=s*n;break;default:return pt}return{type:"number",number:A,unit:a}}}const nr=Symbol("evaluatables"),qa=Symbol("intrinsics");class Lc extends te{constructor(e,t){super(),this[qa]=t;const s=e[0],i=s!=null?s.terms:[];this[nr]=t.basis.map((n,r)=>{const a=i[r];return a==null?{type:"ident",value:"auto"}:a.type==="ident"?a:te.evaluatableFor(a,n)})}get isConstant(){for(const e of this[nr])if(!te.isConstant(e))return!1;return!0}[Bs](){const e=this[nr].map(t=>te.evaluate(t));return te.applyIntrinsics(e,this[qa]).map(t=>t.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fc,Nc,Uc,kc;const Yt=Symbol("instances"),Ka=Symbol("activateListener"),Ya=Symbol("deactivateListener"),rr=Symbol("notifyInstances"),za=Symbol("notify"),Ja=Symbol("callback");class De{constructor(e){this[Ja]=e}static[rr](){for(const e of De[Yt])e[za]()}static[(Fc=Yt,Ka)](){window.addEventListener("scroll",this[rr],{passive:!0})}static[Ya](){window.removeEventListener("scroll",this[rr])}observe(){De[Yt].size===0&&De[Ka](),De[Yt].add(this)}disconnect(){De[Yt].delete(this),De[Yt].size===0&&De[Ya]()}[za](){this[Ja]()}}De[Fc]=new Set;const ja=Symbol("computeStyleCallback"),Gc=Symbol("astWalker"),Vs=Symbol("dependencies"),Pc=Symbol("onScroll");class Vp{constructor(e){this[Nc]={},this[Uc]=new Gp(["function"]),this[kc]=()=>{this[ja]({relatedState:"window-scroll"})},this[ja]=e}observeEffectsFor(e){const t={},s=this[Vs];this[Gc].walk(e,i=>{const{name:n}=i,a=i.arguments[0].terms[0];if(!(n.value!=="env"||a==null||a.type!=="ident"))switch(a.value){case"window-scroll-y":if(t["window-scroll"]==null){const A="window-scroll"in s?s["window-scroll"]:new De(this[Pc]);A.observe(),delete s["window-scroll"],t["window-scroll"]=A}break}});for(const i in s)s[i].disconnect();this[Vs]=t}dispose(){for(const e in this[Vs])this[Vs][e].disconnect()}}Nc=Vs,Uc=Gc,kc=Pc;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt=o=>{const e=o.observeEffects||!1,t=o.intrinsics instanceof Function?o.intrinsics:()=>o.intrinsics;return(s,i)=>{const n=s.updated,r=s.connectedCallback,a=s.disconnectedCallback,A=Symbol(`${i}StyleEffector`),l=Symbol(`${i}StyleEvaluator`),h=Symbol(`${i}UpdateEvaluator`),c=Symbol(`${i}EvaluateAndSync`);Object.defineProperties(s,{[A]:{value:null,writable:!0},[l]:{value:null,writable:!0},[h]:{value:function(){const d=ut(this[i]);this[l]=new Lc(d,t(this)),this[A]==null&&e&&(this[A]=new Vp(()=>this[c]())),this[A]!=null&&this[A].observeEffectsFor(d)}},[c]:{value:function(){if(this[l]==null)return;const d=this[l].evaluate();this[o.updateHandler](d)}},updated:{value:function(d){d.has(i)&&(this[h](),this[c]()),n.call(this,d)}},connectedCallback:{value:function(){r.call(this),this.requestUpdate(i,this[i])}},disconnectedCallback:{value:function(){a.call(this),this[A]!=null&&(this[A].dispose(),this[A]=null)}}})}};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=o=>o<.5?2*o*o:-1+(4-2*o)*o,qp=(o,e,t=Oc)=>s=>o+(e-o)*t(s),Kp=(o,e)=>{const t=i=>n=>i+=n,s=e.map(t(0));return i=>{i=Fe(i,0,1),i*=s[s.length-1];const n=s.findIndex(A=>A>=i),r=n<1?0:s[n-1],a=s[n];return o[n]((i-r)/(a-r))}},As=o=>{const e=[],t=[];let s=o.initialValue;for(let i=0;i<o.keyframes.length;++i){const n=o.keyframes[i],{value:r,frames:a}=n,A=n.ease||Oc,l=qp(s,r,A);e.push(l),t.push(a),s=r}return Kp(e,t)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe=globalThis&&globalThis.__decorate||function(o,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,s);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(n=(i<3?r(n):i>3?r(e,t,n):r(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const Yp=5e3,zp=As({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),Jp=As({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),jp=30,Wp=12,Hc="0deg 75deg 105%",Xp="auto auto auto",Zp="auto",ef=2.2,tf=["front","right","back","left"],sf=["upper-","","lower-"],nf=3e3,rf=". Use mouse, touch or arrow keys to move.",xi={AUTO:"auto",NONE:"none"},or={BASIC:"basic",WIGGLE:"wiggle"},of={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},Wa=()=>({basis:[wn(ce(jp,"deg"))],keywords:{auto:[null]}}),af=()=>({basis:[wn(ce(Wp,"deg"))],keywords:{auto:[null]}}),$c=(()=>{const o=ut(Hc)[0].terms,e=Xe(o[0]),t=Xe(o[1]);return s=>{const i=s[x].idealCameraDistance();return{basis:[e,t,ce(i,"m")],keywords:{auto:[null,null,ce(105,"%")]}}}})(),Af=o=>{const e=ef*o[x].boundingSphere.radius;return{basis:[ce(-1/0,"rad"),ce(Math.PI/8,"rad"),ce(e,"m")],keywords:{auto:[null,null,null]}}},lf=o=>{const e=$c(o),s=new Lc([],e).evaluate()[2];return{basis:[ce(1/0,"rad"),ce(Math.PI-Math.PI/8,"rad"),ce(s,"m")],keywords:{auto:[null,null,null]}}},cf=o=>{const e=o[x].boundingBox.getCenter(new U);return{basis:[ce(e.x,"m"),ce(e.y,"m"),ce(e.z,"m")],keywords:{auto:[null,null,null]}}},Vc=Math.PI/2,hf=Math.PI/3,uf=Vc/2,df=2*Math.PI,z=Symbol("controls"),en=Symbol("panElement"),ar=Symbol("promptElement"),bi=Symbol("promptAnimatedContainer"),Ar=Symbol("fingerAnimatedContainers"),Si=Symbol("deferInteractionPrompt"),Xa=Symbol("updateAria"),Za=Symbol("updateCameraForRadius"),zt=Symbol("cancelPrompts"),lr=Symbol("onChange"),bs=Symbol("onPointerChange"),Bt=Symbol("waitingToPromptUser"),_i=Symbol("userHasInteracted"),Jt=Symbol("promptElementVisibleTime"),Ss=Symbol("lastPromptOffset"),Ti=Symbol("cancellationSource"),cr=Symbol("lastSpherical"),_s=Symbol("jumpCamera"),hr=Symbol("initialized"),Ts=Symbol("maintainThetaPhi"),eA=Symbol("syncCameraOrbit"),tA=Symbol("syncFieldOfView"),sA=Symbol("syncCameraTarget"),iA=Symbol("syncMinCameraOrbit"),nA=Symbol("syncMaxCameraOrbit"),rA=Symbol("syncMinFieldOfView"),oA=Symbol("syncMaxFieldOfView"),gf=o=>{var e,t,s,i,n,r,a,A,l,h,c,d,u,g,p,f,I;class C extends o{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=Hc,this.cameraTarget=Xp,this.fieldOfView=Zp,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=nf,this.interactionPrompt=xi.AUTO,this.interactionPromptStyle=or.WIGGLE,this.orbitSensitivity=1,this.touchAction=of.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=Tc,this[e]=this.shadowRoot.querySelector(".interaction-prompt"),this[t]=this.shadowRoot.querySelector("#prompt"),this[s]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[i]=this.shadowRoot.querySelector(".pan-target"),this[n]=0,this[r]=1/0,this[a]=!1,this[A]=!1,this[l]=se.AUTOMATIC,this[h]=new If(this[x].camera,this[ke],this[x]),this[c]=new Ji,this[d]=!1,this[u]=!1,this[g]=!1,this[p]=()=>{const m=this[z].changeSource;this[Ti]=m,m===se.USER_INTERACTION&&(this[_i]=!0,this[Si]())},this[f]=()=>{this[Xa](),this[Ie]();const m=this[z].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:m}}))},this[I]=m=>{m.type==="pointer-change-start"?this[Ws].classList.add("pointer-tumbling"):this[Ws].classList.remove("pointer-tumbling")}}get inputSensitivity(){return this[z].inputSensitivity}set inputSensitivity(m){this[z].inputSensitivity=m}getCameraOrbit(){const{theta:m,phi:B,radius:y}=this[cr];return{theta:m,phi:B,radius:y,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return lt(this[K].isPresenting?this[K].arRenderer.target:this[x].getTarget())}getFieldOfView(){return this[z].getFieldOfView()}getMinimumFieldOfView(){return this[z].options.minimumFieldOfView}getMaximumFieldOfView(){return this[z].options.maximumFieldOfView}getIdealAspect(){return this[x].idealAspect}jumpCameraToGoal(){this[_s]=!0,this.requestUpdate(_s,!1)}resetInteractionPrompt(){this[Ss]=0,this[Jt]=1/0,this[_i]=!1,this[Bt]=this.interactionPrompt===xi.AUTO&&this.cameraControls}zoom(m){const B=new WheelEvent("wheel",{deltaY:-30*m});this[ke].dispatchEvent(B)}connectedCallback(){super.connectedCallback(),this[z].addEventListener("user-interaction",this[zt]),this[z].addEventListener("pointer-change-start",this[bs]),this[z].addEventListener("pointer-change-end",this[bs])}disconnectedCallback(){super.disconnectedCallback(),this[z].removeEventListener("user-interaction",this[zt]),this[z].removeEventListener("pointer-change-start",this[bs]),this[z].removeEventListener("pointer-change-end",this[bs])}updated(m){super.updated(m);const B=this[z],y=this[x];if(m.has("cameraControls")&&(this.cameraControls?(B.enableInteraction(),this.interactionPrompt===xi.AUTO&&(this[Bt]=!0)):(B.disableInteraction(),this[Si]()),this[ke].setAttribute("aria-label",this[js])),m.has("disableZoom")&&(B.disableZoom=this.disableZoom),m.has("disablePan")&&(B.enablePan=!this.disablePan),m.has("disableTap")&&(B.enableTap=!this.disableTap),(m.has("interactionPrompt")||m.has("cameraControls")||m.has("src"))&&(this.interactionPrompt===xi.AUTO&&this.cameraControls&&!this[_i]?this[Bt]=!0:this[Si]()),m.has("interactionPromptStyle")&&(this[bi].style.opacity=this.interactionPromptStyle==or.BASIC?"1":"0"),m.has("touchAction")){const w=this.touchAction;B.applyOptions({touchAction:w}),B.updateTouchActionStyle()}m.has("orbitSensitivity")&&(B.orbitSensitivity=this.orbitSensitivity),m.has("interpolationDecay")&&(B.setDamperDecayTime(this.interpolationDecay),y.setTargetDamperDecayTime(this.interpolationDecay)),this[_s]===!0&&Promise.resolve().then(()=>{B.jumpToGoal(),y.jumpToGoal(),this[lr](),this[_s]=!1})}async updateFraming(){const m=this[x],B=m.adjustedFoV(m.framedFoVDeg);await m.updateFraming();const y=m.adjustedFoV(m.framedFoVDeg),w=this[z].getFieldOfView()/B;this[z].setFieldOfView(y*w),this[Ts]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(m,B,y){const w=this[ke],Q=this[Ar];if(Q[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const v=new Array;v.push({x:As(B.x),y:As(B.y)});const S=[{x:v[0].x(0),y:v[0].y(0)}];y!=null&&(v.push({x:As(y.x),y:As(y.y)}),S.push({x:v[1].x(0),y:v[1].y(0)}));let _=performance.now();const{width:k,height:j}=this[x],D=this.getBoundingClientRect(),O=L=>{for(const[W,ie]of S.entries()){const{style:ee}=Q[W];ee.transform=`translateX(${k*ie.x}px) translateY(${j*ie.y}px)`,L==="pointerdown"?ee.opacity="1":L==="pointerup"&&(ee.opacity="0");const pe={pointerId:W-5678,pointerType:"touch",target:w,clientX:k*ie.x+D.x,clientY:j*ie.y+D.y,altKey:!0};w.dispatchEvent(new PointerEvent(L,pe))}},$=()=>{const L=this[Ti];if(L!==se.AUTOMATIC||!w.isConnected){for(const ie of this[Ar])ie.style.opacity="0";O("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:L}})),document.removeEventListener("visibilitychange",M);return}const W=Math.min(1,(performance.now()-_)/m);for(const[ie,ee]of S.entries())ee.x=v[ie].x(W),ee.y=v[ie].y(W);O("pointermove"),W<1?requestAnimationFrame($):(O("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:se.AUTOMATIC}})),document.removeEventListener("visibilitychange",M))},M=()=>{let L=0;document.visibilityState==="hidden"?L=performance.now()-_:_=performance.now()-L};document.addEventListener("visibilitychange",M),O("pointerdown"),this[Ti]=se.AUTOMATIC,requestAnimationFrame($)}[(e=ar,t=bi,s=Ar,i=en,n=Ss,r=Jt,a=_i,A=Bt,l=Ti,h=z,c=cr,d=_s,u=hr,g=Ts,tA)](m){const B=this[z],y=this[x];y.framedFoVDeg=m[0]*180/Math.PI,B.changeSource=se.NONE,B.setFieldOfView(y.adjustedFoV(y.framedFoVDeg)),this[zt]()}[eA](m){const B=this[z];if(this[Ts]){const{theta:y,phi:w}=this.getCameraOrbit();m[0]=y,m[1]=w,this[Ts]=!1}B.changeSource=se.NONE,B.setOrbit(m[0],m[1],m[2]),this[zt]()}[iA](m){this[z].applyOptions({minimumAzimuthalAngle:m[0],minimumPolarAngle:m[1],minimumRadius:m[2]}),this.jumpCameraToGoal()}[nA](m){this[z].applyOptions({maximumAzimuthalAngle:m[0],maximumPolarAngle:m[1],maximumRadius:m[2]}),this[Za](m[2]),this.jumpCameraToGoal()}[rA](m){this[z].applyOptions({minimumFieldOfView:m[0]*180/Math.PI}),this.jumpCameraToGoal()}[oA](m){const B=this[x].adjustedFoV(m[0]*180/Math.PI);this[z].applyOptions({maximumFieldOfView:B}),this.jumpCameraToGoal()}[sA](m){const[B,y,w]=m;this[K].arRenderer.isPresenting||this[x].setTarget(B,y,w),this[z].changeSource=se.NONE,this[K].arRenderer.updateTarget(),this[zt]()}[Ge](m,B){if(super[Ge](m,B),this[K].isPresenting||!this[Ht]())return;const y=this[z],w=this[x],Q=performance.now();if(this[Bt]&&this.loaded&&Q>this[Ys]+this.interactionPromptThreshold&&(this[Bt]=!1,this[Jt]=Q,this[ar].classList.add("visible")),isFinite(this[Jt])&&this.interactionPromptStyle===or.WIGGLE){const _=(Q-this[Jt])/Yp%1,k=zp(_),j=Jp(_);if(this[bi].style.opacity=`${j}`,k!==this[Ss]){const D=k*w.width*.05,O=(k-this[Ss])*Math.PI/16;this[bi].style.transform=`translateX(${D}px)`,y.changeSource=se.AUTOMATIC,y.adjustOrbit(O,0,0),this[Ss]=k}}const v=y.update(m,B),S=w.updateTarget(B);(v||S)&&this[lr]()}[Si](){this[Bt]=!1,this[ar].classList.remove("visible"),this[Jt]=1/0}[Za](m){const B=Math.max(this[x].boundingSphere.radius,m),y=0,w=Math.abs(2*B);this[z].updateNearFar(y,w)}[Xa](){const{theta:m,phi:B}=this[z].getCameraSpherical(this[cr]),y=(4+Math.floor((m%df+uf)/Vc))%4,w=Math.floor(B/hf),Q=tf[y],v=sf[w];this[fo](`View from stage ${v}${Q}`)}get[js](){return super[js].replace(/\.$/,"")+(this.cameraControls?rf:"")}async[Ai](m){const B=this[z],y=this[x],w=y.adjustedFoV(y.framedFoVDeg);super[Ai](m);const Q=y.adjustedFoV(y.framedFoVDeg)/w,v=B.getFieldOfView()*(isFinite(Q)?Q:1);B.updateAspect(this[x].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[z].setFieldOfView(v),this.jumpCameraToGoal()}[ft](){super[ft](),this[hr]?this[Ts]=!0:this[hr]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return p=zt,f=lr,I=bs,oe([F({type:Boolean,attribute:"camera-controls"})],C.prototype,"cameraControls",void 0),oe([nt({intrinsics:$c,observeEffects:!0,updateHandler:eA}),F({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],C.prototype,"cameraOrbit",void 0),oe([nt({intrinsics:cf,observeEffects:!0,updateHandler:sA}),F({type:String,attribute:"camera-target",hasChanged:()=>!0})],C.prototype,"cameraTarget",void 0),oe([nt({intrinsics:Wa,observeEffects:!0,updateHandler:tA}),F({type:String,attribute:"field-of-view",hasChanged:()=>!0})],C.prototype,"fieldOfView",void 0),oe([nt({intrinsics:Af,updateHandler:iA}),F({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],C.prototype,"minCameraOrbit",void 0),oe([nt({intrinsics:lf,updateHandler:nA}),F({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],C.prototype,"maxCameraOrbit",void 0),oe([nt({intrinsics:af,updateHandler:rA}),F({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],C.prototype,"minFieldOfView",void 0),oe([nt({intrinsics:Wa,updateHandler:oA}),F({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],C.prototype,"maxFieldOfView",void 0),oe([F({type:Number,attribute:"interaction-prompt-threshold"})],C.prototype,"interactionPromptThreshold",void 0),oe([F({type:String,attribute:"interaction-prompt"})],C.prototype,"interactionPrompt",void 0),oe([F({type:String,attribute:"interaction-prompt-style"})],C.prototype,"interactionPromptStyle",void 0),oe([F({type:Number,attribute:"orbit-sensitivity"})],C.prototype,"orbitSensitivity",void 0),oe([F({type:String,attribute:"touch-action"})],C.prototype,"touchAction",void 0),oe([F({type:Boolean,attribute:"disable-zoom"})],C.prototype,"disableZoom",void 0),oe([F({type:Boolean,attribute:"disable-pan"})],C.prototype,"disablePan",void 0),oe([F({type:Boolean,attribute:"disable-tap"})],C.prototype,"disableTap",void 0),oe([F({type:Number,attribute:"interpolation-decay"})],C.prototype,"interpolationDecay",void 0),C};/* @license
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=.018,aA=2,ff=300,mf=new xe,AA=new U,lA=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),Ri=Math.PI/8,Mi=.04,Di=10,se={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class If extends hi{constructor(e,t,s){super(),this.camera=e,this.element=t,this.scene=s,this.orbitSensitivity=1,this.inputSensitivity=1,this.changeSource=se.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new To,this.panPerPixel=0,this.spherical=new Ji,this.goalSpherical=new Ji,this.thetaDamper=new Ce,this.phiDamper=new Ce,this.radiusDamper=new Ce,this.logFov=Math.log(lA.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Ce,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=i=>{if(this.enablePan)i.preventDefault();else for(const n of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:n.id})))},this.touchModeZoom=(i,n)=>{if(!this._disableZoom){const r=this.twoTouchDistance(this.pointers[0],this.pointers[1]),a=Mi*(this.lastSeparation-r)*50/this.scene.height;this.lastSeparation=r,this.userAdjustOrbit(0,0,a)}this.panPerPixel>0&&this.movePan(i,n)},this.disableScroll=i=>{i.preventDefault()},this.touchModeRotate=(i,n)=>{const{touchAction:r}=this._options;if(!this.touchDecided&&r!=="none"){this.touchDecided=!0;const a=Math.abs(i),A=Math.abs(n);if(this.changeSource===se.USER_INTERACTION&&(r==="pan-y"&&A>a||r==="pan-x"&&a>A)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(i,n)},this.onPointerDown=i=>{if(this.pointers.length>2)return;const{element:n}=this;this.pointers.length===0&&(n.addEventListener("pointermove",this.onPointerMove),n.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=i.clientX,this.startPointerPosition.clientY=i.clientY,this.startTime=performance.now());try{n.setPointerCapture(i.pointerId)}catch{}this.pointers.push({clientX:i.clientX,clientY:i.clientY,id:i.pointerId}),this.isUserPointing=!1,i.pointerType==="touch"?(this.changeSource=i.altKey?se.AUTOMATIC:se.USER_INTERACTION,this.onTouchChange(i)):(this.changeSource=se.USER_INTERACTION,this.onMouseDown(i)),this.changeSource===se.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=i=>{const n=this.pointers.find(l=>l.id===i.pointerId);if(n==null)return;if(i.pointerType==="mouse"&&i.buttons===0){this.onPointerUp(i);return}const r=this.pointers.length,a=(i.clientX-n.clientX)/r,A=(i.clientY-n.clientY)/r;a===0&&A===0||(n.clientX=i.clientX,n.clientY=i.clientY,i.pointerType==="touch"?(this.changeSource=i.altKey?se.AUTOMATIC:se.USER_INTERACTION,this.touchMode!==null&&this.touchMode(a,A)):(this.changeSource=se.USER_INTERACTION,this.panPerPixel>0?this.movePan(a,A):this.handleSinglePointerMove(a,A)))},this.onPointerUp=i=>{const{element:n}=this,r=this.pointers.findIndex(a=>a.id===i.pointerId);r!==-1&&this.pointers.splice(r,1),this.panPerPixel>0&&!i.altKey&&this.resetRadius(),this.pointers.length===0?(n.removeEventListener("pointermove",this.onPointerMove),n.removeEventListener("pointerup",this.onPointerUp),n.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(i)):this.touchMode!==null&&this.onTouchChange(i),this.scene.element[en].style.opacity=0,n.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=i=>{this.changeSource=se.USER_INTERACTION;const n=i.deltaY*(i.deltaMode==1?18:1)*Mi/30;this.userAdjustOrbit(0,0,n),i.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=i=>{const{changeSource:n}=this;this.changeSource=se.USER_INTERACTION,(i.shiftKey&&this.enablePan?this.panKeyCodeHandler(i):this.orbitZoomKeyCodeHandler(i))?(i.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=n},this._options=Object.assign({},lA),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",()=>{},{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,e===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(e=new Ji){return e.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.far=t===0?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(e=this.goalSpherical.theta,t=this.goalSpherical.phi,s=this.goalSpherical.radius){const{minimumAzimuthalAngle:i,maximumAzimuthalAngle:n,minimumPolarAngle:r,maximumPolarAngle:a,minimumRadius:A,maximumRadius:l}=this._options,{theta:h,phi:c,radius:d}=this.goalSpherical,u=Fe(e,i,n);!isFinite(i)&&!isFinite(n)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-u)+u);const g=Fe(t,r,a),p=Fe(s,A,l);return u===h&&g===c&&p===d||!isFinite(u)||!isFinite(g)||!isFinite(p)?!1:(this.goalSpherical.theta=u,this.goalSpherical.phi=g,this.goalSpherical.radius=p,this.goalSpherical.makeSafe(),!0)}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){const{minimumFieldOfView:t,maximumFieldOfView:s}=this._options;e=Fe(e,t,s),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,s){const{theta:i,phi:n,radius:r}=this.goalSpherical,{minimumRadius:a,maximumRadius:A,minimumFieldOfView:l,maximumFieldOfView:h}=this._options,c=this.spherical.theta-i,d=Math.PI-.001,u=i-Fe(e,-d-c,d-c),g=n-t,p=s===0?0:((s>0?A:a)-r)/(Math.log(s>0?h:l)-this.goalLogFov),f=r+s*(isFinite(p)?p:(A-a)*2);if(this.setOrbit(u,g,f),s!==0){const I=this.goalLogFov+s;this.setFieldOfView(Math.exp(I))}}jumpToGoal(){this.update(0,_c)}update(e,t){if(this.isStationary())return!1;const{maximumPolarAngle:s,maximumRadius:i}=this._options,n=this.spherical.theta-this.goalSpherical.theta;return Math.abs(n)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(n)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,s),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,i),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:e}=this.element;if(this._interactionEnabled){const{touchAction:t}=this._options;this._disableZoom&&t!=="none"?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Xl(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,t,s){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,s*this.inputSensitivity)}wrapAngle(e){const t=(e+Math.PI)/(2*Math.PI);return(t-Math.floor(t))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,t){const{clientX:s,clientY:i}=e,{clientX:n,clientY:r}=t,a=n-s,A=r-i;return Math.sqrt(a*a+A*A)}handleSinglePointerMove(e,t){const s=this.pixelLengthToSphericalAngle(e),i=this.pixelLengthToSphericalAngle(t);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(s,i,0)}initializePan(){const{theta:e,phi:t}=this.spherical,s=e-this.scene.yaw;this.panPerPixel=pf/this.scene.height,this.panProjection.set(-Math.cos(s),-Math.cos(t)*Math.sin(s),0,0,Math.sin(t),0,Math.sin(s),-Math.cos(t)*Math.cos(s),0)}movePan(e,t){const{scene:s}=this,i=AA.set(e,t,0).multiplyScalar(this.inputSensitivity),n=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;i.multiplyScalar(n);const r=s.getTarget();r.add(i.applyMatrix3(this.panProjection)),s.boundingSphere.clampPoint(r,r),s.setTarget(r.x,r.y,r.z)}recenter(e){if(performance.now()>this.startTime+ff||Math.abs(e.clientX-this.startPointerPosition.clientX)>aA||Math.abs(e.clientY-this.startPointerPosition.clientY)>aA)return;const{scene:t}=this,s=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(s==null){const{cameraTarget:i}=t.element;t.element.cameraTarget="",t.element.cameraTarget=i,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(s.position),t.setTarget(s.position.x,s.position.y,s.position.z)}resetRadius(){const{scene:e}=this,t=e.positionAndNormalFromPoint(mf.set(0,0));if(t==null)return;e.target.worldToLocal(t.position);const s=e.getTarget(),{theta:i,phi:n}=this.spherical,r=i-e.yaw,a=AA.set(Math.sin(n)*Math.sin(r),Math.cos(n),Math.sin(n)*Math.cos(r)),A=a.dot(t.position.sub(s));s.add(a.multiplyScalar(A)),e.setTarget(s.x,s.y,s.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-A)}onTouchChange(e){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),e.altKey||(this.scene.element[en].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(e.button===2||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[en].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,Mi);break;case"PageDown":this.userAdjustOrbit(0,0,-1*Mi);break;case"ArrowUp":this.userAdjustOrbit(0,-Ri,0);break;case"ArrowDown":this.userAdjustOrbit(0,Ri,0);break;case"ArrowLeft":this.userAdjustOrbit(-Ri,0,0);break;case"ArrowRight":this.userAdjustOrbit(Ri,0,0);break;default:t=!1;break}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-1*Di);break;case"ArrowDown":this.movePan(0,Di);break;case"ArrowLeft":this.movePan(-1*Di,0);break;case"ArrowRight":this.movePan(Di,0);break;default:t=!1;break}return t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=30,Cf=.8,cA=1.5,Bf=20,qc=1.3,yf=1/qc,wf=.25,Qf=10,At={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},co={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},Li=new U,vf=new Ze,xf=new U,bf=new si(45,1,.1,100);class Sf extends hi{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new U,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new U,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new U,this.goalYaw=0,this.goalScale=1,this.xDamper=new Ce,this.yDamper=new Ce,this.zDamper=new Ce,this.yawDamper=new Ce,this.scaleDamper=new Ce,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new Na(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=t=>{const s=this.transientHitTestSource;if(s==null)return;const i=this.frame.getHitTestResultsForTransientInput(s),n=this.presentedScene,r=this.placementBox;if(i.length===1){this.inputSource=t.inputSource;const{axes:a}=this.inputSource.gamepad,A=r.getHit(this.presentedScene,a[0],a[1]);r.show=!0,A!=null?(this.isTranslating=!0,this.lastDragPosition.copy(A)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=a[0]*cA)}else if(i.length===2){r.show=!0,this.isTwoFingering=!0;const{separation:a}=this.fingerPolar(i);this.firstRatio=a/n.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){oa();const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return oa(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e,t=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let s=new Promise((l,h)=>{requestAnimationFrame(()=>l())});e.setHotspotsVisibility(!1),e.queueRender(),await s,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),t===!0&&(this.xrLight=new Mp(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const l=this.presentedScene;l.add(this.xrLight),l.environment=this.xrLight.environment}));const i=await this.resolveARSession();i.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const n=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");n.classList.add("enabled"),n.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=n;const r=await i.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.background=null,this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);const a=Bf*Math.PI/180,A=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(a),z:-Math.cos(a)});i.requestHitTestSource({space:r,offsetRay:A}).then(l=>{this.initialHitSource=l}),this.currentSession=i,this.placementBox=new Na(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:At.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;const e=new Promise(t=>{this.resolveCleanup=t});try{await this.currentSession.end(),await e}catch(t){console.warn("Error while trying to end WebXR AR session"),console.warn(t),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const e=this.presentedScene;if(e!=null){const t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){const e=this.currentSession;e!=null&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const t=this.presentedScene;if(this._presentedScene=null,t!=null){const{element:r}=t;this.xrLight!=null&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.position.set(0,0,0),t.scale.set(1,1,1),t.setShadowOffset(0);const a=this.turntableRotation;a!=null&&(t.yaw=a);const A=this.oldShadowIntensity;A!=null&&t.setShadowIntensity(A),t.setEnvironmentAndSkybox(r[Os],r[Hs]);const l=this.oldTarget;t.setTarget(l.x,l.y,l.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0),r.requestUpdate("cameraTarget"),r.requestUpdate("maxCameraOrbit"),r[Ai](r.getBoundingClientRect()),requestAnimationFrame(()=>{t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:se.NONE}}))})}this.renderer.height=0;const s=this.exitWebXRButtonContainer;s!=null&&(s.classList.remove("enabled"),s.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const i=this.transientHitTestSource;i!=null&&(i.cancel(),this.transientHitTestSource=null);const n=this.initialHitSource;n!=null&&(n.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:At.NOT_PRESENTING})}updateView(e){const t=this.presentedScene,s=this.threeRenderer.xr;s.updateCamera(bf),t.xrCamera=s.getCamera();const{elements:i}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(i[1],i[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){const r=e.recommendedViewportScale;e.requestViewportScale(Math.max(r,wf))}const n=s.getBaseLayer();if(n!=null){const r=n instanceof XRWebGLLayer?n.getViewport(e):s.getBinding().getViewSubImage(n,e).viewport;this.threeRenderer.setViewport(r.x,r.y,r.width,r.height)}}placeInitially(){const e=this.presentedScene,{position:t,element:s}=e,i=e.getCamera(),{width:n,height:r}=this.overlay.getBoundingClientRect();e.setSize(n,r),i.projectionMatrixInverse.copy(i.projectionMatrix).invert();const{theta:a,radius:A}=s.getCameraOrbit(),l=i.getWorldDirection(Li);e.yaw=Math.atan2(-l.x,-l.z)-a,this.goalYaw=e.yaw,t.copy(i.position).add(l.multiplyScalar(A)),this.updateTarget();const h=e.getTarget();t.add(h).sub(this.oldTarget),this.goalPosition.copy(t),e.setHotspotsVisibility(!0);const{session:c}=this.frame;c.addEventListener("selectstart",this.onSelectStart),c.addEventListener("selectend",this.onSelectEnd),c.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(d=>{this.transientHitTestSource=d})}getTouchLocation(){const{axes:e}=this.inputSource.gamepad;let t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return t!=null&&(Li.copy(t).sub(this.presentedScene.getCamera().position),Li.length()>Qf)?null:t}getHitPoint(e){const t=this.threeRenderer.xr.getReferenceSpace(),s=e.getPose(t);if(s==null)return null;const i=vf.fromArray(s.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(i.elements[4],i.elements[6])),i.elements[5]>.75!==this.placeOnWall?xf.setFromMatrixPosition(i):null}moveToFloor(e){const t=this.initialHitSource;if(t==null)return;const s=e.getHitTestResults(t);if(s.length==0)return;const i=s[0],n=this.getHitPoint(i);n!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(n):this.goalPosition.y=n.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:At.OBJECT_PLACED}))}fingerPolar(e){const t=e[0].inputSource.gamepad.axes,s=e[1].inputSource.gamepad.axes,i=s[0]-t[0],n=s[1]-t[1],r=Math.atan2(n,i);let a=this.lastAngle-r;return a>Math.PI?a-=2*Math.PI:a<-Math.PI&&(a+=2*Math.PI),this.lastAngle=r,{separation:Math.sqrt(i*i+n*n),deltaYaw:a}}processInput(e){const t=this.transientHitTestSource;if(t==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const s=e.getHitTestResultsForTransientInput(t),i=this.presentedScene,n=i.scale.x;if(this.isTwoFingering){if(s.length<2)this.isTwoFingering=!1;else{const{separation:r,deltaYaw:a}=this.fingerPolar(s);if(this.placeOnWall===!1&&(this.goalYaw+=a),i.canScale){const A=r/this.firstRatio;this.goalScale=A<qc&&A>yf?1:A}}return}else if(s.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:r}=this.fingerPolar(s);this.firstRatio=r/n;return}if(this.isRotating){const r=this.inputSource.gamepad.axes[0]*cA;this.goalYaw+=r-this.lastAngle,this.lastAngle=r}else this.isTranslating&&s.forEach(r=>{if(r.inputSource!==this.inputSource)return;let a=null;if(r.results.length>0&&(a=this.getHitPoint(r.results[0])),a==null&&(a=this.getTouchLocation()),a!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const A=a.y-this.lastDragPosition.y;if(A<0){this.placementBox.offsetHeight=A/n,this.presentedScene.setShadowOffset(A);const l=Li.copy(i.getCamera().position),h=-A/(l.y-a.y);l.multiplyScalar(h),a.multiplyScalar(1-h).add(l)}}this.goalPosition.add(a),this.lastDragPosition.copy(a)}})}moveScene(e){const t=this.presentedScene,{position:s,yaw:i}=t,n=t.boundingSphere.radius,r=this.goalPosition,a=t.scale.x,A=this.placementBox;let l=se.NONE;if(!r.equals(s)||this.goalScale!==a){l=se.USER_INTERACTION;let{x:h,y:c,z:d}=s;h=this.xDamper.update(h,r.x,e,n),c=this.yDamper.update(c,r.y,e,n),d=this.zDamper.update(d,r.z,e,n),s.set(h,c,d);const u=this.scaleDamper.update(a,this.goalScale,e,1);if(t.scale.set(u,u,u),!this.isTranslating){const g=r.y-c;this.placementComplete&&this.placeOnWall===!1?(A.offsetHeight=g/u,t.setShadowOffset(g)):g===0&&(this.placementComplete=!0,A.show=!1,t.setShadowIntensity(Cf))}}A.updateOpacity(e),t.updateTarget(e),t.yaw=this.yawDamper.update(i,this.goalYaw,e,Math.PI),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:l}}))}onWebXRFrame(e,t){this.frame=t,++this.frames;const s=this.threeRenderer.xr.getReferenceSpace(),i=t.getViewerPose(s);i==null&&this.tracking===!0&&this.frames>Ef&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:co.NOT_TRACKING}));const n=this.presentedScene;if(i==null||n==null||!n.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:co.TRACKING}));let r=!0;for(const a of i.views){if(this.updateView(a),r){this.moveToFloor(t),this.processInput(t);const A=e-this.lastTick;this.moveScene(A),this.renderer.preRender(n,e,A),this.lastTick=e,n.renderShadow(this.threeRenderer)}this.threeRenderer.render(n,n.getCamera()),r=!1}}}function _f(o){const e=new Map,t=new Map,s=o.clone();return Kc(o,s,function(i,n){e.set(n,i),t.set(i,n)}),s.traverse(function(i){if(!i.isSkinnedMesh)return;const n=i,r=e.get(i),a=r.skeleton.bones;n.skeleton=r.skeleton.clone(),n.bindMatrix.copy(r.bindMatrix),n.skeleton.bones=a.map(function(A){return t.get(A)}),n.bind(n.skeleton,n.bindMatrix)}),s}function Kc(o,e,t){t(o,e);for(let s=0;s<o.children.length;s++)Kc(o.children[s],e.children[s],t)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=Symbol("prepared"),un=Symbol("prepare"),Me=Symbol("preparedGLTF"),dn=Symbol("clone");class Tf{constructor(e){this[Me]=e}static prepare(e){if(e.scene==null)throw new Error("Model does not have a scene");if(e[hA])return e;const t=this[un](e);return t[hA]=!0,t}static[un](e){const{scene:t}=e,s=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:s})}get parser(){return this[Me].parser}get animations(){return this[Me].animations}get scene(){return this[Me].scene}get scenes(){return this[Me].scenes}get cameras(){return this[Me].cameras}get asset(){return this[Me].asset}get userData(){return this[Me].userData}clone(){const e=this.constructor,t=this[dn]();return new e(t)}dispose(){this.scenes.forEach(e=>{e.traverse(t=>{const s=t;if(!s.material)return;(Array.isArray(s.material)?s.material:[s.material]).forEach(n=>{for(const r in n){const a=n[r];if(a instanceof ii){const A=a.source.data;A.close!=null&&A.close(),a.dispose()}}n.dispose()}),s.geometry.dispose()})})}[dn](){const e=this[Me],t=_f(this.scene);Rf(t,this.scene);const s=[t],i=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:s,userData:i})}}const Rf=(o,e)=>{Yc(o,e,(t,s)=>{s.userData.variantMaterials!==void 0&&(t.userData.variantMaterials=new Map(s.userData.variantMaterials)),s.userData.variantData!==void 0&&(t.userData.variantData=s.userData.variantData),s.userData.originalMaterial!==void 0&&(t.userData.originalMaterial=s.userData.originalMaterial)})},Yc=(o,e,t)=>{t(o,e);for(let s=0;s<o.children.length;s++)Yc(o.children[s],e.children[s],t)},uA=Symbol("threeGLTF"),dA=Symbol("gltf"),gA=Symbol("gltfElementMap"),pA=Symbol("threeObjectMap"),fA=Symbol("parallelTraverseThreeScene"),mA=Symbol("correlateOriginalThreeGLTF"),IA=Symbol("correlateCloneThreeGLTF");class ai{constructor(e,t,s,i){this[uA]=e,this[dA]=t,this[gA]=i,this[pA]=s}static from(e,t){return t!=null?this[IA](e,t):this[mA](e)}static[mA](e){const t=e.parser.json,s=e.parser.associations,i=new Map,n={name:"Default"},r={type:"materials",index:-1};for(const a of s.keys())a instanceof Yi&&s.get(a)==null&&(r.index<0&&(t.materials==null&&(t.materials=[]),r.index=t.materials.length,t.materials.push(n)),a.name=n.name,s.set(a,{materials:r.index}));for(const[a,A]of s){if(A){const l=a;l.userData=l.userData||{},l.userData.associations=A}for(const l in A)if(l!=null&&l!=="primitives"){const h=l,d=(t[h]||[])[A[h]];if(d==null)continue;let u=i.get(d);u==null&&(u=new Set,i.set(d,u)),u.add(a)}}return new ai(e,t,s,i)}static[IA](e,t){const s=t.threeGLTF,i=t.gltf,n=JSON.parse(JSON.stringify(i)),r=new Map,a=new Map;for(let A=0;A<s.scenes.length;A++)this[fA](s.scenes[A],e.scenes[A],(l,h)=>{const c=t.threeObjectMap.get(l);if(c!=null){for(const d in c)if(d!=null&&d!=="primitives"){const u=d,g=c[u],p=n[u][g],f=r.get(h)||{};f[u]=g,r.set(h,f);const I=a.get(p)||new Set;I.add(h),a.set(p,I)}}});return new ai(e,n,r,a)}static[fA](e,t,s){const i=(n,r)=>{if(s(n,r),n.isObject3D){const a=n,A=r;if(a.material)if(Array.isArray(a.material))for(let l=0;l<a.material.length;++l)s(a.material[l],A.material[l]);else s(a.material,A.material);for(let l=0;l<n.children.length;++l)i(n.children[l],r.children[l])}};i(e,t)}get threeGLTF(){return this[uA]}get gltf(){return this[dA]}get gltfElementMap(){return this[gA]}get threeObjectMap(){return this[pA]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=Symbol("correlatedSceneGraph");class Mf extends Tf{static[un](e){const t=super[un](e);t[Rs]==null&&(t[Rs]=ai.from(t));const{scene:s}=t,i=new _o(void 0,1/0);return s.traverse(n=>{n.renderOrder=1e3,n.frustumCulled=!1,n.name||(n.name=n.uuid);const r=n;if(r.material){const{geometry:a}=r;r.castShadow=!0,r.isSkinnedMesh&&(a.boundingSphere=i,a.boundingBox=null);const A=r.material;if(A.isMeshBasicMaterial===!0&&(A.toneMapped=!1),A.shadowSide=So,A.aoMap){const{gltf:l,threeObjectMap:h}=t[Rs],c=h.get(A);if(l.materials!=null&&c!=null&&c.materials!=null){const d=l.materials[c.materials];d.occlusionTexture&&d.occlusionTexture.texCoord===0&&a.attributes.uv!=null&&a.setAttribute("uv2",a.attributes.uv)}}}}),t}get correlatedSceneGraph(){return this[Me][Rs]}[dn](){const e=super[dn](),t=new Map;return e.scene.traverse(s=>{const i=s;if(i.material){const n=i.material;if(n!=null){if(t.has(n.uuid)){i.material=t.get(n.uuid);return}i.material=n.clone(),t.set(n.uuid,i.material)}}}),e[Rs]=ai.from(e,this.correlatedSceneGraph),e}}class Df extends eu{constructor(e){super(e),this.type=Ne}parse(e){const a=function(E,m){switch(E){case 1:console.error("THREE.RGBELoader Read Error: "+(m||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(m||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(m||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(m||""))}return-1},c=`
`,d=function(E,m,B){m=m||1024;let w=E.pos,Q=-1,v=0,S="",_=String.fromCharCode.apply(null,new Uint16Array(E.subarray(w,w+128)));for(;0>(Q=_.indexOf(c))&&v<m&&w<E.byteLength;)S+=_,v+=_.length,w+=128,_+=String.fromCharCode.apply(null,new Uint16Array(E.subarray(w,w+128)));return-1<Q?(B!==!1&&(E.pos+=v+Q+1),S+_.slice(0,Q)):!1},u=function(E){const m=/^#\?(\S+)/,B=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,y=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,w=/^\s*FORMAT=(\S+)\s*$/,Q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,v={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let S,_;if(E.pos>=E.byteLength||!(S=d(E)))return a(1,"no header found");if(!(_=S.match(m)))return a(3,"bad initial token");for(v.valid|=1,v.programtype=_[1],v.string+=S+`
`;S=d(E),S!==!1;){if(v.string+=S+`
`,S.charAt(0)==="#"){v.comments+=S+`
`;continue}if((_=S.match(B))&&(v.gamma=parseFloat(_[1])),(_=S.match(y))&&(v.exposure=parseFloat(_[1])),(_=S.match(w))&&(v.valid|=2,v.format=_[1]),(_=S.match(Q))&&(v.valid|=4,v.height=parseInt(_[1],10),v.width=parseInt(_[2],10)),v.valid&2&&v.valid&4)break}return v.valid&2?v.valid&4?v:a(3,"missing image size specifier"):a(3,"missing format specifier")},g=function(E,m,B){const y=m;if(y<8||y>32767||E[0]!==2||E[1]!==2||E[2]&128)return new Uint8Array(E);if(y!==(E[2]<<8|E[3]))return a(3,"wrong scanline width");const w=new Uint8Array(4*m*B);if(!w.length)return a(4,"unable to allocate buffer space");let Q=0,v=0;const S=4*y,_=new Uint8Array(4),k=new Uint8Array(S);let j=B;for(;j>0&&v<E.byteLength;){if(v+4>E.byteLength)return a(1);if(_[0]=E[v++],_[1]=E[v++],_[2]=E[v++],_[3]=E[v++],_[0]!=2||_[1]!=2||(_[2]<<8|_[3])!=y)return a(3,"bad rgbe scanline format");let D=0,O;for(;D<S&&v<E.byteLength;){O=E[v++];const M=O>128;if(M&&(O-=128),O===0||D+O>S)return a(3,"bad scanline data");if(M){const L=E[v++];for(let W=0;W<O;W++)k[D++]=L}else k.set(E.subarray(v,v+O),D),D+=O,v+=O}const $=y;for(let M=0;M<$;M++){let L=0;w[Q]=k[M+L],L+=y,w[Q+1]=k[M+L],L+=y,w[Q+2]=k[M+L],L+=y,w[Q+3]=k[M+L],Q+=4}j--}return w},p=function(E,m,B,y){const w=E[m+3],Q=Math.pow(2,w-128)/255;B[y+0]=E[m+0]*Q,B[y+1]=E[m+1]*Q,B[y+2]=E[m+2]*Q,B[y+3]=1},f=function(E,m,B,y){const w=E[m+3],Q=Math.pow(2,w-128)/255;B[y+0]=Ii.toHalfFloat(Math.min(E[m+0]*Q,65504)),B[y+1]=Ii.toHalfFloat(Math.min(E[m+1]*Q,65504)),B[y+2]=Ii.toHalfFloat(Math.min(E[m+2]*Q,65504)),B[y+3]=Ii.toHalfFloat(1)},I=new Uint8Array(e);I.pos=0;const C=u(I);if(C!==-1){const E=C.width,m=C.height,B=g(I.subarray(I.pos),E,m);if(B!==-1){let y,w,Q;switch(this.type){case Nt:Q=B.length/4;const v=new Float32Array(Q*4);for(let _=0;_<Q;_++)p(B,_*4,v,_*4);y=v,w=Nt;break;case Ne:Q=B.length/4;const S=new Uint16Array(Q*4);for(let _=0;_<Q;_++)f(B,_*4,S,_*4);y=S,w=Ne;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:E,height:m,data:y,header:C.string,gamma:C.gamma,exposure:C.exposure,type:w}}}return null}setDataType(e){return this.type=e,this}load(e,t,s,i){function n(r,a){switch(r.type){case Nt:case Ne:r.colorSpace=Ft,r.minFilter=kt,r.magFilter=kt,r.generateMipmaps=!1,r.flipY=!0;break}t&&t(r,a)}return super.load(e,n,s,i)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends gt{constructor(){super(),this.position.y=-3.5;const e=new Ro;e.deleteAttribute("uv");const t=new gs({metalness:0,side:Cn}),s=new gs({metalness:0}),i=new Qo(16777215,500,28,2);i.position.set(.418,16.199,.3),this.add(i);const n=new P(e,t);n.position.set(-.757,13.219,.717),n.scale.set(31.713,28.305,28.591),this.add(n);const r=new P(e,s);r.position.set(-10.906,2.009,1.846),r.rotation.set(0,-.195,0),r.scale.set(2.328,7.905,4.651),this.add(r);const a=new P(e,s);a.position.set(-5.607,-.754,-.758),a.rotation.set(0,.994,0),a.scale.set(1.97,1.534,3.955),this.add(a);const A=new P(e,s);A.position.set(6.167,.857,7.803),A.rotation.set(0,.561,0),A.scale.set(3.927,6.285,3.687),this.add(A);const l=new P(e,s);l.position.set(-2.017,.018,6.124),l.rotation.set(0,.333,0),l.scale.set(2.002,4.566,2.064),this.add(l);const h=new P(e,s);h.position.set(2.291,-.756,-2.621),h.rotation.set(0,-.286,0),h.scale.set(1.546,1.552,1.496),this.add(h);const c=new P(e,s);c.position.set(-2.193,-.369,-5.547),c.rotation.set(0,.516,0),c.scale.set(3.875,3.487,2.986),this.add(c);const d=new P(e,this.createAreaLightMaterial(50));d.position.set(-16.116,14.37,8.208),d.scale.set(.1,2.428,2.739),this.add(d);const u=new P(e,this.createAreaLightMaterial(50));u.position.set(-16.109,18.021,-8.207),u.scale.set(.1,2.425,2.751),this.add(u);const g=new P(e,this.createAreaLightMaterial(17));g.position.set(14.904,12.198,-1.832),g.scale.set(.15,4.265,6.331),this.add(g);const p=new P(e,this.createAreaLightMaterial(43));p.position.set(-.462,8.89,14.52),p.scale.set(4.38,5.441,.088),this.add(p);const f=new P(e,this.createAreaLightMaterial(20));f.position.set(3.235,11.486,-12.541),f.scale.set(2.5,2,.1),this.add(f);const I=new P(e,this.createAreaLightMaterial(100));I.position.set(0,20,0),I.scale.set(1,.1,1),this.add(I)}createAreaLightMaterial(e){const t=new We;return t.color.setScalar(e),t}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends gt{constructor(){super(),this.position.y=-3.5;const e=new Ro;e.deleteAttribute("uv");const t=new gs({metalness:0,side:Cn}),s=new gs({metalness:0}),i=new Qo(16777215,400,28,2);i.position.set(.5,14,.5),this.add(i);const n=new P(e,t);n.position.set(0,13.2,0),n.scale.set(31.5,28.5,31.5),this.add(n);const r=new P(e,s);r.position.set(-10.906,-1,1.846),r.rotation.set(0,-.195,0),r.scale.set(2.328,7.905,4.651),this.add(r);const a=new P(e,s);a.position.set(-5.607,-.754,-.758),a.rotation.set(0,.994,0),a.scale.set(1.97,1.534,3.955),this.add(a);const A=new P(e,s);A.position.set(6.167,-.16,7.803),A.rotation.set(0,.561,0),A.scale.set(3.927,6.285,3.687),this.add(A);const l=new P(e,s);l.position.set(-2.017,.018,6.124),l.rotation.set(0,.333,0),l.scale.set(2.002,4.566,2.064),this.add(l);const h=new P(e,s);h.position.set(2.291,-.756,-2.621),h.rotation.set(0,-.286,0),h.scale.set(1.546,1.552,1.496),this.add(h);const c=new P(e,s);c.position.set(-2.193,-.369,-5.547),c.rotation.set(0,.516,0),c.scale.set(3.875,3.487,2.986),this.add(c);const d=new P(e,this.createAreaLightMaterial(80));d.position.set(-14,10,8),d.scale.set(.1,2.5,2.5),this.add(d);const u=new P(e,this.createAreaLightMaterial(80));u.position.set(-14,14,-4),u.scale.set(.1,2.5,2.5),this.add(u);const g=new P(e,this.createAreaLightMaterial(23));g.position.set(14,12,0),g.scale.set(.1,5,5),this.add(g);const p=new P(e,this.createAreaLightMaterial(16));p.position.set(0,9,14),p.scale.set(5,5,.1),this.add(p);const f=new P(e,this.createAreaLightMaterial(80));f.position.set(7,8,-14),f.scale.set(2.5,2.5,.1),this.add(f);const I=new P(e,this.createAreaLightMaterial(80));I.position.set(-7,16,-14),I.scale.set(2.5,2.5,.1),this.add(I);const C=new P(e,this.createAreaLightMaterial(1));C.position.set(0,20,0),C.scale.set(.1,.1,.1),this.add(C)}createAreaLightMaterial(e){const t=new We;return t.color.setScalar(e),t}}const Nf=.04,jt=20,Uf=/\.hdr(\.js)?$/;class EA extends hi{constructor(e){super(),this.threeRenderer=e,this.lottieLoaderUrl="",this.withCredentials=!1,this._ldrLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}get ldrLoader(){return this._ldrLoader==null&&(this._ldrLoader=new Hl),this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}get hdrLoader(){return this._hdrLoader==null&&(this._hdrLoader=new Df,this._hdrLoader.setDataType(Ne)),this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}async getLottieLoader(){if(this._lottieLoader==null){const{LottieLoader:e}=await tu(()=>import(this.lottieLoaderUrl),[],import.meta.url);this._lottieLoader=new e}return this._lottieLoader.setWithCredentials(this.withCredentials),this._lottieLoader}async loadImage(e){const t=await new Promise((s,i)=>this.ldrLoader.load(e,s,()=>{},i));return t.name=e,t.flipY=!1,t}async loadLottie(e,t){const s=await this.getLottieLoader();s.setQuality(t);const i=await new Promise((n,r)=>s.load(e,n,()=>{},r));return i.name=e,i}async loadEquirect(e,t=()=>{}){try{const s=Uf.test(e),i=s?this.hdrLoader:this.ldrLoader,n=await new Promise((r,a)=>i.load(e,r,A=>{t(A.loaded/A.total*.9)},a));return t(1),n.name=e,n.mapping=su,s||(n.encoding=Zl),n}finally{t&&t(1)}}async generateEnvironmentMapAndSkybox(e=null,t=null,s=()=>{}){const i=t!=="legacy";(t==="legacy"||t==="neutral")&&(t=null),t=gc(t);let n=Promise.resolve(null),r;e&&(n=this.loadEquirectFromUrl(e,s)),t?r=this.loadEquirectFromUrl(t,s):e?r=this.loadEquirectFromUrl(e,s):r=i?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[a,A]=await Promise.all([r,n]);if(a==null)throw new Error("Failed to load environment map.");return{environmentMap:a,skybox:A}}async loadEquirectFromUrl(e,t){if(!this.skyboxCache.has(e)){const s=this.loadEquirect(e,t);this.skyboxCache.set(e,s)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await Xd();const s=this.threeRenderer,i=new Wl(256,{generateMipmaps:!1,type:Ne,format:ct,colorSpace:Ft,depthBuffer:!0}),n=new Ko(.1,100,i),r=n.renderTarget.texture;r.name=t;const a=s.outputColorSpace,A=s.toneMapping;return s.toneMapping=iu,s.outputColorSpace=Ft,n.update(s,e),this.blurCubemap(i,Nf),s.toneMapping=A,s.outputColorSpace=a,r}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new Lf,"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new Ff,"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(jt);const i=new Ro,n=new P(i,this.blurMaterial);this.blurScene=new gt,this.blurScene.add(n)}const s=e.clone();this.halfblur(e,s,t,"latitudinal"),this.halfblur(s,e,t,"longitudinal")}halfblur(e,t,s,i){const r=e.width,a=isFinite(s)?Math.PI/(2*r):2*Math.PI/(2*jt-1),A=s/a,l=isFinite(s)?1+Math.floor(3*A):jt;l>jt&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${l} samples when the maximum is set to ${jt}`);const h=[];let c=0;for(let g=0;g<jt;++g){const p=g/A,f=Math.exp(-p*p/2);h.push(f),g==0?c+=f:g<l&&(c+=2*f)}for(let g=0;g<h.length;g++)h[g]=h[g]/c;const d=this.blurMaterial.uniforms;d.envMap.value=e.texture,d.samples.value=l,d.weights.value=h,d.latitudinal.value=i==="latitudinal",d.dTheta.value=a,new Ko(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){const t=new Float32Array(e),s=new U(0,1,0);return new An({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:s}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:nu,depthTest:!1,depthWrite:!1,side:Cn})}async dispose(){for(const[,e]of this.skyboxCache)(await e).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=.2,ur=40,dr=60,CA=5,Wt=[1,.79,.62,.5,.4,.31,.25],Gf=3,zc="high-performance";class ve extends hi{constructor(e){super(),this.loader=new ne(Mf),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=Gf,this.avgFrameDuration=(dr+ur)/2,this.onWebGLContextLost=t=>{this.dispatchEvent({type:"contextlost",sourceEvent:t})},this.onWebGLContextRestored=()=>{var t;(t=this.textureUtils)===null||t===void 0||t.dispose(),this.textureUtils=new EA(this.threeRenderer);for(const s of this.scenes)s.element[hn]()},this.dpr=oo(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new jl({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.useLegacyLights=!1,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=ru}catch(t){console.warn(t)}this.arRenderer=new Sf(this),this.textureUtils=this.canRender?new EA(this.threeRenderer):null,ne.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){const e=this._singleton.dispose();for(const t of e)t.disconnectedCallback();this._singleton=new ve({powerPreference:(self.ModelViewerElement||{}).powerPreference||zc,debug:pc()});for(const t of e)t.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return Wt[this.scaleStep]}set minScale(e){let t=1;for(;t<Wt.length&&!(Wt[t]<e);)++t;this.lastStep=t-1}registerScene(e){this.scenes.add(e),e.forceRescale();const t=new xe;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((s,i)=>this.render(s,i))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return this.multipleScenesVisible?e.element[mo]:this.canvas3D}countVisibleScenes(){const{canvas3D:e}=this;let t=0,s=null;for(const n of this.scenes){const{element:r}=n;r.modelIsVisible&&n.externalRenderer==null&&++t,e.parentElement===n.canvas.parentElement&&(s=n)}const i=t>1;if(s!=null){const n=i&&!this.multipleScenesVisible,r=!s.element.modelIsVisible;if(n||r){const{width:a,height:A}=this.sceneSize(s);this.copyPixels(s,a,A),e.parentElement.removeChild(e)}}this.multipleScenesVisible=i}updateRendererSize(){var e;const t=oo();if(t!==this.dpr)for(const n of this.scenes){const{element:r}=n;r[os](r.getBoundingClientRect())}let s=0,i=0;for(const n of this.scenes)s=Math.max(s,n.width),i=Math.max(i,n.height);if(!(s===this.width&&i===this.height&&t===this.dpr)){this.width=s,this.height=i,this.dpr=t,s=Math.ceil(s*t),i=Math.ceil(i*t),this.canRender&&this.threeRenderer.setSize(s,i,!1);for(const n of this.scenes){const{canvas:r}=n;r.width=s,r.height=i,n.forceRescale(),(e=n.effectRenderer)===null||e===void 0||e.setSize(s,i)}}}updateRendererScale(e){const t=this.scaleStep;this.avgFrameDuration+=Fe(kf*(e-this.avgFrameDuration),-CA,CA),this.avgFrameDuration>dr?++this.scaleStep:this.avgFrameDuration<ur&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=(dr+ur)/2)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else if(e.scaleStep!=0)e.scaleStep=0,this.rescaleCanvas(e);else return!1;return!0}rescaleCanvas(e){const t=Wt[e.scaleStep],s=Math.ceil(this.width/t),i=Math.ceil(this.height/t),{style:n}=e.canvas;n.width=`${s}px`,n.height=`${i}px`,this.canvas3D.style.width=`${s}px`,this.canvas3D.style.height=`${i}px`;const r=this.dpr*t,a=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:r,minimumDpr:this.dpr*Wt[this.lastStep],pixelWidth:Math.ceil(e.width*r),pixelHeight:Math.ceil(e.height*r),reason:a}}))}sceneSize(e){const{dpr:t}=this,s=Wt[e.scaleStep],i=Math.min(Math.ceil(e.width*s*t),this.canvas3D.width),n=Math.min(Math.ceil(e.height*s*t),this.canvas3D.height);return{width:i,height:n}}copyPixels(e,t,s){const i=e.context;if(i==null){console.log("could not acquire 2d context");return}i.clearRect(0,0,t,s),i.drawImage(this.canvas3D,0,0,t,s,0,0,t,s),e.canvas.classList.add("show")}orderedScenes(){const e=[];for(const t of[!1,!0])for(const s of this.scenes)s.element.modelIsVisible===t&&e.push(s);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,s){const{element:i,exposure:n}=e;i[Ge](t,s);const r=typeof n=="number"&&!Number.isNaN(n);this.threeRenderer.toneMappingExposure=r?n:1}render(e,t){if(t!=null){this.arRenderer.onWebXRFrame(e,t);return}const s=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(s),this.renderedLastFrame=!1);const{canvas3D:i}=this;for(const n of this.orderedScenes()){const{element:r}=n;if(!r.loaded||!r.modelIsVisible&&n.renderCount>0||(this.preRender(n,e,s),!this.shouldRender(n)))continue;if(n.externalRenderer!=null){const l=n.getCamera();l.updateMatrix();const{matrix:h,projectionMatrix:c}=l,d=h.elements.slice(),u=n.getTarget();d[12]+=u.x,d[13]+=u.y,d[14]+=u.z,n.externalRenderer.render({viewMatrix:d,projectionMatrix:c.elements});continue}if(!r.modelIsVisible&&!this.multipleScenesVisible)for(const l of this.scenes)l.element.modelIsVisible&&l.queueRender();const{width:a,height:A}=this.sceneSize(n);n.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-A,a,A),n.effectRenderer!=null?n.effectRenderer.render(s):(this.threeRenderer.autoClear=!0,this.threeRenderer.render(n,n.camera)),this.multipleScenesVisible||!n.element.modelIsVisible&&n.renderCount===0?this.copyPixels(n,a,A):i.parentElement!==n.canvas.parentElement&&(n.canvas.parentElement.appendChild(i),n.canvas.classList.remove("show")),n.hasRendered(),++n.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const e=[];for(const t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}ve._singleton=new ve({powerPreference:(self.ModelViewerElement||{}).powerPreference||zc,debug:pc()});/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=Symbol("correlatedObjects"),V=Symbol("onUpdate");class gi{constructor(e,t=null){this[V]=e,this[N]=t}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new We,Pf=new En(2,2);let Of=0;const ue=Symbol("threeTexture"),yA=Symbol("threeTextures");let Hf=class extends gi{get[ue](){var e;return(e=this[N])===null||e===void 0?void 0:e.values().next().value}get[yA](){return this[N]}constructor(e,t){super(e,new Set(t?[t]:[])),this[ue].image.src||(this[ue].image.src="adhoc_image"+Of++),this[ue].image.name||(this[ue].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[ue].image.name||""}get uri(){return this[ue].image.src}get bufferView(){return this[ue].image.bufferView}get element(){const e=this[ue];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){const e=this[ue];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return this.uri!=null?"external":"embedded"}set name(e){for(const t of this[yA])t.image.name=e}update(){const e=this[ue];e&&e.isCanvasTexture&&!e.animation&&(this[ue].needsUpdate=!0,this[V]())}async createThumbnail(e,t){const s=new gt;BA.map=this[ue];const i=new P(Pf,BA);s.add(i);const n=new vo(-1,1,1,-1,0,1),{threeRenderer:r}=ve.singleton,a=new so(e,t);r.setRenderTarget(a),r.render(s,n),r.setRenderTarget(null);const A=new Uint8Array(e*t*4);r.readRenderTargetPixels(a,0,0,e,t,A),ht.width=e,ht.height=t;const l=ht.getContext("2d"),h=l.createImageData(e,t);return h.data.set(A),l.putImageData(h,0,0),new Promise(async(c,d)=>{ht.toBlob(u=>{if(!u)return d("Failed to capture thumbnail.");c(URL.createObjectURL(u))},"image/png")})}};var Le;(function(o){o[o.Nearest=9728]="Nearest",o[o.Linear=9729]="Linear",o[o.NearestMipmapNearest=9984]="NearestMipmapNearest",o[o.LinearMipmapNearest=9985]="LinearMipmapNearest",o[o.NearestMipmapLinear=9986]="NearestMipmapLinear",o[o.LinearMipmapLinear=9987]="LinearMipmapLinear"})(Le||(Le={}));var Js;(function(o){o[o.ClampToEdge=33071]="ClampToEdge",o[o.MirroredRepeat=33648]="MirroredRepeat",o[o.Repeat=10497]="Repeat"})(Js||(Js={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=(()=>{const o=[Le.Nearest,Le.Linear,Le.NearestMipmapNearest,Le.LinearMipmapLinear,Le.NearestMipmapLinear,Le.LinearMipmapLinear];return e=>o.indexOf(e)>-1})(),Vf=(()=>{const o=[Le.Nearest,Le.Linear];return e=>o.indexOf(e)>-1})(),qf=(()=>{const o=[Js.ClampToEdge,Js.MirroredRepeat,Js.Repeat];return e=>o.indexOf(e)>-1})(),Kf=(o,e)=>{switch(o){case"minFilter":return $f(e);case"magFilter":return Vf(e);case"wrapS":case"wrapT":return qf(e);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${o}" on Sampler`)}},$e=Symbol("threeTexture"),wA=Symbol("threeTextures"),st=Symbol("setProperty");class Yf extends gi{get[$e](){var e;return(e=this[N])===null||e===void 0?void 0:e.values().next().value}get[wA](){return this[N]}constructor(e,t){super(e,new Set(t?[t]:[]))}get name(){return this[$e].name||""}get minFilter(){return this[$e].minFilter}get magFilter(){return this[$e].magFilter}get wrapS(){return this[$e].wrapS}get wrapT(){return this[$e].wrapT}get rotation(){return this[$e].rotation}get scale(){return this[$e].repeat}get offset(){return this[$e].offset}setMinFilter(e){this[st]("minFilter",e)}setMagFilter(e){this[st]("magFilter",e)}setWrapS(e){this[st]("wrapS",e)}setWrapT(e){this[st]("wrapT",e)}setRotation(e){e==null&&(e=0),this[st]("rotation",e)}setScale(e){e==null&&(e=new xe(1,1)),this[st]("repeat",e)}setOffset(e){e==null&&(e=new xe(0,0)),this[st]("offset",e)}[st](e,t){if(Kf(e,t))for(const s of this[wA])s[e]=t,s.needsUpdate=!0;this[V]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=Symbol("image"),vA=Symbol("sampler"),xA=Symbol("threeTexture");class Jc extends gi{constructor(e,t){super(e,new Set(t?[t]:[])),this[vA]=new Yf(e,t),this[QA]=new Hf(e,t)}get[xA](){var e;return(e=this[N])===null||e===void 0?void 0:e.values().next().value}get name(){return this[xA].name||""}set name(e){for(const t of this[N])t.name=e}get sampler(){return this[vA]}get source(){return this[QA]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jc,Wc,Xc;const xt=Symbol("texture"),bt=Symbol("transform"),gr=Symbol("materials"),bA=Symbol("usage"),Xt=Symbol("onUpdate"),qs=Symbol("activeVideo");var R;(function(o){o[o.Base=0]="Base",o[o.MetallicRoughness=1]="MetallicRoughness",o[o.Normal=2]="Normal",o[o.Occlusion=3]="Occlusion",o[o.Emissive=4]="Emissive",o[o.Clearcoat=5]="Clearcoat",o[o.ClearcoatRoughness=6]="ClearcoatRoughness",o[o.ClearcoatNormal=7]="ClearcoatNormal",o[o.SheenColor=8]="SheenColor",o[o.SheenRoughness=9]="SheenRoughness",o[o.Transmission=10]="Transmission",o[o.Thickness=11]="Thickness",o[o.Specular=12]="Specular",o[o.SpecularColor=13]="SpecularColor",o[o.Iridescence=14]="Iridescence",o[o.IridescenceThickness=15]="IridescenceThickness",o[o.Anisotropy=16]="Anisotropy"})(R||(R={}));class ls{constructor(e,t,s,i){this[jc]=null,this[Wc]={rotation:0,scale:new xe(1,1),offset:new xe(0,0)},this[Xc]=!1,s&&(this[bt].rotation=s.rotation,this[bt].scale.copy(s.repeat),this[bt].offset.copy(s.offset),this[xt]=new Jc(e,s)),this[Xt]=e,this[gr]=i,this[bA]=t}get texture(){return this[xt]}setTexture(e){var t,s;const i=e!=null?e.source[ue]:null,n=(t=this[xt])===null||t===void 0?void 0:t.source[ue];if(n!=null&&n.isVideoTexture?this[qs]=!1:!((s=this[xt])===null||s===void 0)&&s.source.animation&&this[xt].source.animation.removeEventListener("enterFrame",this[Xt]),this[xt]=e,i!=null&&i.isVideoTexture){const a=i.image;if(this[qs]=!0,a.requestVideoFrameCallback!=null){const A=()=>{this[qs]&&(this[Xt](),a.requestVideoFrameCallback(A))};a.requestVideoFrameCallback(A)}else{const A=()=>{this[qs]&&(this[Xt](),requestAnimationFrame(A))};requestAnimationFrame(A)}}else(e==null?void 0:e.source.animation)!=null&&e.source.animation.addEventListener("enterFrame",this[Xt]);let r=me;if(this[gr])for(const a of this[gr]){switch(this[bA]){case R.Base:a.map=i;break;case R.MetallicRoughness:r=Ft,a.metalnessMap=i,a.roughnessMap=i;break;case R.Normal:r=Ft,a.normalMap=i;break;case R.Occlusion:r=Ft,a.aoMap=i;break;case R.Emissive:a.emissiveMap=i;break;case R.Clearcoat:a.clearcoatMap=i;break;case R.ClearcoatRoughness:a.clearcoatRoughnessMap=i;break;case R.ClearcoatNormal:a.clearcoatNormalMap=i;break;case R.SheenColor:a.sheenColorMap=i;break;case R.SheenRoughness:a.sheenRoughnessMap=i;break;case R.Transmission:a.transmissionMap=i;break;case R.Thickness:a.thicknessMap=i;break;case R.Specular:a.specularIntensityMap=i;break;case R.SpecularColor:a.specularColorMap=i;break;case R.Iridescence:a.iridescenceMap=i;break;case R.IridescenceThickness:a.iridescenceThicknessMap=i;break;case R.Anisotropy:a.anisotropyMap=i;break}a.needsUpdate=!0}i&&(i.colorSpace=r,i.rotation=this[bt].rotation,i.repeat=this[bt].scale,i.offset=this[bt].offset),this[Xt]()}}jc=xt,Wc=bt,Xc=qs;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=Symbol("threeMaterial"),Fi=Symbol("threeMaterials"),SA=Symbol("baseColorTexture"),_A=Symbol("metallicRoughnessTexture");class zf extends gi{constructor(e,t){super(e,t);const{map:s,metalnessMap:i}=t.values().next().value;this[SA]=new ls(e,R.Base,s,t),this[_A]=new ls(e,R.MetallicRoughness,i,t)}get[Fi](){return this[N]}get[Ms](){var e;return(e=this[N])===null||e===void 0?void 0:e.values().next().value}get baseColorFactor(){const e=[0,0,0,this[Ms].opacity];return this[Ms].color.toArray(e),e}get metallicFactor(){return this[Ms].metalness}get roughnessFactor(){return this[Ms].roughness}get baseColorTexture(){return this[SA]}get metallicRoughnessTexture(){return this[_A]}setBaseColorFactor(e){const t=new Re;e instanceof Array?t.fromArray(e):t.set(e);for(const s of this[Fi])s.color.set(t),e instanceof Array?s.opacity=e[3]:(e=[0,0,0,s.opacity],t.toArray(e));this[V]()}setMetallicFactor(e){for(const t of this[Fi])t.metalness=e;this[V]()}setRoughnessFactor(e){for(const t of this[Fi])t.roughness=e;this[V]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TA,RA;const MA=Symbol("pbrMetallicRoughness"),DA=Symbol("normalTexture"),LA=Symbol("occlusionTexture"),FA=Symbol("emissiveTexture"),X=Symbol("backingThreeMaterial"),NA=Symbol("applyAlphaCutoff"),pr=Symbol("getAlphaMode"),Zt=Symbol("lazyLoadGLTFInfo"),fr=Symbol("initialize"),ho=Symbol("getLoadedMaterial"),b=Symbol("ensureMaterialIsLoaded"),UA=Symbol("gltfIndex"),Ks=Symbol("setActive"),tn=Symbol("variantIndices"),mr=Symbol("isActive"),sn=Symbol("variantSet"),kA=Symbol("modelVariants"),Ir=Symbol("name"),fe=Symbol("pbrTextures");class Er extends gi{constructor(e,t,s,i,n,r,a=void 0){super(e,n),this[TA]=new Set,this[RA]=new Map,this[UA]=t,this[mr]=s,this[kA]=i,this[Ir]=r,a==null?this[fr]():this[Zt]=a}get[(TA=sn,RA=fe,X)](){return this[N].values().next().value}[fr](){const e=this[V],t=this[N];this[MA]=new zf(e,t);const{normalMap:s,aoMap:i,emissiveMap:n}=t.values().next().value;this[DA]=new ls(e,R.Normal,s,t),this[LA]=new ls(e,R.Occlusion,i,t),this[FA]=new ls(e,R.Emissive,n,t);const r=a=>{this[fe].set(a,new ls(e,a,null,t))};r(R.Clearcoat),r(R.ClearcoatRoughness),r(R.ClearcoatNormal),r(R.SheenColor),r(R.SheenRoughness),r(R.Transmission),r(R.Thickness),r(R.Specular),r(R.SpecularColor),r(R.Iridescence),r(R.IridescenceThickness),r(R.Anisotropy)}async[ho](){if(this[Zt]!=null){const{set:e,material:t}=await this[Zt].doLazyLoad();return this[N]=e,this[fr](),this[Zt]=void 0,this.ensureLoaded=async()=>{},t}return this[N].values().next().value}colorFromRgb(e){const t=new Re;return e instanceof Array?t.fromArray(e):t.set(e),t}[b](){if(this[Zt]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[ho]()}get isLoaded(){return this[Zt]==null}get isActive(){return this[mr]}[Ks](e){this[mr]=e}get name(){return this[Ir]||""}set name(e){if(this[Ir]=e,this[N]!=null)for(const t of this[N])t.name=e}get pbrMetallicRoughness(){return this[b](),this[MA]}get normalTexture(){return this[b](),this[DA]}get occlusionTexture(){return this[b](),this[LA]}get emissiveTexture(){return this[b](),this[FA]}get emissiveFactor(){return this[b](),this[X].emissive.toArray()}get index(){return this[UA]}[tn](){return this[sn]}hasVariant(e){const t=this[kA].get(e);return t!=null&&this[sn].has(t.index)}setEmissiveFactor(e){this[b]();const t=this.colorFromRgb(e);for(const s of this[N])s.emissive.set(t);this[V]()}[pr](){return this[X].transparent?"BLEND":this[X].alphaTest>0?"MASK":"OPAQUE"}[NA](){this[b]();for(const e of this[N])this[pr]()==="MASK"?e.alphaTest==null&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){this[b]();for(const t of this[N])t.alphaTest=e,t.needsUpdate=!0;this[NA](),this[V]()}getAlphaCutoff(){return this[b](),this[X].alphaTest}setDoubleSided(e){this[b]();for(const t of this[N])t.side=e?Gt:So,t.needsUpdate=!0;this[V]()}getDoubleSided(){return this[b](),this[X].side==Gt}setAlphaMode(e){this[b]();const t=(s,i)=>{s.transparent=i,s.depthWrite=!i};for(const s of this[N])t(s,e==="BLEND"),e==="MASK"?s.alphaTest=.5:s.alphaTest=void 0,s.needsUpdate=!0;this[V]()}getAlphaMode(){return this[b](),this[pr]()}get emissiveStrength(){return this[b](),this[X].emissiveIntensity}setEmissiveStrength(e){this[b]();for(const t of this[N])t.emissiveIntensity=e;this[V]()}get clearcoatFactor(){return this[b](),this[X].clearcoat}get clearcoatRoughnessFactor(){return this[b](),this[X].clearcoatRoughness}get clearcoatTexture(){return this[b](),this[fe].get(R.Clearcoat)}get clearcoatRoughnessTexture(){return this[b](),this[fe].get(R.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[b](),this[fe].get(R.ClearcoatNormal)}get clearcoatNormalScale(){return this[b](),this[X].clearcoatNormalScale.x}setClearcoatFactor(e){this[b]();for(const t of this[N])t.clearcoat=e;this[V]()}setClearcoatRoughnessFactor(e){this[b]();for(const t of this[N])t.clearcoatRoughness=e;this[V]()}setClearcoatNormalScale(e){this[b]();for(const t of this[N])t.clearcoatNormalScale=new xe(e,e);this[V]()}get ior(){return this[b](),this[X].ior}setIor(e){this[b]();for(const t of this[N])t.ior=e;this[V]()}get sheenColorFactor(){return this[b](),this[X].sheenColor.toArray()}get sheenColorTexture(){return this[b](),this[fe].get(R.SheenColor)}get sheenRoughnessFactor(){return this[b](),this[X].sheenRoughness}get sheenRoughnessTexture(){return this[b](),this[fe].get(R.SheenRoughness)}setSheenColorFactor(e){this[b]();const t=this.colorFromRgb(e);for(const s of this[N])s.sheenColor.set(t),s.sheen=1;this[V]()}setSheenRoughnessFactor(e){this[b]();for(const t of this[N])t.sheenRoughness=e,t.sheen=1;this[V]()}get transmissionFactor(){return this[b](),this[X].transmission}get transmissionTexture(){return this[b](),this[fe].get(R.Transmission)}setTransmissionFactor(e){this[b]();for(const t of this[N])t.transmission=e;this[V]()}get thicknessFactor(){return this[b](),this[X].thickness}get thicknessTexture(){return this[b](),this[fe].get(R.Thickness)}get attenuationDistance(){return this[b](),this[X].attenuationDistance}get attenuationColor(){return this[b](),this[X].attenuationColor.toArray()}setThicknessFactor(e){this[b]();for(const t of this[N])t.thickness=e;this[V]()}setAttenuationDistance(e){this[b]();for(const t of this[N])t.attenuationDistance=e;this[V]()}setAttenuationColor(e){this[b]();const t=this.colorFromRgb(e);for(const s of this[N])s.attenuationColor.set(t);this[V]()}get specularFactor(){return this[b](),this[X].specularIntensity}get specularTexture(){return this[b](),this[fe].get(R.Specular)}get specularColorFactor(){return this[b](),this[X].specularColor.toArray()}get specularColorTexture(){return this[b](),this[fe].get(R.SheenColor)}setSpecularFactor(e){this[b]();for(const t of this[N])t.specularIntensity=e;this[V]()}setSpecularColorFactor(e){this[b]();const t=this.colorFromRgb(e);for(const s of this[N])s.specularColor.set(t);this[V]()}get iridescenceFactor(){return this[b](),this[X].iridescence}get iridescenceTexture(){return this[b](),this[fe].get(R.Iridescence)}get iridescenceIor(){return this[b](),this[X].iridescenceIOR}get iridescenceThicknessMinimum(){return this[b](),this[X].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[b](),this[X].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[b](),this[fe].get(R.IridescenceThickness)}setIridescenceFactor(e){this[b]();for(const t of this[N])t.iridescence=e;this[V]()}setIridescenceIor(e){this[b]();for(const t of this[N])t.iridescenceIOR=e;this[V]()}setIridescenceThicknessMinimum(e){this[b]();for(const t of this[N])t.iridescenceThicknessRange[0]=e;this[V]()}setIridescenceThicknessMaximum(e){this[b]();for(const t of this[N])t.iridescenceThicknessRange[1]=e;this[V]()}get anisotropyStrength(){return this[b](),this[X].anisotropy}get anisotropyRotation(){return this[b](),this[X].anisotropyRotation}get anisotropyTexture(){return this[b](),this[fe].get(R.Anisotropy)}setAnisotropyStrength(e){this[b]();for(const t of this[N])t.anisotropy=e;this[V]()}setAnisotropyRotation(e){this[b]();for(const t of this[N])t.anisotropyRotation=e;this[V]()}}let Zc=class{constructor(e){this.name="",this.children=new Array,this.name=e}};class Cr extends Zc{constructor(e,t,s,i){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;const{gltf:n,threeGLTF:r,threeObjectMap:a}=i;this.modelVariants=s,this.mesh.userData.variantData=s;const A=a.get(e.material);A.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=A.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);const l=e.userData.associations||{};if(l.meshes==null){console.error("Mesh is missing primitive index association");return}const d=((n.meshes||[])[l.meshes].primitives||[])[l.primitives];if(d==null){console.error("Mesh primitive definition is missing.");return}if(d.material!=null)this.materials.set(d.material,t[d.material]);else{const u=t.findIndex(g=>g.name==="Default");u>=0?this.materials.set(u,t[u]):console.warn("gltfPrimitive has no material!")}if(d.extensions&&d.extensions.KHR_materials_variants){const u=d.extensions.KHR_materials_variants,p=r.parser.json.extensions.KHR_materials_variants.variants;for(const f of u.mappings){const I=t[f.material];this.materials.set(f.material,I);for(const C of f.variants){const{name:E}=p[C];this.variantToMaterialMap.set(C,I),I[tn]().add(C),s.has(E)||s.set(E,{name:E,index:C})}}}}async setActiveMaterial(e){const t=this.materials.get(e);return t!=null&&(this.mesh.material=await t[ho](),this.activeMaterialIdx=e),this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(e==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(e)){const t=this.modelVariants.get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(this.variantToMaterialMap!=null&&e!=null){const t=this.variantToMaterialMap.get(e);if(t!=null)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const e of this.variantToMaterialMap.keys()){const t=this.mesh.userData.variantMaterials.get(e);if(t.material!=null)continue;const s=await this.enableVariantHelper(e);s!=null&&(t.material=s)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});const i=this.modelVariants.get(t).index;return e[tn]().add(i),this.variantToMaterialMap.set(i,e),this.materials.set(e.index,e),this.updateVariantUserData(i,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);const t=this.mesh.userData.variantMaterials;t!=null&&t.delete(e)}}updateVariantUserData(e,t){t[tn]().add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[N].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){const t=this.modelVariants.get(e);return t!=null&&this.variantInfo.has(t.index)?(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1):!0}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GA,PA,OA,HA,$A,VA;const yt=Symbol("materials"),Ni=Symbol("hierarchy"),qA=Symbol("roots"),Ve=Symbol("primitives"),eh=Symbol("prepareVariantsForExport"),th=Symbol("switchVariant"),sh=Symbol("materialFromPoint"),uo=Symbol("nodeFromPoint"),ih=Symbol("nodeFromIndex"),Ae=Symbol("variantData"),go=Symbol("availableVariants"),Br=Symbol("modelOnUpdate"),KA=Symbol("cloneMaterial");class Jf{constructor(e,t,s,i){this.gltf=e,this.gltfElementMap=t,this.mapKey=s,this.doLazyLoad=i}}class jf{constructor(e,t=()=>{}){this[GA]=new Array,this[PA]=new Array,this[OA]=new Array,this[HA]=new Array,this[$A]=()=>{},this[VA]=new Map,this[Br]=t;const{gltf:s,threeGLTF:i,gltfElementMap:n}=e;for(const[A,l]of s.materials.entries()){const h=n.get(l);if(h!=null)this[yt].push(new Er(t,A,!0,this[Ae],h,l.name));else{const d=(s.materials||[])[A],u=A,g=async()=>{const p=await i.parser.getDependency("material",u),f=new Set;return n.set(d,f),f.add(p),{set:f,material:p}};this[yt].push(new Er(t,A,!1,this[Ae],h,l.name,new Jf(s,n,d,g)))}}const r=new Map,a=new Array;for(const A of i.scene.children)a.push(A);for(;a.length>0;){const A=a.pop();let l=null;A instanceof P?(l=new Cr(A,this.materials,this[Ae],e),this[Ve].push(l)):l=new Zc(A.name);const h=r.get(A);h!=null?h.children.push(l):this[qA].push(l),this[Ni].push(l);for(const c of A.children)a.push(c),r.set(A,l)}}get materials(){return this[yt]}[(GA=yt,PA=Ni,OA=qA,HA=Ve,$A=Br,VA=Ae,go)](){const e=Array.from(this[Ae].values());return e.sort((t,s)=>t.index-s.index),e.map(t=>t.name)}getMaterialByName(e){const t=this[yt].filter(s=>s.name===e);return t.length>0?t[0]:null}[ih](e,t){const s=this[Ni].find(i=>{if(i instanceof Cr){const{meshes:n,primitives:r}=i.mesh.userData.associations;if(n==e&&r==t)return!0}return!1});return s??null}[uo](e){return this[Ni].find(t=>t instanceof Cr&&t.mesh===e.object)}[sh](e){return this[uo](e).getActiveMaterial()}async[th](e){for(const t of this[Ve])await t.enableVariant(e);for(const t of this.materials)t[Ks](!1);for(const t of this[Ve])this.materials[t.getActiveMaterial().index][Ks](!0)}async[eh](){const e=new Array;for(const t of this[Ve])e.push(t.instantiateVariants());await Promise.all(e)}[KA](e,t){const s=this.materials[e];s.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const i=s[N],n=new Set;for(const[a,A]of i.entries()){const l=A.clone();l.name=t+(i.size>1?"_inst"+a:""),n.add(l)}const r=new Er(this[Br],this[yt].length,!1,this[Ae],n,t);return this[yt].push(r),r}createMaterialInstanceForVariant(e,t,s,i=!0){let n=null;for(const r of this[Ve]){const a=this[Ae].get(s);a!=null&&r.variantInfo.has(a.index)||r.getMaterial(e)!=null&&(this.hasVariant(s)||this.createVariant(s),n==null&&(n=this[KA](e,t)),r.addVariant(n,s))}if(i&&n!=null){n[Ks](!0),this.materials[e][Ks](!1);for(const r of this[Ve])r.enableVariant(s)}return n}createVariant(e){this[Ae].has(e)?console.warn(`Variant '${e}'' already exists`):this[Ae].set(e,{name:e,index:this[Ae].size})}hasVariant(e){return this[Ae].has(e)}setMaterialToVariant(e,t){if(this[go]().find(s=>s===t)==null){console.warn(`Can't add material to '${t}', the variant does not exist.'`);return}if(e<0||e>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const s of this[Ve]){const i=s.getMaterial(e);i!=null&&s.addVariant(i,t)}}updateVariantName(e,t){const s=this[Ae].get(e);s!=null&&(s.name=t,this[Ae].set(t,s),this[Ae].delete(e))}deleteVariant(e){const t=this[Ae].get(e);if(t!=null){for(const s of this.materials)s.hasVariant(e)&&s[sn].delete(t.index);for(const s of this[Ve])s.deleteVariant(t.index);this[Ae].delete(e)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr=globalThis&&globalThis.__decorate||function(o,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,s);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(n=(i<3?r(n):i>3?r(e,t,n):r(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const nn=Symbol("currentGLTF"),rn=Symbol("originalGltfJson"),St=Symbol("model"),wr=Symbol("getOnUpdateMethod"),Ds=Symbol("buildTexture"),Wf=o=>{var e,t,s;class i extends o{constructor(){super(...arguments),this[e]=void 0,this[t]=null,this[s]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[St]}get availableVariants(){return this.model?this.model[go]():[]}get originalGltfJson(){return this[rn]}[(e=St,t=nn,s=rn,wr)](){return()=>{this[Ie]()}}[Ds](r){return r.encoding=Zl,r.wrapS=ds,r.wrapT=ds,new Jc(this[wr](),r)}async createTexture(r,a="image/png"){const{textureUtils:A}=this[K],l=await A.loadImage(r);return l.userData.mimeType=a,this[Ds](l)}async createLottieTexture(r,a=1){const{textureUtils:A}=this[K],l=await A.loadLottie(r,a);return this[Ds](l)}createVideoTexture(r){const a=document.createElement("video");a.src=r,a.muted=!0,a.playsInline=!0,a.loop=!0,a.play();const A=new ou(a);return this[Ds](A)}createCanvasTexture(){const r=document.createElement("canvas"),a=new au(r);return this[Ds](a)}async updated(r){if(super.updated(r),r.has("variantName")){const a=this[Ot].beginActivity();a(.1);const A=this[St],{variantName:l}=this;A!=null&&(await A[th](l),this[Ie](),this.dispatchEvent(new CustomEvent("variant-applied"))),a(1)}if(r.has("orientation")||r.has("scale")){if(!this.loaded)return;const a=this[x];a.applyTransform(),a.updateBoundingBox(),a.updateShadow(),this[K].arRenderer.onUpdateScene(),this[Ie]()}}[ft](){super[ft]();const{currentGLTF:r}=this[x];if(r!=null){const{correlatedSceneGraph:a}=r;a!=null&&r!==this[nn]&&(this[St]=new jf(a,this[wr]()),this[rn]=JSON.parse(JSON.stringify(a.gltf))),"variants"in r.userData&&this.requestUpdate("variantName")}this[nn]=r}async exportScene(r){const a=this[x];return new Promise(async(A,l)=>{const h={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(h,r),h.animations=a.animations,h.truncateDrawRange=!0;const c=a.shadow;let d=!1;c!=null&&(d=c.visible,c.visible=!1),await this[St][eh](),new No().register(g=>new Tp(g)).parse(a.model,g=>A(new Blob([h.binary?g:JSON.stringify(g)],{type:h.binary?"application/octet-stream":"application/json"})),()=>l("glTF export failed"),h),c!=null&&(c.visible=d)})}materialFromPoint(r,a){const A=this[St];if(A==null)return null;const l=this[x],h=l.getNDC(r,a),c=l.hitFromPoint(h);return c==null||c.face==null?null:A[sh](c)}}return yr([F({type:String,attribute:"variant-name"})],i.prototype,"variantName",void 0),yr([F({type:String,attribute:"orientation"})],i.prototype,"orientation",void 0),yr([F({type:String,attribute:"scale"})],i.prototype,"scale",void 0),i};/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new U,Qr=new U,vr=new U,ki=new To,YA=new ec,zA=new bo;class nh extends Ap{constructor(e){super(document.createElement("div")),this.normal=new U(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(e){if(e==null)return;const t=ut(e)[0].terms;for(let s=0;s<3;++s)this.position.setComponent(s,Xe(t[s]).number);this.updateMatrixWorld()}updateNormal(e){if(e==null)return;const t=ut(e)[0].terms;for(let s=0;s<3;++s)this.normal.setComponent(s,t[s].number)}updateSurface(e){if(!e&&this.initialized)return;const{mesh:t,tri:s,bary:i}=this;if(t==null||s==null||i==null)return;t.getVertexPosition(s.x,Ui),t.getVertexPosition(s.y,Qr),t.getVertexPosition(s.z,vr),Ui.toArray(ki.elements,0),Qr.toArray(ki.elements,3),vr.toArray(ki.elements,6),this.position.copy(i).applyMatrix3(ki);const n=this.parent;n.worldToLocal(t.localToWorld(this.position)),YA.set(Ui,Qr,vr),YA.getNormal(this.normal).transformDirection(t.matrixWorld);const r=n.parent;zA.setFromAxisAngle(Ui.set(0,1,0),-r.yaw),this.normal.applyQuaternion(zA)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){e?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;const s=t,i=s.dataset.visibilityAttribute;if(i!=null){const n=`data-${i}`;e?s.setAttribute(n,""):s.removeAttribute(n)}s.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}),this.initialized=!0}}const Xf={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},Zf={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function JA(o,e,t){return(1-t)*o+t*e}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=9,em=6,xr=2,tm=.3;class sm extends ci{constructor(e,t,s){super(),this.camera=new vo,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new Au,this.horizontalBlurMaterial=new An(Xf),this.verticalBlurMaterial=new An(Zf),this.intensity=0,this.softness=1,this.boundingBox=new Tt,this.size=new U,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:i}=this;i.rotation.x=Math.PI/2,i.left=-.5,i.right=.5,i.bottom=-.5,i.top=.5,this.add(i);const n=new En,r=new We({opacity:1,transparent:!0,side:Cn});this.floor=new P(n,r),this.floor.userData.shadow=!0,i.add(this.floor),this.blurPlane=new P(n),this.blurPlane.visible=!1,i.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(a){a.fragmentShader=a.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,s)}setScene(e,t,s){const{boundingBox:i,size:n,rotation:r,position:a}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(n.x,n.y,n.z)*(this.isAnimated?xr:1),this.boundingBox.getCenter(a),s==="back"){const{min:A,max:l}=i;[A.y,A.z]=[A.z,A.y],[l.y,l.z]=[l.z,l.y],[n.y,n.z]=[n.z,n.y],r.x=Math.PI/2,r.y=Math.PI}else r.x=0,r.y=0;if(this.isAnimated){const A=i.min.y,l=i.max.y;n.y=this.maxDimension,i.expandByVector(n.subScalar(this.maxDimension).multiplyScalar(-.5)),i.min.y=A,i.max.y=l,n.set(this.maxDimension,l-A,this.maxDimension)}s==="bottom"?a.y=i.min.y:a.z=i.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;const{size:t,camera:s}=this,i=this.isAnimated?xr:1,n=i*Math.pow(2,jA-e*(jA-em));this.setMapSize(n);const r=t.y/2,a=t.y*i;s.near=0,s.far=JA(a,r,e),this.depthMaterial.opacity=1/e,s.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){const{size:t}=this;this.isAnimated&&(e*=xr);const s=Math.floor(t.x>t.z?e:e*t.x/t.z),i=Math.floor(t.x>t.z?e*t.z/t.x:e),n=10,r=n+s,a=n+i;if(this.renderTarget!=null&&(this.renderTarget.width!==r||this.renderTarget.height!==a)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const A={format:ct};this.renderTarget=new so(r,a,A),this.renderTargetBlur=new so(r,a,A),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+n/s),t.z*(1+n/i),1),this.needsUpdate=!0}setIntensity(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*JA(tm,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+.001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;const s=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;const i=e.xr.enabled;e.xr.enabled=!1;const n=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=i,e.setRenderTarget(n),e.setClearAlpha(s)}blurShadow(e){const{camera:t,horizontalBlurMaterial:s,verticalBlurMaterial:i,renderTarget:n,renderTargetBlur:r,blurPlane:a}=this;a.visible=!0,a.material=s,s.uniforms.h.value=1/this.renderTarget.width,s.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(r),e.render(a,t),a.material=i,i.uniforms.v.value=1/this.renderTarget.height,i.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(n),e.render(a,t),a.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=100,Sr=new U,WA=new U,XA=new U,_r=new lu,im=new U,Ls=new xe;class nm extends gt{constructor({canvas:e,element:t,width:s,height:i}){super(),this.annotationRenderer=new lp,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new si(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new ci,this.animationNames=[],this.boundingBox=new Tt,this.boundingSphere=new _o,this.size=new U,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.isDirty=!1,this.goalTarget=new U,this.targetDamperX=new Ce,this.targetDamperY=new Ce,this.targetDamperZ=new Ce,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=t,this.canvas=e,this.camera=new si(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(s,i),this.target.name="Target",this.mixer=new cu(this.target);const{domElement:n}=this.annotationRenderer,{style:r}=n;r.display="none",r.pointerEvents="none",r.position="absolute",r.top="0",this.element.shadowRoot.querySelector(".default").appendChild(n),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e,t=()=>{}){if(!e||e===this.url){t(1);return}if(this.reset(),this.url=e,this.externalRenderer!=null){const a=await this.externalRenderer.load(t);this.boundingSphere.radius=a.framedRadius,this.idealAspect=a.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let s;try{s=await new Promise(async(a,A)=>{this.cancelPendingSourceChange=()=>A();try{const l=await this.element[K].loader.load(e,this.element,t);a(l)}catch(l){A(l)}})}catch(a){if(a==null)return;throw a}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=s,s!=null&&(this._model=s.scene,this.target.add(s.scene));const{animations:i}=s,n=new Map,r=[];for(const a of i)n.set(a.name,a),r.push(a.name);this.animations=i,this.animationsByName=n,this.animationNames=r,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity)}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:e}=this;e!=null&&(e.removeFromParent(),this._model=null);const t=this._currentGLTF;t!=null&&(t.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[nn]=null,this.element[rn]=null,this.element[St]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(!(this.width===e&&this.height===t)){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,this.externalRenderer!=null){const s=oo();this.externalRenderer.resize(e*s,t*s)}this.queueRender()}}markBakedShadow(e){e.userData.shadow=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.shadow=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){const t=new Tt;e.traverse(s=>{const i=s;if(!i.material||!i.material.transparent)return;t.setFromObject(i);const r=t.getSize(im),a=Math.min(r.x,r.y,r.z);Math.max(r.x,r.y,r.z)<br*a||this.markBakedShadow(i)})}checkBakedShadows(){const{min:e,max:t}=this.boundingBox,s=new Tt;this.boundingBox.getSize(this.size);for(const i of this.bakedShadows)s.setFromObject(i),!(s.min.y<e.y+this.size.y/br&&s.min.x<=e.x&&s.max.x>=t.x&&s.min.z<=e.z&&s.max.z>=t.z)&&(s.min.z<e.z+this.size.z/br&&s.min.x<=e.x&&s.max.x>=t.x&&s.min.y<=e.y&&s.max.y>=t.y||this.unmarkBakedShadow(i))}applyTransform(){const{model:e}=this;if(e==null)return;const t=ut(this.element.orientation)[0].terms,s=Xe(t[0]).number,i=Xe(t[1]).number,n=Xe(t[2]).number;e.quaternion.setFromEuler(new Xl(i,n,s,"YXZ"));const r=ut(this.element.scale)[0].terms;e.scale.set(r[0].number,r[1].number,r[2].number)}updateBoundingBox(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.findBakedShadows(e);const t=(s,i)=>s.expandByPoint(i);this.setBakedShadowVisibility(!1),this.boundingBox=Bi(e,t,new Tt),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(s=>this.unmarkBakedShadow(s)),this.boundingBox=Bi(e,t,new Tt)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.setBakedShadowVisibility(!1);const{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget());const s=(n,r)=>Math.max(n,t.distanceToSquared(r));this.boundingSphere.radius=Math.sqrt(Bi(e,s,0));const i=(n,r)=>{r.sub(t);const a=Math.sqrt(r.x*r.x+r.z*r.z);return Math.max(n,a/(this.idealCameraDistance()-Math.abs(r.y)))};this.idealAspect=Bi(e,i,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(e=this.shadowIntensity<=0){for(const t of this.bakedShadows)t.visible=e}idealCameraDistance(){const e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){const t=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}getNDC(e,t){if(this.xrCamera!=null)Ls.set(e/window.screen.width,t/window.screen.height);else{const s=this.element.getBoundingClientRect();Ls.set((e-s.x)/this.width,(t-s.y)/this.height)}return Ls.multiplyScalar(2).subScalar(1),Ls.y*=-1,Ls}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[K].arRenderer.presentedScene!==this&&(this.environment=e,this.background=t,this.queueRender())}setTarget(e,t,s){this.goalTarget.set(-e,-t,-s)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(_c)}updateTarget(e){const t=this.goalTarget,s=this.target.position;if(t.equals(s))return!1;{const i=this.boundingSphere.radius/10;let{x:n,y:r,z:a}=s;return n=this.targetDamperX.update(n,t.x,e,i),r=this.targetDamperY.update(r,t.y,e,i),a=this.targetDamperZ.update(a,t.z,e,i),this.target.position.set(n,r,a),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){const{x:s,z:i}=this.position;this.yaw=Math.atan2(e-s,t-i)}get model(){return this._model}set yaw(e){this.rotation.y=e,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===tc&&(e&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(e=null,t=0,s=sc,i=1/0){if(this._currentGLTF==null)return;const{animations:n}=this;if(n==null||n.length===0)return;let r=null;if(e!=null&&(r=this.animationsByName.get(e),r==null)){const a=parseInt(e);!isNaN(a)&&a>=0&&a<n.length&&(r=n[a])}r==null&&(r=n[0]);try{const{currentAnimationAction:a}=this,A=this.mixer.clipAction(r,this);this.currentAnimationAction=A,this.element.paused?this.mixer.stopAllAction():(A.paused=!1,a!=null&&A!==a?A.crossFadeFrom(a,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),A.setLoop(s,i),A.enabled=!0,A.clampWhenFinished=!0,A.play()}catch(a){console.error(a)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){const e=this.shadow;if(e!=null){const t=this.element.arPlacement==="wall"?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){const t=this.shadow;t!=null&&t.needsUpdate==!0&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(e<=0&&this.shadow==null))){if(this.shadow==null){const t=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new sm(this,this.shadowSoftness,t)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;const t=this.shadow;t!=null&&t.setSoftness(e)}setShadowOffset(e){const t=this.shadow;t!=null&&t.setOffset(e)}hitFromPoint(e,t=this){return _r.setFromCamera(e,this.getCamera()),_r.intersectObject(t,!0).find(i=>i.object.visible&&!i.object.userData.shadow)}positionAndNormalFromPoint(e,t=this){var s;const i=this.hitFromPoint(e,t);if(i==null)return null;const n=i.point,r=i.face!=null?i.face.normal.clone().applyNormalMatrix(new To().getNormalMatrix(i.object.matrixWorld)):_r.ray.direction.clone().multiplyScalar(-1),a=(s=i.uv)!==null&&s!==void 0?s:null;return{position:n,normal:r,uv:a}}surfaceFromPoint(e,t=this){const s=this.element.model;if(s==null)return null;const i=this.hitFromPoint(e,t);if(i==null||i.face==null)return null;const n=s[uo](i),{meshes:r,primitives:a}=n.mesh.userData.associations,A=new U,l=new U,h=new U,{a:c,b:d,c:u}=i.face,g=i.object;g.getVertexPosition(c,A),g.getVertexPosition(d,l),g.getVertexPosition(u,h);const p=new ec(A,l,h),f=new U;return p.getBarycoord(g.worldToLocal(i.point),f),`${r} ${a} ${c} ${d} ${u} ${f.x.toFixed(3)} ${f.y.toFixed(3)} ${f.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element)}removeHotspot(e){this.target.remove(e)}forHotspots(e){const{children:t}=this.target;for(let s=0,i=t.length;s<i;s++){const n=t[s];n instanceof nh&&e(n)}}initializeSurface(e){if(e.surface!=null&&e.mesh==null){const t=ut(e.surface)[0].terms;if(t.length!=8){console.warn(e.surface+" does not have exactly 8 numbers.");return}const s=this.element.model[ih](t[0].number,t[1].number),i=new U(t[2].number,t[3].number,t[4].number);if(s==null){console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const n=s.mesh.geometry.attributes.position.count;if(i.x>=n||i.y>=n||i.z>=n){console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const r=new U(t[5].number,t[6].number,t[7].number);e.mesh=s.mesh,e.tri=i,e.bary=r}}updateSurfaceHotspots(){const e=!this.element.paused;this.forHotspots(t=>{this.initializeSurface(t),t.updateSurface(e)})}updateHotspotsVisibility(e){this.forHotspots(t=>{Sr.copy(e),WA.setFromMatrixPosition(t.matrixWorld),Sr.sub(WA),XA.copy(t.normal).transformDirection(this.target.matrixWorld),Sr.dot(XA)<0?t.hide():t.show()})}orientHotspots(e){this.forHotspots(t=>{t.orient(e)})}setHotspotsVisibility(e){this.forHotspots(t=>{t.visible=e})}updateSchema(e){var t;const{schemaElement:s,element:i}=this,{alt:n,poster:r,iosSrc:a}=i;if(e!=null){const A=[{"@type":"MediaObject",contentUrl:e,encodingFormat:((t=e.split(".").pop())===null||t===void 0?void 0:t.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];a&&A.push({"@type":"MediaObject",contentUrl:a,encodingFormat:"model/vnd.usdz+zip"});const l={"@context":"http://schema.org/","@type":"3DModel",image:r??void 0,name:n??void 0,encoding:A};s.textContent=JSON.stringify(l),document.head.appendChild(s)}else s.parentElement!=null&&s.parentElement.removeChild(s)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){const e={progress:0,completed:!1};return this.ongoingActivities.add(e),this.ongoingActivityCount===1&&this.announceTotalProgress(e,0),t=>{let s;return s=Math.max(Fe(t,0,1),e.progress),s!==e.progress&&this.announceTotalProgress(e,s),e.progress}}announceTotalProgress(e,t){let s=0,i=0;t==1&&(e.completed=!0);for(const a of this.ongoingActivities){const{progress:A}=a;s+=1-A,a.completed===!0&&i++}const n=e.progress;e.progress=t,this.totalProgress+=(t-n)*(1-this.totalProgress)/s;const r=i===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:r}})),i===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn=globalThis&&globalThis.__decorate||function(o,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,s);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(n=(i<3?r(n):i>3?r(e,t,n):r(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n},ZA,el,tl,sl,il,nl,rl,ol,al,Al,ll,cl,hl;const om=10,am=50,Am=0,lm=300,cm=150,ht=document.createElement("canvas"),Tr=Symbol("fallbackResizeHandler"),ul=Symbol("defaultAriaLabel"),Gi=Symbol("resizeObserver"),es=Symbol("clearModelTimeout"),Rr=Symbol("onContextLost"),ts=Symbol("loaded"),Mr=Symbol("status"),Dr=Symbol("onFocus"),Lr=Symbol("onBlur"),os=Symbol("updateSize"),Pi=Symbol("intersectionObserver"),_t=Symbol("isElementInViewport"),gn=Symbol("announceModelVisibility"),js=Symbol("ariaLabel"),po=Symbol("altDefaulted"),Fs=Symbol("statusElement"),fo=Symbol("updateStatus"),Ys=Symbol("loadedTime"),hs=Symbol("updateSource"),dl=Symbol("markLoaded"),Ws=Symbol("container"),ke=Symbol("input"),mo=Symbol("canvas"),x=Symbol("scene"),Ie=Symbol("needsRender"),Ge=Symbol("tick"),ft=Symbol("onModelLoad"),Ai=Symbol("onResize"),K=Symbol("renderer"),Ot=Symbol("progressTracker"),gl=Symbol("getLoaded"),Ht=Symbol("getModelIsVisible"),Is=Symbol("shouldAttemptPreload"),lt=o=>({x:o.x,y:o.y,z:o.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),hm=o=>({u:o.x,v:o.y,toString(){return`${this.u} ${this.v}`}});class pi extends Rt{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[ZA]=!1,this[el]=!1,this[tl]=0,this[sl]="",this[il]=null,this[nl]=aa(()=>{const i=this.getBoundingClientRect();this[os](i)},am),this[rl]=aa(i=>{const n=this.modelIsVisible;n!==i&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:n}}))},Am),this[ol]=null,this[al]=null,this[Al]=new rm,this[ll]=()=>{this[Fs].textContent=this[Mr]},this[cl]=()=>{this[Fs].textContent=""},this[hl]=i=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:i.sourceEvent}}))},this.attachShadow({mode:"open"});const e=this.shadowRoot;lg(e),this[Ws]=e.querySelector(".container"),this[ke]=e.querySelector(".userInput"),this[mo]=e.querySelector("canvas"),this[Fs]=e.querySelector("#status"),this[ul]=this[ke].getAttribute("aria-label");let t,s;if(this.isConnected){const i=this.getBoundingClientRect();t=i.width,s=i.height}else t=lm,s=cm;this[x]=new nm({canvas:this[mo],element:this,width:t,height:s}),Promise.resolve().then(()=>{this[os](this.getBoundingClientRect())}),Ln&&(this[Gi]=new ResizeObserver(i=>{if(!this[K].isPresenting)for(let n of i)n.target===this&&this[os](n.contentRect)})),Fn?this[Pi]=new IntersectionObserver(i=>{for(let n of i)if(n.target===this){const r=this.modelIsVisible;this[_t]=n.isIntersecting,this[gn](r),this[_t]&&!this.loaded&&this[hs]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[_t]=!0}static get is(){return"model-viewer"}static set modelCacheSize(e){ne[ot].evictionThreshold=e}static get modelCacheSize(){return ne[ot].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),ve.singleton.minScale=e}static get minimumRenderScale(){return ve.singleton.minScale}get loaded(){return this[gl]()}get[(ZA=_t,el=ts,tl=Ys,sl=Mr,il=es,nl=Tr,rl=gn,ol=Gi,al=Pi,Al=Ot,K)](){return ve.singleton}get modelIsVisible(){return this[Ht]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),Ln?this[Gi].observe(this):self.addEventListener("resize",this[Tr]),Fn&&this[Pi].observe(this),this.addEventListener("focus",this[Dr]),this.addEventListener("blur",this[Lr]);const e=this[K];e.addEventListener("contextlost",this[Rr]),e.registerScene(this[x]),this[es]!=null&&(self.clearTimeout(this[es]),this[es]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),Ln?this[Gi].unobserve(this):self.removeEventListener("resize",this[Tr]),Fn&&this[Pi].unobserve(this),this.removeEventListener("focus",this[Dr]),this.removeEventListener("blur",this[Lr]);const e=this[K];e.removeEventListener("contextlost",this[Rr]),e.unregisterScene(this[x]),this[es]=self.setTimeout(()=>{this[x].dispose(),this[es]=null},om)}updated(e){super.updated(e),e.has("src")&&(this.src==null?(this[ts]=!1,this[Ys]=0,this[x].reset()):this.src!==this[x].url&&(this[ts]=!1,this[Ys]=0,this[hs]())),e.has("alt")&&this[ke].setAttribute("aria-label",this[js]),e.has("withCredentials")&&(ne.withCredentials=this.withCredentials,this[K].textureUtils.withCredentials=this.withCredentials),e.has("generateSchema")&&(this.generateSchema?this[x].updateSchema(this.src):this[x].updateSchema(null))}toDataURL(e,t){return this[K].displayCanvas(this[x]).toDataURL(e,t)}async toBlob(e){const t=e?e.mimeType:void 0,s=e?e.qualityArgument:void 0,i=e?e.idealAspect:void 0,{width:n,height:r,idealAspect:a,aspect:A}=this[x],{dpr:l,scaleFactor:h}=this[K];let c=n*h*l,d=r*h*l,u=0,g=0;if(i===!0)if(a>A){const p=d;d=Math.round(c/a),g=(p-d)/2}else{const p=c;c=Math.round(d*a),u=(p-c)/2}ht.width=c,ht.height=d;try{return new Promise(async(p,f)=>{ht.getContext("2d").drawImage(this[K].displayCanvas(this[x]),u,g,c,d,0,0,c,d),ht.toBlob(I=>{if(!I)return f(new Error("Unable to retrieve canvas blob"));p(I)},t,s)})}finally{this[os]({width:n,height:r})}}registerEffectComposer(e){e.setRenderer(this[K].threeRenderer),e.setMainCamera(this[x].getCamera()),e.setMainScene(this[x]),this[x].effectRenderer=e}unregisterEffectComposer(){this[x].effectRenderer=null}registerRenderer(e){this[x].externalRenderer=e}unregisterRenderer(){this[x].externalRenderer=null}get[js](){return this[po]}get[po](){return this.alt==null||this.alt==="null"?this[ul]:this.alt}[gl](){return this[ts]}[Ht](){return this.loaded&&this[_t]}[Is](){return!!this.src&&this[_t]}[os]({width:e,height:t}){e===0||t===0||(this[Ws].style.width=`${e}px`,this[Ws].style.height=`${t}px`,this[Ai]({width:e,height:t}))}[Ge](e,t){var s;(s=this[x].effectRenderer)===null||s===void 0||s.beforeRender(e,t)}[dl](){this[ts]||(this[ts]=!0,this[Ys]=performance.now())}[Ie](){this[x].queueRender()}[ft](){}[fo](e){this[Mr]=e;const t=this.getRootNode();t!=null&&t.activeElement===this&&this[Fs].textContent!=e&&(this[Fs].textContent=e)}[(ll=Dr,cl=Lr,Ai)](e){this[x].setSize(e.width,e.height)}async[(hl=Rr,hs)](){const e=this[x];if(this.loaded||!this[Is]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[fo]("Loading"),e.stopAnimation();const t=this[Ot].beginActivity(),s=this.src;try{const i=e.setSource(s,r=>t(Fe(r,0,1)*.95)),n=this[hn]();await Promise.all([i,n]),this[dl](),this[ft](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise(r=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:s}})),r()})})})}catch(i){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:i}}))}finally{t(1)}}}Qn([F({type:String})],pi.prototype,"alt",void 0);Qn([F({type:String})],pi.prototype,"src",void 0);Qn([F({type:Boolean,attribute:"with-credentials"})],pi.prototype,"withCredentials",void 0);Qn([F({type:Boolean,attribute:"generate-schema"})],pi.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr=globalThis&&globalThis.__decorate||function(o,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,s);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(n=(i<3?r(n):i>3?r(e,t,n):r(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const pl=1e3,Oi=Symbol("changeAnimation"),qe=Symbol("paused"),um={repetitions:1/0,pingpong:!1},dm=o=>{var e;class t extends o{constructor(...i){super(i),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[e]=!0,this[x].subscribeMixerEvent("loop",n=>{const r=n.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:r}}))}),this[x].subscribeMixerEvent("finished",()=>{this[qe]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[x].animationNames:[]}get duration(){return this[x].duration}get paused(){return this[qe]}get currentTime(){return this[x].animationTime}set currentTime(i){this[x].animationTime=i,this[Ie]()}get timeScale(){return this[x].animationTimeScale}set timeScale(i){this[x].animationTimeScale=i}pause(){this[qe]||(this[qe]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(i){this.availableAnimations.length>0&&(this[qe]=!1,this[Oi](i),this.dispatchEvent(new CustomEvent("play")))}[(e=qe,ft)](){super[ft](),this[qe]=!0,this.animationName!=null&&this[Oi](),this.autoplay&&this.play()}[Ge](i,n){super[Ge](i,n),!(this[qe]||!this[Ht]()&&!this[K].isPresenting)&&(this[x].updateAnimation(n/pl),this[Ie]())}updated(i){super.updated(i),i.has("autoplay")&&this.autoplay&&this.play(),i.has("animationName")&&this[Oi]()}[Oi](i=um){var n;const r=(n=i.repetitions)!==null&&n!==void 0?n:1/0,a=i.pingpong?tc:r===1?hu:sc;this[x].playAnimation(this.animationName,this.animationCrossfadeDuration/pl,a,r),this[qe]&&(this[x].updateAnimation(0),this[Ie]())}}return Fr([F({type:Boolean})],t.prototype,"autoplay",void 0),Fr([F({type:String,attribute:"animation-name"})],t.prototype,"animationName",void 0),Fr([F({type:Number,attribute:"animation-crossfade-duration"})],t.prototype,"animationCrossfadeDuration",void 0),t};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt=Symbol("hotspotMap"),Nr=Symbol("mutationCallback"),Ns=Symbol("observer"),Ur=Symbol("addHotspot"),fl=Symbol("removeHotspot"),kr=new Ze,gm=o=>{var e,t,s;class i extends o{constructor(){super(...arguments),this[e]=new Map,this[t]=r=>{r.forEach(a=>{(!(a instanceof MutationRecord)||a.type==="childList")&&(a.addedNodes.forEach(A=>{this[Ur](A)}),a.removedNodes.forEach(A=>{this[fl](A)}),this[Ie]())})},this[s]=new MutationObserver(this[Nr])}connectedCallback(){super.connectedCallback();for(let a=0;a<this.children.length;++a)this[Ur](this.children[a]);const{ShadyDOM:r}=self;r==null?this[Ns].observe(this,{childList:!0}):this[Ns]=r.observeChildren(this,this[Nr])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:r}=self;r==null?this[Ns].disconnect():r.unobserveChildren(this[Ns])}[(e=wt,t=Nr,s=Ns,Ge)](r,a){super[Ge](r,a);const A=this[x],{annotationRenderer:l}=A,h=A.getCamera();A.shouldRender()&&(A.updateSurfaceHotspots(),A.updateHotspotsVisibility(h.position),l.domElement.style.display="",l.render(A,h))}updateHotspot(r){const a=this[wt].get(r.name);a!=null&&(a.updatePosition(r.position),a.updateNormal(r.normal),a.surface=r.surface,this[Ie]())}queryHotspot(r){const a=this[wt].get(r);if(a==null)return null;const A=lt(a.position),l=lt(a.normal),h=a.facingCamera,c=this[x],d=c.getCamera(),u=new U;u.setFromMatrixPosition(a.matrixWorld),u.project(d);const g=c.width/2,p=c.height/2;u.x=u.x*g+g,u.y=-(u.y*p)+p;const f=lt(new U(u.x,u.y,u.z));return!Number.isFinite(f.x)||!Number.isFinite(f.y)?null:{position:A,normal:l,canvasPosition:f,facingCamera:h}}positionAndNormalFromPoint(r,a){const A=this[x],l=A.getNDC(r,a),h=A.positionAndNormalFromPoint(l);if(h==null)return null;kr.copy(A.target.matrixWorld).invert();const c=lt(h.position.applyMatrix4(kr)),d=lt(h.normal.transformDirection(kr));let u=null;return h.uv!=null&&(u=hm(h.uv)),{position:c,normal:d,uv:u}}surfaceFromPoint(r,a){const A=this[x],l=A.getNDC(r,a);return A.surfaceFromPoint(l)}[Ur](r){if(!(r instanceof HTMLElement&&r.slot.indexOf("hotspot")===0))return;let a=this[wt].get(r.slot);a!=null?a.increment():(a=new nh({name:r.slot,position:r.dataset.position,normal:r.dataset.normal,surface:r.dataset.surface}),this[wt].set(r.slot,a),this[x].addHotspot(a)),this[x].queueRender()}[fl](r){if(!(r instanceof HTMLElement))return;const a=this[wt].get(r.slot);a&&(a.decrement()&&(this[x].removeHotspot(a),this[wt].delete(r.slot)),this[x].queueRender())}}return i};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var ml=function(o){return URL.createObjectURL(new Blob([o],{type:"text/javascript"}))};try{URL.revokeObjectURL(ml(""))}catch{ml=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var ge=Uint8Array,de=Uint16Array,Es=Uint32Array,Uo=new ge([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ko=new ge([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Il=new ge([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rh=function(o,e){for(var t=new de(31),s=0;s<31;++s)t[s]=e+=1<<o[s-1];for(var i=new Es(t[30]),s=1;s<30;++s)for(var n=t[s];n<t[s+1];++n)i[n]=n-t[s]<<5|s;return[t,i]},oh=rh(Uo,2),pm=oh[0],Io=oh[1];pm[28]=258,Io[258]=28;var fm=rh(ko,0),El=fm[1],Eo=new de(32768);for(var Z=0;Z<32768;++Z){var it=(Z&43690)>>>1|(Z&21845)<<1;it=(it&52428)>>>2|(it&13107)<<2,it=(it&61680)>>>4|(it&3855)<<4,Eo[Z]=((it&65280)>>>8|(it&255)<<8)>>>1}var Xs=function(o,e,t){for(var s=o.length,i=0,n=new de(e);i<s;++i)++n[o[i]-1];var r=new de(e);for(i=0;i<e;++i)r[i]=r[i-1]+n[i-1]<<1;var a;if(t){a=new de(1<<e);var A=15-e;for(i=0;i<s;++i)if(o[i])for(var l=i<<4|o[i],h=e-o[i],c=r[o[i]-1]++<<h,d=c|(1<<h)-1;c<=d;++c)a[Eo[c]>>>A]=l}else for(a=new de(s),i=0;i<s;++i)o[i]&&(a[i]=Eo[r[o[i]-1]++]>>>15-o[i]);return a},$t=new ge(288);for(var Z=0;Z<144;++Z)$t[Z]=8;for(var Z=144;Z<256;++Z)$t[Z]=9;for(var Z=256;Z<280;++Z)$t[Z]=7;for(var Z=280;Z<288;++Z)$t[Z]=8;var pn=new ge(32);for(var Z=0;Z<32;++Z)pn[Z]=5;var mm=Xs($t,9,0),Im=Xs(pn,5,0),ah=function(o){return(o/8|0)+(o&7&&1)},Ah=function(o,e,t){(e==null||e<0)&&(e=0),(t==null||t>o.length)&&(t=o.length);var s=new(o instanceof de?de:o instanceof Es?Es:ge)(t-e);return s.set(o.subarray(e,t)),s},Ke=function(o,e,t){t<<=e&7;var s=e/8|0;o[s]|=t,o[s+1]|=t>>>8},Us=function(o,e,t){t<<=e&7;var s=e/8|0;o[s]|=t,o[s+1]|=t>>>8,o[s+2]|=t>>>16},Gr=function(o,e){for(var t=[],s=0;s<o.length;++s)o[s]&&t.push({s,f:o[s]});var i=t.length,n=t.slice();if(!i)return[Go,0];if(i==1){var r=new ge(t[0].s+1);return r[t[0].s]=1,[r,1]}t.sort(function(B,y){return B.f-y.f}),t.push({s:-1,f:25001});var a=t[0],A=t[1],l=0,h=1,c=2;for(t[0]={s:-1,f:a.f+A.f,l:a,r:A};h!=i-1;)a=t[t[l].f<t[c].f?l++:c++],A=t[l!=h&&t[l].f<t[c].f?l++:c++],t[h++]={s:-1,f:a.f+A.f,l:a,r:A};for(var d=n[0].s,s=1;s<i;++s)n[s].s>d&&(d=n[s].s);var u=new de(d+1),g=Co(t[h-1],u,0);if(g>e){var s=0,p=0,f=g-e,I=1<<f;for(n.sort(function(y,w){return u[w.s]-u[y.s]||y.f-w.f});s<i;++s){var C=n[s].s;if(u[C]>e)p+=I-(1<<g-u[C]),u[C]=e;else break}for(p>>>=f;p>0;){var E=n[s].s;u[E]<e?p-=1<<e-u[E]++-1:++s}for(;s>=0&&p;--s){var m=n[s].s;u[m]==e&&(--u[m],++p)}g=e}return[new ge(u),g]},Co=function(o,e,t){return o.s==-1?Math.max(Co(o.l,e,t+1),Co(o.r,e,t+1)):e[o.s]=t},Cl=function(o){for(var e=o.length;e&&!o[--e];);for(var t=new de(++e),s=0,i=o[0],n=1,r=function(A){t[s++]=A},a=1;a<=e;++a)if(o[a]==i&&a!=e)++n;else{if(!i&&n>2){for(;n>138;n-=138)r(32754);n>2&&(r(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(r(i),--n;n>6;n-=6)r(8304);n>2&&(r(n-3<<5|8208),n=0)}for(;n--;)r(i);n=1,i=o[a]}return[t.subarray(0,s),e]},ks=function(o,e){for(var t=0,s=0;s<e.length;++s)t+=o[s]*e[s];return t},on=function(o,e,t){var s=t.length,i=ah(e+2);o[i]=s&255,o[i+1]=s>>>8,o[i+2]=o[i]^255,o[i+3]=o[i+1]^255;for(var n=0;n<s;++n)o[i+n+4]=t[n];return(i+4+s)*8},Bl=function(o,e,t,s,i,n,r,a,A,l,h){Ke(e,h++,t),++i[256];for(var c=Gr(i,15),d=c[0],u=c[1],g=Gr(n,15),p=g[0],f=g[1],I=Cl(d),C=I[0],E=I[1],m=Cl(p),B=m[0],y=m[1],w=new de(19),Q=0;Q<C.length;++Q)w[C[Q]&31]++;for(var Q=0;Q<B.length;++Q)w[B[Q]&31]++;for(var v=Gr(w,7),S=v[0],_=v[1],k=19;k>4&&!S[Il[k-1]];--k);var j=l+5<<3,D=ks(i,$t)+ks(n,pn)+r,O=ks(i,d)+ks(n,p)+r+14+3*k+ks(w,S)+(2*w[16]+3*w[17]+7*w[18]);if(j<=D&&j<=O)return on(e,h,o.subarray(A,A+l));var $,M,L,W;if(Ke(e,h,1+(O<D)),h+=2,O<D){$=Xs(d,u,0),M=d,L=Xs(p,f,0),W=p;var ie=Xs(S,_,0);Ke(e,h,E-257),Ke(e,h+5,y-1),Ke(e,h+10,k-4),h+=14;for(var Q=0;Q<k;++Q)Ke(e,h+3*Q,S[Il[Q]]);h+=3*k;for(var ee=[C,B],pe=0;pe<2;++pe)for(var Pe=ee[pe],Q=0;Q<Pe.length;++Q){var be=Pe[Q]&31;Ke(e,h,ie[be]),h+=S[be],be>15&&(Ke(e,h,Pe[Q]>>>5&127),h+=Pe[Q]>>>12)}}else $=mm,M=$t,L=Im,W=pn;for(var Q=0;Q<a;++Q)if(s[Q]>255){var be=s[Q]>>>18&31;Us(e,h,$[be+257]),h+=M[be+257],be>7&&(Ke(e,h,s[Q]>>>23&31),h+=Uo[be]);var Ee=s[Q]&31;Us(e,h,L[Ee]),h+=W[Ee],Ee>3&&(Us(e,h,s[Q]>>>5&8191),h+=ko[Ee])}else Us(e,h,$[s[Q]]),h+=M[s[Q]];return Us(e,h,$[256]),h+M[256]},Em=new Es([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Go=new ge(0),Cm=function(o,e,t,s,i,n){var r=o.length,a=new ge(s+r+5*(1+Math.ceil(r/7e3))+i),A=a.subarray(s,a.length-i),l=0;if(!e||r<8)for(var h=0;h<=r;h+=65535){var c=h+65535;c<r?l=on(A,l,o.subarray(h,c)):(A[h]=n,l=on(A,l,o.subarray(h,r)))}else{for(var d=Em[e-1],u=d>>>13,g=d&8191,p=(1<<t)-1,f=new de(32768),I=new de(p+1),C=Math.ceil(t/3),E=2*C,m=function(xn){return(o[xn]^o[xn+1]<<C^o[xn+2]<<E)&p},B=new Es(25e3),y=new de(288),w=new de(32),Q=0,v=0,h=0,S=0,_=0,k=0;h<r;++h){var j=m(h),D=h&32767,O=I[j];if(f[D]=O,I[j]=D,_<=h){var $=r-h;if((Q>7e3||S>24576)&&$>423){l=Bl(o,A,0,B,y,w,v,S,k,h-k,l),S=Q=v=0,k=h;for(var M=0;M<286;++M)y[M]=0;for(var M=0;M<30;++M)w[M]=0}var L=2,W=0,ie=g,ee=D-O&32767;if($>2&&j==m(h-ee))for(var pe=Math.min(u,$)-1,Pe=Math.min(32767,h),be=Math.min(258,$);ee<=Pe&&--ie&&D!=O;){if(o[h+L]==o[h+L-ee]){for(var Ee=0;Ee<be&&o[h+Ee]==o[h+Ee-ee];++Ee);if(Ee>L){if(L=Ee,W=ee,Ee>pe)break;for(var dh=Math.min(ee,Ee-2),Po=0,M=0;M<dh;++M){var vn=h-ee+M+32768&32767,gh=f[vn],Oo=vn-gh+32768&32767;Oo>Po&&(Po=Oo,O=vn)}}}D=O,O=f[D],ee+=D-O+32768&32767}if(W){B[S++]=268435456|Io[L]<<18|El[W];var Ho=Io[L]&31,$o=El[W]&31;v+=Uo[Ho]+ko[$o],++y[257+Ho],++w[$o],_=h+L,++Q}else B[S++]=o[h],++y[o[h]]}}l=Bl(o,A,n,B,y,w,v,S,k,h-k,l),!n&&l&7&&(l=on(A,l+1,Go))}return Ah(a,0,s+ah(l)+i)},Bm=function(){for(var o=new Es(256),e=0;e<256;++e){for(var t=e,s=9;--s;)t=(t&1&&3988292384)^t>>>1;o[e]=t}return o}(),ym=function(){var o=-1;return{p:function(e){for(var t=o,s=0;s<e.length;++s)t=Bm[t&255^e[s]]^t>>>8;o=t},d:function(){return~o}}},wm=function(o,e,t,s,i){return Cm(o,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(o.length)))*1.5):12+e.mem,t,s,!i)},lh=function(o,e){var t={};for(var s in o)t[s]=o[s];for(var s in e)t[s]=e[s];return t},ae=function(o,e,t){for(;t;++e)o[e]=t,t>>>=8};function Qm(o,e){return wm(o,e||{},0,0)}var ch=function(o,e,t,s){for(var i in o){var n=o[i],r=e+i;n instanceof ge?t[r]=[n,s]:Array.isArray(n)?t[r]=[n[0],lh(s,n[1])]:ch(n,r+"/",t,s)}},yl=typeof TextEncoder<"u"&&new TextEncoder,vm=typeof TextDecoder<"u"&&new TextDecoder,xm=0;try{vm.decode(Go,{stream:!0}),xm=1}catch{}function fn(o,e){if(e){for(var t=new ge(o.length),s=0;s<o.length;++s)t[s]=o.charCodeAt(s);return t}if(yl)return yl.encode(o);for(var i=o.length,n=new ge(o.length+(o.length>>1)),r=0,a=function(h){n[r++]=h},s=0;s<i;++s){if(r+5>n.length){var A=new ge(r+8+(i-s<<1));A.set(n),n=A}var l=o.charCodeAt(s);l<128||e?a(l):l<2048?(a(192|l>>6),a(128|l&63)):l>55295&&l<57344?(l=65536+(l&1047552)|o.charCodeAt(++s)&1023,a(240|l>>18),a(128|l>>12&63),a(128|l>>6&63),a(128|l&63)):(a(224|l>>12),a(128|l>>6&63),a(128|l&63))}return Ah(n,0,r)}var Bo=function(o){var e=0;if(o)for(var t in o){var s=o[t].length;if(s>65535)throw"extra field too long";e+=s+4}return e},wl=function(o,e,t,s,i,n,r,a){var A=s.length,l=t.extra,h=a&&a.length,c=Bo(l);ae(o,e,r!=null?33639248:67324752),e+=4,r!=null&&(o[e++]=20,o[e++]=t.os),o[e]=20,e+=2,o[e++]=t.flag<<1|(n==null&&8),o[e++]=i&&8,o[e++]=t.compression&255,o[e++]=t.compression>>8;var d=new Date(t.mtime==null?Date.now():t.mtime),u=d.getFullYear()-1980;if(u<0||u>119)throw"date not in range 1980-2099";if(ae(o,e,u<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>>1),e+=4,n!=null&&(ae(o,e,t.crc),ae(o,e+4,n),ae(o,e+8,t.size)),ae(o,e+12,A),ae(o,e+14,c),e+=16,r!=null&&(ae(o,e,h),ae(o,e+6,t.attrs),ae(o,e+10,r),e+=14),o.set(s,e),e+=A,c)for(var g in l){var p=l[g],f=p.length;ae(o,e,+g),ae(o,e+2,f),o.set(p,e+4),e+=4+f}return h&&(o.set(a,e),e+=h),e},bm=function(o,e,t,s,i){ae(o,e,101010256),ae(o,e+8,t),ae(o,e+10,t),ae(o,e+12,s),ae(o,e+16,i)};function Sm(o,e){e||(e={});var t={},s=[];ch(o,"",t,e);var i=0,n=0;for(var r in t){var a=t[r],A=a[0],l=a[1],h=l.level==0?0:8,c=fn(r),d=c.length,u=l.comment,g=u&&fn(u),p=g&&g.length,f=Bo(l.extra);if(d>65535)throw"filename too long";var I=h?Qm(A,l):A,C=I.length,E=ym();E.p(A),s.push(lh(l,{size:A.length,crc:E.d(),c:I,f:c,m:g,u:d!=r.length||g&&u.length!=p,o:i,compression:h})),i+=30+d+f+C,n+=76+2*(d+f)+(p||0)+C}for(var m=new ge(n+22),B=i,y=n-i,w=0;w<s.length;++w){var c=s[w];wl(m,c.o,c,c.f,c.u,c.c.length);var Q=30+c.f.length+Bo(c.extra);m.set(c.c,c.o+Q),wl(m,i,c,c.f,c.u,c.c.length,c.o,c.m),i+=16+Q+(c.m?c.m.length:0)}return bm(m,i,s.length,y,B),m}class _m{async parse(e,t={}){t=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},quickLookCompatible:!1},t);const s={},i="model.usda";s[i]=null;let n=hh();n+=Rm(t);const r={},a={};e.traverseVisible(l=>{if(l.isMesh){const h=l.geometry,c=l.material;if(c.isMeshStandardMaterial){const d="geometries/Geometry_"+h.id+".usda";if(!(d in s)){const u=Fm(h);s[d]=Dm(u)}c.uuid in r||(r[c.uuid]=c),n+=Lm(l,h,c)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",l)}else l.isCamera&&(n+=Vm(l))}),n+=Mm(),n+=Om(r,a,t.quickLookCompatible),s[i]=fn(n),n=null;for(const l in a){const h=a[l],c=Tm(h.image,h.flipY),d=await new Promise(u=>c.toBlob(u,"image/png",1));s[`textures/Texture_${l}.png`]=new Uint8Array(await d.arrayBuffer())}let A=0;for(const l in s){const h=s[l],c=34+l.length;A+=c;const d=A&63;if(d!==4){const u=64-d,g=new Uint8Array(u);s[l]=[h,{extra:{12345:g}}]}A=h.length}return Sm(s,{level:0})}}function Tm(o,e){if(typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&o instanceof ImageBitmap){const t=1024/Math.max(o.width,o.height),s=document.createElement("canvas");s.width=o.width*Math.min(1,t),s.height=o.height*Math.min(1,t);const i=s.getContext("2d");return e===!0&&(i.translate(0,s.height),i.scale(1,-1)),i.drawImage(o,0,0,s.width,s.height),s}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const le=7;function hh(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	metersPerUnit = 1
	upAxis = "Y"
)

`}function Rm(o){return`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{
		token preliminary:anchoring:type = "${o.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${o.ar.planeAnchoring.alignment}"

`}function Mm(){return`
		}
	}
}

`}function Dm(o){let e=hh();return e+=o,fn(e)}function Lm(o,e,t){const s="Object_"+o.id,i=uh(o.matrixWorld);return o.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",o),`def Xform "${s}" (
	prepend references = @./geometries/Geometry_${e.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${i}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${t.id}>
}

`}function uh(o){const e=o.elements;return`( ${Hi(e,0)}, ${Hi(e,4)}, ${Hi(e,8)}, ${Hi(e,12)} )`}function Hi(o,e){return`(${o[e+0]}, ${o[e+1]}, ${o[e+2]}, ${o[e+3]})`}function Fm(o){return`
def "Geometry"
{
${Nm(o)}
}
`}function Nm(o){const e="Geometry",t=o.attributes,s=t.position.count;return`
	def Mesh "${e}"
	{
		int[] faceVertexCounts = [${Um(o)}]
		int[] faceVertexIndices = [${km(o)}]
		normal3f[] normals = [${Ql(t.normal,s)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${Ql(t.position,s)}]
${Pm(t,s)}
		uniform token subdivisionScheme = "none"
	}
`}function Um(o){const e=o.index!==null?o.index.count:o.attributes.position.count;return Array(e/3).fill(3).join(", ")}function km(o){const e=o.index,t=[];if(e!==null)for(let s=0;s<e.count;s++)t.push(e.getX(s));else{const s=o.attributes.position.count;for(let i=0;i<s;i++)t.push(i)}return t.join(", ")}function Ql(o,e){if(o===void 0)return console.warn("USDZExporter: Normals missing."),Array(e).fill("(0, 0, 0)").join(", ");const t=[];for(let s=0;s<o.count;s++){const i=o.getX(s),n=o.getY(s),r=o.getZ(s);t.push(`(${i.toPrecision(le)}, ${n.toPrecision(le)}, ${r.toPrecision(le)})`)}return t.join(", ")}function Gm(o,e){if(o===void 0)return console.warn("USDZExporter: UVs missing."),Array(e).fill("(0, 0)").join(", ");const t=[];for(let s=0;s<o.count;s++){const i=o.getX(s),n=o.getY(s);t.push(`(${i.toPrecision(le)}, ${1-n.toPrecision(le)})`)}return t.join(", ")}function Pm(o,e){let t="";for(let s=0;s<4;s++){const i=s>0?s:"",n=o["uv"+i];n!==void 0&&(t+=`
		texCoord2f[] primvars:st${i} = [${Gm(n,e)}] (
			interpolation = "vertex"
		)`)}return t}function Om(o,e,t=!1){const s=[];for(const i in o){const n=o[i];s.push(Hm(n,e,t))}return`def "Materials"
{
${s.join("")}
}

`}function Hm(o,e,t=!1){const s="			",i=[],n=[];function r(a,A,l){const h=a.source.id+"_"+a.flipY;e[h]=a;const c=a.channel>0?"st"+a.channel:"st",d={1e3:"repeat",1001:"clamp",1002:"mirror"},u=a.repeat.clone(),g=a.offset.clone(),p=a.rotation,f=Math.sin(p),I=Math.cos(p);return g.y=1-g.y-u.y,t?(g.x=g.x/u.x,g.y=g.y/u.y,g.x+=f/u.x,g.y+=I-1):(g.x+=f*u.x,g.y+=(1-I)*u.y),`
		def Shader "PrimvarReader_${A}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${c}"
			float2 outputs:result
		}

		def Shader "Transform2d_${A}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${o.id}/PrimvarReader_${A}.outputs:result>
			float inputs:rotation = ${(p*(180/Math.PI)).toFixed(le)}
			float2 inputs:scale = ${xl(u)}
			float2 inputs:translation = ${xl(g)}
			float2 outputs:result
		}

		def Shader "Texture_${a.id}_${A}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${h}.png@
			float2 inputs:st.connect = </Materials/Material_${o.id}/Transform2d_${A}.outputs:result>
			${l!==void 0?"float4 inputs:scale = "+$m(l):""}
			token inputs:sourceColorSpace = "${a.colorSpace===In?"raw":"sRGB"}"
			token inputs:wrapS = "${d[a.wrapS]}"
			token inputs:wrapT = "${d[a.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${o.transparent||o.alphaTest>0?"float outputs:a":""}
		}`}return o.side===Gt&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",o),o.map!==null?(i.push(`${s}color3f inputs:diffuseColor.connect = </Materials/Material_${o.id}/Texture_${o.map.id}_diffuse.outputs:rgb>`),o.transparent?i.push(`${s}float inputs:opacity.connect = </Materials/Material_${o.id}/Texture_${o.map.id}_diffuse.outputs:a>`):o.alphaTest>0&&(i.push(`${s}float inputs:opacity.connect = </Materials/Material_${o.id}/Texture_${o.map.id}_diffuse.outputs:a>`),i.push(`${s}float inputs:opacityThreshold = ${o.alphaTest}`)),n.push(r(o.map,"diffuse",o.color))):i.push(`${s}color3f inputs:diffuseColor = ${vl(o.color)}`),o.emissiveMap!==null?(i.push(`${s}color3f inputs:emissiveColor.connect = </Materials/Material_${o.id}/Texture_${o.emissiveMap.id}_emissive.outputs:rgb>`),n.push(r(o.emissiveMap,"emissive"))):o.emissive.getHex()>0&&i.push(`${s}color3f inputs:emissiveColor = ${vl(o.emissive)}`),o.normalMap!==null&&(i.push(`${s}normal3f inputs:normal.connect = </Materials/Material_${o.id}/Texture_${o.normalMap.id}_normal.outputs:rgb>`),n.push(r(o.normalMap,"normal"))),o.aoMap!==null&&(i.push(`${s}float inputs:occlusion.connect = </Materials/Material_${o.id}/Texture_${o.aoMap.id}_occlusion.outputs:r>`),n.push(r(o.aoMap,"occlusion"))),o.roughnessMap!==null&&o.roughness===1?(i.push(`${s}float inputs:roughness.connect = </Materials/Material_${o.id}/Texture_${o.roughnessMap.id}_roughness.outputs:g>`),n.push(r(o.roughnessMap,"roughness"))):i.push(`${s}float inputs:roughness = ${o.roughness}`),o.metalnessMap!==null&&o.metalness===1?(i.push(`${s}float inputs:metallic.connect = </Materials/Material_${o.id}/Texture_${o.metalnessMap.id}_metallic.outputs:b>`),n.push(r(o.metalnessMap,"metallic"))):i.push(`${s}float inputs:metallic = ${o.metalness}`),o.alphaMap!==null?(i.push(`${s}float inputs:opacity.connect = </Materials/Material_${o.id}/Texture_${o.alphaMap.id}_opacity.outputs:r>`),i.push(`${s}float inputs:opacityThreshold = 0.0001`),n.push(r(o.alphaMap,"opacity"))):i.push(`${s}float inputs:opacity = ${o.opacity}`),o.isMeshPhysicalMaterial&&(i.push(`${s}float inputs:clearcoat = ${o.clearcoat}`),i.push(`${s}float inputs:clearcoatRoughness = ${o.clearcoatRoughness}`),i.push(`${s}float inputs:ior = ${o.ior}`)),`
	def Material "Material_${o.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${i.join(`
`)}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${o.id}/PreviewSurface.outputs:surface>

${n.join(`
`)}

	}
`}function vl(o){return`(${o.r}, ${o.g}, ${o.b})`}function $m(o){return`(${o.r}, ${o.g}, ${o.b}, 1.0)`}function xl(o){return`(${o.x}, ${o.y})`}function Vm(o){const e=o.name?o.name:"Camera_"+o.id,t=uh(o.matrixWorld);return o.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",o),o.isOrthographicCamera?`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${t}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${o.near.toPrecision(le)}, ${o.far.toPrecision(le)})
			float horizontalAperture = ${((Math.abs(o.left)+Math.abs(o.right))*10).toPrecision(le)}
			float verticalAperture = ${((Math.abs(o.top)+Math.abs(o.bottom))*10).toPrecision(le)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${t}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${o.near.toPrecision(le)}, ${o.far.toPrecision(le)})
			float focalLength = ${o.getFocalLength().toPrecision(le)}
			float focusDistance = ${o.focus.toPrecision(le)}
			float horizontalAperture = ${o.getFilmWidth().toPrecision(le)}
			token projection = "perspective"
			float verticalAperture = ${o.getFilmHeight().toPrecision(le)}
		}
	
	`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=o=>e=>{try{const t=ut(e),s=(t.length?t[0].terms:[]).filter(n=>n&&n.type==="ident").map(n=>n.value).filter(n=>o.indexOf(n)>-1),i=new Set;for(const n of s)i.add(n);return i}catch{}return new Set};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss=globalThis&&globalThis.__decorate||function(o,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,s);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(n=(i<3?r(n):i>3?r(e,t,n):r(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};let bl=!1,Sl=!1;const _l="#model-viewer-no-ar-fallback",Km=qm(["quick-look","scene-viewer","webxr","none"]),Ym="webxr scene-viewer quick-look",we={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},Ye=Symbol("arButtonContainer"),Tl=Symbol("enterARWithWebXR"),Rl=Symbol("openSceneViewer"),Ml=Symbol("openIOSARQuickLook"),zm=Symbol("canActivateAR"),$i=Symbol("arMode"),Pr=Symbol("arModes"),is=Symbol("arAnchor"),Vi=Symbol("preload"),qi=Symbol("onARButtonContainerClick"),Or=Symbol("onARStatus"),Hr=Symbol("onARTracking"),$r=Symbol("onARTap"),Gs=Symbol("selectARMode"),Vr=Symbol("triggerLoad"),Jm=o=>{var e,t,s,i,n,r,a,A,l,h;class c extends o{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes=Ym,this.iosSrc=null,this.xrEnvironment=!1,this[e]=!1,this[t]=this.shadowRoot.querySelector(".ar-button"),this[s]=document.createElement("a"),this[i]=new Set,this[n]=we.NONE,this[r]=!1,this[a]=u=>{u.preventDefault(),this.activateAR()},this[A]=({status:u})=>{(u===At.NOT_PRESENTING||this[K].arRenderer.presentedScene===this[x])&&(this.setAttribute("ar-status",u),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:u}})),u===At.NOT_PRESENTING?this.removeAttribute("ar-tracking"):u===At.SESSION_STARTED&&this.setAttribute("ar-tracking",co.TRACKING))},this[l]=({status:u})=>{this.setAttribute("ar-tracking",u),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:u}}))},this[h]=u=>{u.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[$i]!==we.NONE}connectedCallback(){super.connectedCallback(),this[K].arRenderer.addEventListener("status",this[Or]),this.setAttribute("ar-status",At.NOT_PRESENTING),this[K].arRenderer.addEventListener("tracking",this[Hr]),this[is].addEventListener("message",this[$r])}disconnectedCallback(){super.disconnectedCallback(),this[K].arRenderer.removeEventListener("status",this[Or]),this[K].arRenderer.removeEventListener("tracking",this[Hr]),this[is].removeEventListener("message",this[$r])}update(u){super.update(u),u.has("arScale")&&(this[x].canScale=this.arScale!=="fixed"),u.has("arPlacement")&&(this[x].updateShadow(),this[Ie]()),u.has("arModes")&&(this[Pr]=Km(this.arModes)),(u.has("ar")||u.has("arModes")||u.has("src")||u.has("iosSrc"))&&this[Gs]()}async activateAR(){switch(this[$i]){case we.QUICK_LOOK:await this[Ml]();break;case we.WEBXR:await this[Tl]();break;case we.SCENE_VIEWER:this[Rl]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(e=zm,t=Ye,s=is,i=Pr,n=$i,r=Vi,a=qi,A=Or,l=Hr,h=$r,Gs)](){let u=we.NONE;if(this.ar){if(this.src!=null)for(const g of this[Pr]){if(g==="webxr"&&dc&&!bl&&await this[K].arRenderer.supportsPresentation()){u=we.WEBXR;break}if(g==="scene-viewer"&&Yd&&!Sl){u=we.SCENE_VIEWER;break}if(g==="quick-look"&&ra){u=we.QUICK_LOOK;break}}u===we.NONE&&this.iosSrc!=null&&ra&&(u=we.QUICK_LOOK)}if(u!==we.NONE)this[Ye].classList.add("enabled"),this[Ye].addEventListener("click",this[qi]);else if(this[Ye].classList.contains("enabled")){this[Ye].removeEventListener("click",this[qi]),this[Ye].classList.remove("enabled");const g=At.FAILED;this.setAttribute("ar-status",g),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:g}}))}this[$i]=u}async[Tl](){console.log("Attempting to present in AR with WebXR..."),await this[Vr]();try{this[Ye].removeEventListener("click",this[qi]);const{arRenderer:u}=this[K];u.placeOnWall=this.arPlacement==="wall",await u.present(this[x],this.xrEnvironment)}catch(u){console.warn("Error while trying to present in AR with WebXR"),console.error(u),await this[K].arRenderer.stopPresenting(),bl=!0,console.warn("Falling back to next ar-mode"),await this[Gs](),this.activateAR()}finally{this[Gs]()}}async[Vr](){this.loaded||(this[Vi]=!0,this[hs](),await Zd(this,"load"),this[Vi]=!1)}[Is](){return super[Is]()||this[Vi]}[Rl](){const u=self.location.toString(),g=new URL(u),p=new URL(this.src,u);p.hash&&(p.hash="");const f=new URLSearchParams(p.search);if(g.hash=_l,f.set("mode","ar_preferred"),f.has("disable_occlusion")||f.set("disable_occlusion","true"),this.arScale==="fixed"&&f.set("resizable","false"),this.arPlacement==="wall"&&f.set("enable_vertical_placement","true"),f.has("sound")){const E=new URL(f.get("sound"),u);f.set("sound",E.toString())}if(f.has("link")){const E=new URL(f.get("link"),u);f.set("link",E.toString())}const I=`intent://arvr.google.com/scene-viewer/1.0?${f.toString()+"&file="+encodeURIComponent(p.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(g.toString())};end;`,C=()=>{self.location.hash===_l&&(Sl=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[Gs]())};self.addEventListener("hashchange",C,{once:!0}),this[is].setAttribute("href",I),console.log("Attempting to present in AR with Scene Viewer..."),this[is].click()}async[Ml](){const u=!this.iosSrc;this[Ye].classList.remove("enabled");const g=u?await this.prepareUSDZ():this.iosSrc,p=new URL(g,self.location.toString());if(u){const C=self.location.toString(),E=new URL(C),m=new URL(this.src,E);m.hash&&(p.hash=m.hash)}this.arScale==="fixed"&&(p.hash&&(p.hash+="&"),p.hash+="allowsContentScaling=0");const f=this[is];f.setAttribute("rel","ar");const I=document.createElement("img");f.appendChild(I),f.setAttribute("href",p.toString()),u&&f.setAttribute("download","model.usdz"),f.style.display="none",f.isConnected||this.shadowRoot.appendChild(f),console.log("Attempting to present in AR with Quick Look..."),f.click(),f.removeChild(I),u&&URL.revokeObjectURL(g),this[Ye].classList.add("enabled")}async prepareUSDZ(){const u=this[Ot].beginActivity();await this[Vr]();const{model:g,shadow:p}=this[x];if(g==null)return"";let f=!1;p!=null&&(f=p.visible,p.visible=!1),u(.2);const C=await new _m().parse(g),E=new Blob([C],{type:"model/vnd.usdz+zip"}),m=URL.createObjectURL(E);return u(1),p!=null&&(p.visible=f),m}}return ss([F({type:Boolean,attribute:"ar"})],c.prototype,"ar",void 0),ss([F({type:String,attribute:"ar-scale"})],c.prototype,"arScale",void 0),ss([F({type:String,attribute:"ar-placement"})],c.prototype,"arPlacement",void 0),ss([F({type:String,attribute:"ar-modes"})],c.prototype,"arModes",void 0),ss([F({type:String,attribute:"ios-src"})],c.prototype,"iosSrc",void 0),ss([F({type:Boolean,attribute:"xr-environment"})],c.prototype,"xrEnvironment",void 0),c};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qr=globalThis&&globalThis.__decorate||function(o,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,s);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(n=(i<3?r(n):i>3?r(e,t,n):r(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const jm=100,Wm="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",Xm="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",Zm="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",Kr={AUTO:"auto",MANUAL:"manual"},Dl={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},Qt=Symbol("defaultProgressBarElement"),Yr=Symbol("posterContainerElement"),ns=Symbol("defaultPosterElement"),Ps=Symbol("shouldDismissPoster"),zr=Symbol("hidePoster"),Ki=Symbol("modelIsRevealed"),Jr=Symbol("updateProgressBar"),eI=Symbol("ariaLabelCallToAction"),jr=Symbol("onProgress"),tI=o=>{var e,t,s,i,n,r,a,A;class l extends o{constructor(...c){super(...c),this.poster=null,this.reveal=Kr.AUTO,this.loading=Dl.AUTO,this[e]=!1,this[t]=!1,this[s]=this.shadowRoot.querySelector(".slot.poster"),this[i]=this.shadowRoot.querySelector("#default-poster"),this[n]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[r]=this[ns].getAttribute("aria-label"),this[a]=jd(f=>{const I=this[Qt].parentNode;requestAnimationFrame(()=>{this[Qt].style.transform=`scaleX(${f})`,f===0&&(I.removeChild(this[Qt]),I.appendChild(this[Qt])),f===1?this[Qt].classList.add("hide"):this[Qt].classList.remove("hide")})},jm),this[A]=f=>{const I=f.detail.totalProgress;I===1&&(this[Jr].flush(),this.loaded&&(this[Ps]||this.reveal===Kr.AUTO)&&this[zr]()),this[Jr](I),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:I}}))};const d=self.ModelViewerElement||{},u=d.dracoDecoderLocation||Wm;ne.setDRACODecoderLocation(u);const g=d.ktx2TranscoderLocation||Xm;ne.setKTX2TranscoderLocation(g),d.meshoptDecoderLocation&&ne.setMeshoptDecoderLocation(d.meshoptDecoderLocation);const p=d.lottieLoaderLocation||Zm;ve.singleton.textureUtils.lottieLoaderUrl=p}static set dracoDecoderLocation(c){ne.setDRACODecoderLocation(c)}static get dracoDecoderLocation(){return ne.getDRACODecoderLocation()}static set ktx2TranscoderLocation(c){ne.setKTX2TranscoderLocation(c)}static get ktx2TranscoderLocation(){return ne.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(c){ne.setMeshoptDecoderLocation(c)}static get meshoptDecoderLocation(){return ne.getMeshoptDecoderLocation()}static set lottieLoaderLocation(c){ve.singleton.textureUtils.lottieLoaderUrl=c}static get lottieLoaderLocation(){return ve.singleton.textureUtils.lottieLoaderUrl}static mapURLs(c){ve.singleton.loader[vt].manager.setURLModifier(c)}dismissPoster(){this.loaded?this[zr]():(this[Ps]=!0,this[hs]())}showPoster(){const c=this[Yr];if(c.classList.contains("show"))return;c.classList.add("show"),this[ke].classList.remove("show");const d=this[ns];d.removeAttribute("tabindex"),d.removeAttribute("aria-hidden");const u=this.modelIsVisible;this[Ki]=!1,this[gn](u)}getDimensions(){return lt(this[x].size)}getBoundingBoxCenter(){return lt(this[x].boundingBox.getCenter(new U))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[Ot].addEventListener("progress",this[jr])}disconnectedCallback(){super.disconnectedCallback(),this[Ot].removeEventListener("progress",this[jr])}async updated(c){super.updated(c),c.has("poster")&&this.poster!=null&&(this[ns].style.backgroundImage=`url(${this.poster})`),c.has("alt")&&this[ns].setAttribute("aria-label",this[po]),(c.has("reveal")||c.has("loading"))&&this[hs]()}[(e=Ki,t=Ps,s=Yr,i=ns,n=Qt,r=eI,a=Jr,A=jr,Is)](){return!!this.src&&(this[Ps]||this.loading===Dl.EAGER||this.reveal===Kr.AUTO&&this[_t])}[zr](){this[Ps]=!1;const c=this[Yr];if(!c.classList.contains("show"))return;c.classList.remove("show"),this[ke].classList.add("show");const d=this.modelIsVisible;this[Ki]=!0,this[gn](d);const u=this.getRootNode();u&&u.activeElement===this&&this[ke].focus();const g=this[ns];g.setAttribute("aria-hidden","true"),g.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[Ht](){return super[Ht]()&&this[Ki]}}return qr([F({type:String})],l.prototype,"poster",void 0),qr([F({type:String})],l.prototype,"reveal",void 0),qr([F({type:String})],l.prototype,"loading",void 0),l};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wr=globalThis&&globalThis.__decorate||function(o,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,s);else for(var a=o.length-1;a>=0;a--)(r=o[a])&&(n=(i<3?r(n):i>3?r(e,t,n):r(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const sI=Math.PI/32,iI=3e3,nI={basis:[wn(ce(sI,"rad"))],keywords:{auto:[null]}},rs=Symbol("autoRotateStartTime"),Xr=Symbol("radiansPerSecond"),Ll=Symbol("syncRotationRate"),Zr=Symbol("onCameraChange"),rI=o=>{var e,t,s;class i extends o{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=iI,this.rotationPerSecond="auto",this[e]=performance.now(),this[t]=0,this[s]=r=>{this.autoRotate&&r.detail.source==="user-interaction"&&(this[rs]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[Zr]),this[rs]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[Zr]),this[rs]=performance.now()}updated(r){super.updated(r),r.has("autoRotate")&&(this[rs]=performance.now())}[(e=rs,t=Xr,Ll)](r){this[Xr]=r[0]}[Ge](r,a){if(super[Ge](r,a),!this.autoRotate||!this[Ht]()||this[K].isPresenting)return;const A=Math.min(a,r-this[rs]-this.autoRotateDelay);A>0&&(this[x].yaw=this.turntableRotation+this[Xr]*A*.001)}get turntableRotation(){return this[x].yaw}resetTurntableRotation(r=0){this[x].yaw=r}}return s=Zr,Wr([F({type:Boolean,attribute:"auto-rotate"})],i.prototype,"autoRotate",void 0),Wr([F({type:Number,attribute:"auto-rotate-delay"})],i.prototype,"autoRotateDelay",void 0),Wr([nt({intrinsics:nI,updateHandler:Ll}),F({type:String,attribute:"rotation-per-second"})],i.prototype,"rotationPerSecond",void 0),i};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=gm(Wf(rI(ng(gf(Jm(tI(dm(pi))))))));customElements.define("model-viewer",oI);const aI={__name:"LocationModel",props:{modelUrl:{type:String,default:""}},setup(o){return(e,t)=>{const s=Zs("model-viewer");return Y(),li(s,{ref:"modelRef",class:"h-full w-full object-contain object-center",src:o.modelUrl,exposure:.003,"camera-controls":"","camera-orbit":"45deg 55deg 0m",autoplay:"","disable-zoom":""},null,8,["src"])}}},AI=aI,lI=""+new URL("model.099f8bca.glb",import.meta.url).href,cI=""+new URL("model.720ccd19.glb",import.meta.url).href,hI=""+new URL("model.9f380566.glb",import.meta.url).href,uI=""+new URL("model.7ca9603d.glb",import.meta.url).href,dI=""+new URL("model.95e5ab29.glb",import.meta.url).href,gI=""+new URL("model.66966a62.glb",import.meta.url).href,pI=""+new URL("model.9d4a6cbe.glb",import.meta.url).href,fI=""+new URL("model.993334a3.glb",import.meta.url).href,mI=""+new URL("model.79f9fc7d.glb",import.meta.url).href,II=""+new URL("model.c8d0f348.glb",import.meta.url).href,EI=""+new URL("model.43e65676.glb",import.meta.url).href,CI=""+new URL("model.62641c86.glb",import.meta.url).href,BI={id:"locations",class:"container py-12 lg:py-32 grid place-items-center text-center lg:text-xl scroll-mt-28"},yI=T("p",{class:"lg:max-w-[600px]"},[_e(" Desde "),T("b",null,"playas"),_e(" interminables de aguas cristalinas hasta "),T("b",null,"mercados"),_e(" llenos de sabor con "),T("b",null,"productos de kilómetro 0"),_e(", cada lugar es una joya que cuenta una historia y escultura única sobre la isla. ")],-1),wI={class:"grid md:grid-cols-2 lg:grid-cols-4 lg:grid-rows-3 gap-x-8 gap-y-10 mt-14 lg:mt-24 w-full"},QI={class:"flex flex-col gap-6"},vI={class:"relative bg-white aspect-video w-full rounded-xl overflow-hidden w-full"},xI=T("div",{class:"absolute w-full h-full top-0 left-0 mix-blend-plus-lighter bg-gray-300 pointer-events-none"},null,-1),bI={class:"text-xl lg:text-3xl font-bold text-cyan-600 uppercase"},SI=mt({__name:"Locations",setup(o){const e=Be([{title:"Mercat de l'Olivar",modelUrl:lI},{title:"Mercat de Pere Garau",modelUrl:cI},{title:"Mercat de Santa Catalina",modelUrl:hI},{title:"Mercat d’Inca",modelUrl:uI},{title:"Mercat de Sóller",modelUrl:dI},{title:"Mercat de Sineu",modelUrl:gI},{title:"Mercat de Santa María del Camí",modelUrl:pI},{title:"Mercat de sa pobla",modelUrl:fI},{title:"Playa de Sóller",modelUrl:mI},{title:"Playa de Portals",modelUrl:II},{title:"Playa de Es Trenc",modelUrl:EI},{title:"Cala de Banyalbufar",modelUrl:CI}]);return(t,s)=>{const i=ui,n=AI,r=ic;return Y(),J("section",BI,[q(i,{class:"uppercase mb-6"},{default:Te(()=>[_e("Las localizaciones")]),_:1}),yI,T("section",wI,[(Y(!0),J(Ut,null,us(Dt(e),(a,A)=>(Y(),J("div",QI,[T("div",vI,[q(r,null,{default:Te(()=>[q(n,{modelUrl:a.modelUrl},null,8,["modelUrl"])]),_:2},1024),xI]),T("div",bI,dt(a.title),1)]))),256))])])}}}),_I=""+new URL("crowtec.f30f39bc.png",import.meta.url).href,TI=""+new URL("urban-hostel-palma.55f25113.png",import.meta.url).href,RI={class:"py-12 lg:py-32 bg-cyan-gradient"},MI={class:"container lg:text-xl text-neutral-200 text-center"},DI={class:"grid md:grid-cols-2 gap-y-12 gap-x-8 mt-10 lg:mt-20 w-full"},LI={class:"flex flex-col gap-6 lg:gap-8 w-full"},FI={class:"aspect-video rounded-xl overflow-hidden"},NI=["src"],UI={class:"text-xl lg:text-3xl font-bold uppercase"},kI={class:"text-sm lg:text-xl mt-2 lg:mt-4"},GI=mt({__name:"ProjectOwnership",setup(o){const e=[{title:"Crowtec",image:_I,link:"https://crowtec.co/",description:"Crowtec, empresa boutique de ingeniería informática que crea soluciones únicas mezclando el mundo real y el virtual, encargada de la creación y desarrollo de esta experiencia que combina la belleza de Mallorca con la magia de la tecnología."},{title:"Urban Hostel Palma",image:TI,link:"https://www.urbanhostelpalma.com/es/",description:"Urban Hostel Palma, un acogedor albergue ubicado en un antiguo convento de la ciudad de Palma con una rica historia, apasionado socio de la historia de Mallorca y encargado de impulsar y promocionar esta aventura en la hermosa isla."}];return(t,s)=>{const i=ui,n=Nl;return Y(),J("section",RI,[T("div",MI,[q(i,{class:"text-beige-100 uppercase"},{default:Te(()=>[_e("Un proyecto de")]),_:1}),T("section",DI,[(Y(),J(Ut,null,us(e,(r,a)=>T("div",LI,[T("figure",FI,[T("img",{class:"object-cover w-full h-full",src:r.image},null,8,NI)]),T("div",null,[T("div",UI,dt(r.title),1),T("div",kI,dt(r.description),1)]),q(n,{to:r.link,target:"_blank",type:"rounded",bordered:"",class:"w-fit px-6 py-1 lg:px-14 lg:py-4 mx-auto"},{default:Te(()=>[_e("+ info")]),_:2},1032,["to"])])),64))])])])}}}),PI={},OI={class:"relative w-full h-[60vh]"},HI=T("iframe",{class:"w-full h-full",style:{border:"0"},allowfullscreen:"",referrerpolicy:"no-referrer-when-downgrade",src:`https://www.google.com/maps/embed/v1/place?key=AIzaSyDOGm-DijjmZSuNJ8Zd774yj_HzsKhf9L8
    &q=Urban+Hostel+Palma`},null,-1),$I=T("div",{class:"absolute top-0 left-0 w-full h-full bg-cyan-950 mix-blend-saturation pointer-events-none"},null,-1),VI=[HI,$I];function qI(o,e){return Y(),J("div",OI,VI)}const KI=et(PI,[["render",qI]]),YI={},zI={class:"bg-black text-white text-opacity-30 py-6"},JI={class:"container flex flex-col-reverse lg:flex-row items-center justify-between gap-y-8"},jI=T("div",{class:"flex flex-col lg:flex-row items-center lg:items-start gap-y-4 gap-x-10"},[T("a",{class:"text-sm",href:"",target:"_blank"},"Condiciones de uso y privacidad"),T("a",{class:"text-sm",href:"",target:"_blank"},"Política de cookies")],-1);function WI(o,e){return Y(),J("section",zI,[T("div",JI,[T("small",null,"Mallorca Urban Experience © "+dt(new Date().getFullYear())+" Crowtec",1),jI])])}const XI=et(YI,[["render",WI]]),ZI=""+new URL("crowtec.3c13e12a.svg",import.meta.url).href,eE="data:image/png;base64,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",tE=""+new URL("eu-next-gen.02f1f481.png",import.meta.url).href,sE=""+new URL("mict.76bed42c.png",import.meta.url).href,iE=""+new URL("prtr.af2a0b23.png",import.meta.url).href,nE={},rE={class:"bg-orange-400 text-white font-bold"},oE=uu('<div class="container py-10 flex flex-col"><div class="flex flex-col md:flex-row items-center justify-center lg:justify-around gap-8"><div class="flex flex-col gap-4 justify-center items-center"><p class="max-w-[200px] text-center"> Un videojuego desarrollado por <a href="https://crowtec.co/" target="_blank">Crowtec</a></p><a href="https://crowtec.co/" target="_blank"><img class="h-30 py-2" src="'+ZI+'" alt="Crowtec"></a></div><div class="flex flex-col gap-4 justify-center items-center"><p class="max-w-[200px] text-center"> Una experiencia promocionada por Urban Hostel Palma </p><img class="h-20 rounded-lg" src="'+eE+'" alt="Urban Hostel Palma"></div></div></div><div class="bg-black border-b-[1px] border-orange-400"><div class="container flex flex-col flex-1 py-10"><p class="text-center lg:text-left">Un proyecto financiado por</p><div class="flex items-center justify-center lg:justify-between flex-wrap gap-8 mt-6"><img class="h-16 lg:h-20" src="'+tE+'" alt="Next Generation UE"><div class="flex flex-col md:flex-row gap-x-12 gap-y-6 justify-center items-center md:items-start"><img class="h-24 invert" src="'+sE+'" alt="Ministerio de Industria, Comercio y Turismo"><img class="h-24" src="'+iE+'" alt="Plan de recuperación, Transformación y Resilencia"></div></div></div></div>',2);function aE(o,e){const t=XI;return Y(),J("footer",rE,[oE,q(t)])}const AE=et(nE,[["render",aE]]);const lE={},cE={class:"relative bg-cyan-500 flex flex-col"},hE={class:"bg-gradient relative z-20"};function uE(o,e){const t=du,s=Du,i=Ou,n=Ku,r=nd,a=xd,A=SI,l=GI,h=KI,c=AE;return Y(),J("div",cE,[q(t),T("main",null,[q(s),T("section",hE,[q(i),q(n),q(r),q(a),q(A),q(l),q(h)])]),q(c)])}const SE=et(lE,[["render",uE],["__scopeId","data-v-97accccf"]]);export{SE as default};
